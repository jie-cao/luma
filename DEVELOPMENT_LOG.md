# LUMA Creator å¼€å‘æ—¥å¿—

æœ¬æ–‡æ¡£è®°å½• LUMA Creator çš„å¼€å‘è¿›åº¦å’Œè®¡åˆ’ï¼ŒæŒç»­æ›´æ–°ã€‚

---

## ğŸ“‹ å·²å®ŒæˆåŠŸèƒ½

### è§’è‰²åˆ›å»ºç³»ç»Ÿ (Phase 21-32)
- [x] **è§’è‰²æ¨¡æ¿ç³»ç»Ÿ**
  - CharacterTemplate æŠ½è±¡æ¥å£
  - Human/Cartoon/Mascot æ¨¡æ¿å®ç°
  - BodyProportions èº«ä½“æ¯”ä¾‹é¢„è®¾

- [x] **èº«ä½“éƒ¨ä»¶ç³»ç»Ÿ**
  - å¯ç»„åˆçš„å¤´/èº¯å¹²/å››è‚¢/å°¾å·´/ç¿…è†€
  - ç¨‹åºåŒ–å½¢çŠ¶ç”Ÿæˆï¼ˆçƒ/æ¤­çƒ/èƒ¶å›Š/åœ†æŸ±/åœ†é”¥/ç›’å­ï¼‰
  - è‡ªåŠ¨éª¨éª¼ç”Ÿæˆ

- [x] **å¡é€šç‰¹å¾ç³»ç»Ÿ**
  - å¤šç§çœ¼ç›æ ·å¼ï¼ˆCircle/Oval/Dot/Button/Anime/Disneyï¼‰
  - å¤šç§è€³æœµæ ·å¼ï¼ˆMouseRound/CatPointed/BunnyLong/BearRoundï¼‰
  - é¼»å­å’Œå˜´å·´æ ·å¼ï¼ˆæ”¯æŒæ— å˜´è®¾è®¡ï¼‰
  - é…é¥°ï¼ˆè´è¶ç»“/é¡¹åœˆç­‰ï¼‰

- [x] **æœè£…ç³»ç»Ÿ**
  - æœè£…åŠ è½½å™¨ï¼ˆOBJ/glTF/FBXï¼‰
  - å¸ƒæ–™ç‰©ç†æ¨¡æ‹Ÿï¼ˆè´¨ç‚¹-å¼¹ç°§ï¼‰
  - ç¨‹åºåŒ–å¸ƒæ–™çº¹ç†ï¼ˆæ£‰/ç‰›ä»”/ä¸ç»¸/çš®é©/ç¾Šæ¯›ï¼‰
  - è‡ªåŠ¨éª¨éª¼è’™çš®

- [x] **è´´å›¾ç³»ç»Ÿ**
  - çš®è‚¤/çœ¼ç›/å˜´å”‡ç¨‹åºåŒ–çº¹ç†
  - UV æ˜ å°„ä¼˜åŒ–
  - æ³•çº¿è´´å›¾å’Œç²—ç³™åº¦è´´å›¾

- [x] **å‘å‹ç³»ç»Ÿ**
  - å‘å‹åº“ï¼ˆå¹³å¤´/ä¸­é•¿å‘/é©¬å°¾ç­‰ï¼‰
  - 13 ç§é¢œè‰²é¢„è®¾
  - ç¨‹åºåŒ–å‘å‹ç”Ÿæˆ

- [x] **æ ‡å‡†ç»‘å®šç³»ç»Ÿï¼ˆStandard Rigï¼‰**
  - æ”¯æŒ Mixamo / Unity Humanoid / VRM / Unreal éª¨éª¼æ ‡å‡†
  - è‡ªåŠ¨éª¨éª¼å‘½åè½¬æ¢å’ŒåŠ¨ç”»é‡å®šå‘
  - ARKit 52 BlendShapes é¢éƒ¨ç»‘å®š
  - VRM è¡¨æƒ…å’Œ Visemeï¼ˆå£å‹åŒæ­¥ï¼‰æ”¯æŒ
  - è‡ªåŠ¨éª¨éª¼æƒé‡ç”Ÿæˆï¼ˆè·ç¦»/çƒ­æ‰©æ•£ï¼‰

### ç¼–è¾‘å™¨ç³»ç»Ÿ (Phase 31-32)
- [x] **æ’¤é”€/é‡åšç³»ç»Ÿ**
  - Command Pattern å®ç°
  - å‘½ä»¤åˆå¹¶ï¼ˆè¿ç»­æ»‘å—è°ƒæ•´ï¼‰
  - å¤åˆå‘½ä»¤æ”¯æŒ
  - å†…å­˜é™åˆ¶ç®¡ç†

- [x] **å¿«æ·é”®ç³»ç»Ÿ**
  - 60+ é¢„è®¾å¿«æ·é”®
  - ç”¨æˆ·è‡ªå®šä¹‰ç»‘å®š
  - å†²çªæ£€æµ‹å’Œé…ç½®ä¿å­˜

- [x] **æ¸²æŸ“é¢„è®¾ç³»ç»Ÿ**
  - 5 æ¡£è´¨é‡é¢„è®¾ï¼ˆPreview â†’ Ultraï¼‰
  - å®Œæ•´æ¸²æŸ“å‚æ•°æ§åˆ¶
  - é«˜è´¨é‡è¾“å‡ºè®¾ç½®

- [x] **Lip Sync å£å‹åŒæ­¥**
  - 27 ç§ Viseme å£å‹
  - éŸ³é¢‘å®æ—¶åˆ†æé©±åŠ¨
  - ARKit BlendShape æ˜ å°„

- [x] **åœºæ™¯å¸ƒç½®ç³»ç»Ÿ**
  - å¤šç‰©ä½“å±‚çº§ç®¡ç†
  - 6 ç§å›¾å±‚åˆ†ç±»
  - 6 å¥—åœºæ™¯é¢„è®¾
  - å¯¹é½/åˆ†å¸ƒå·¥å…·

- [x] **ç›¸æœºåŠ¨ç”»ç³»ç»Ÿ**
  - å…³é”®å¸§æ—¶é—´è½´
  - 9 ç§é¢„è®¾è¿åŠ¨
  - Bezier æ›²çº¿æ’å€¼
  - æ™¯æ·±åŠ¨ç”»æ”¯æŒ

### æ ¸å¿ƒæ¸²æŸ“ç³»ç»Ÿ
- [x] **DirectX 12 æ¸²æŸ“åç«¯**
  - DX12 è®¾å¤‡åˆå§‹åŒ–ã€å‘½ä»¤é˜Ÿåˆ—ã€å‘½ä»¤åˆ—è¡¨
  - æè¿°ç¬¦å †ç®¡ç†ï¼ˆSRVã€RTVã€DSVï¼‰
  - æ ¹ç­¾åå’Œç®¡çº¿çŠ¶æ€å¯¹è±¡ï¼ˆPSOï¼‰
  - å¸¸é‡ç¼“å†²åŒºï¼ˆ256 å­—èŠ‚å¯¹é½ï¼‰
  - æ·±åº¦æµ‹è¯•å’Œæ·±åº¦ç¼“å†²åŒº

- [x] **PBR æ¸²æŸ“ç®¡çº¿**
  - Cook-Torrance BRDFï¼ˆGGX åˆ†å¸ƒã€Smith å‡ ä½•å‡½æ•°ã€Fresnel-Schlickï¼‰
  - èƒ½é‡å®ˆæ’ï¼ˆé‡‘å±åº¦/ç²—ç³™åº¦ï¼‰
  - ACES Filmic è‰²è°ƒæ˜ å°„
  - Gamma æ ¡æ­£ï¼ˆsRGB â†” Linearï¼‰
  - æ–¹å‘å…‰ + åŠçƒç¯å¢ƒå…‰

- [x] **çº¹ç†æ”¯æŒ**
  - åŸºç¡€è‰²è´´å›¾ï¼ˆAlbedo/Diffuseï¼‰
  - æ³•çº¿è´´å›¾ï¼ˆNormal Mappingï¼ŒTBN çŸ©é˜µï¼‰
  - ORM è´´å›¾ï¼ˆOcclusion-Roughness-Metallicï¼‰
  - çº¹ç†è‡ªåŠ¨æ£€æµ‹ï¼ˆé€šè¿‡é‡‡æ ·äº®åº¦åˆ¤æ–­ï¼‰
  - åµŒå…¥çº¹ç†æ”¯æŒï¼ˆFBX å†…åµŒçº¹ç†ï¼‰
  - å„å‘å¼‚æ€§è¿‡æ»¤

- [x] **æ¨¡å‹åŠ è½½**
  - Assimp é›†æˆï¼ˆæ”¯æŒ FBX/OBJ/glTF/DAE/3DS ç­‰ 40+ æ ¼å¼ï¼‰
  - é¡¶ç‚¹æ•°æ®ï¼ˆä½ç½®ã€æ³•çº¿ã€åˆ‡çº¿ã€UVã€é¢œè‰²ï¼‰
  - æè´¨å‚æ•°è¯»å–ï¼ˆMetallicã€Roughnessã€Base Colorï¼‰
  - æ¨¡å‹è¾¹ç•Œè®¡ç®—ï¼ˆä¸­å¿ƒç‚¹ã€åŠå¾„ï¼‰
  - å¤šç½‘æ ¼æ”¯æŒ

### è§†å£ä¸ç›¸æœº
- [x] **Maya é£æ ¼ç›¸æœºæ§åˆ¶**
  - æ—‹è½¬ï¼ˆAlt + å·¦é”®ï¼‰ï¼šå›´ç»•ç›®æ ‡ç‚¹è½¨é“æ—‹è½¬
  - å¹³ç§»ï¼ˆAlt + ä¸­é”®ï¼‰ï¼šä¸Šä¸‹å·¦å³å¹³ç§»è§†å£
  - ç¼©æ”¾ï¼ˆAlt + å³é”® / æ»šè½®ï¼‰ï¼šæ¨æ‹‰ç›¸æœºè·ç¦»
  - é‡ç½®ç›¸æœºï¼ˆF é”®ï¼‰
  - è‡ªåŠ¨æ—‹è½¬ï¼ˆå¯é€‰ï¼‰

- [x] **åŠ¨æ€è£å‰ªå¹³é¢**
  - æ ¹æ®ç›¸æœºè·ç¦»è‡ªåŠ¨è°ƒæ•´è¿‘/è¿œè£å‰ªå¹³é¢
  - æ”¯æŒå¤§åœºæ™¯ç¼©æ”¾ï¼ˆé¿å…ç‰©ä½“æ¶ˆå¤±ï¼‰

- [x] **è§†è§‰è¾…åŠ©**
  - ä¸–ç•Œåæ ‡è½´ï¼ˆåŸç‚¹ XYZ è½´æŒ‡ç¤ºå™¨ï¼‰
  - åœ°é¢ç½‘æ ¼ï¼ˆå¯åˆ‡æ¢æ˜¾ç¤ºï¼ŒG é”®ï¼‰
  - 3D æ–¹å‘æŒ‡ç¤ºå™¨ï¼ˆè§†å£è§’è½ï¼‰

### ç”¨æˆ·ç•Œé¢
- [x] **ImGui é›†æˆ**
  - æ·±è‰²ä¸»é¢˜
  - ä¸»èœå•æ ï¼ˆFileã€Viewï¼‰
  - æ¨¡å‹ä¿¡æ¯é¢æ¿ï¼ˆæ˜¾ç¤ºæ¨¡å‹åã€ç½‘æ ¼æ•°ã€é¡¶ç‚¹æ•°ç­‰ï¼‰
  - ç›¸æœºæ§åˆ¶é¢æ¿ï¼ˆè·ç¦»ã€æ—‹è½¬è§’åº¦ã€ç›®æ ‡åç§»ï¼‰
  - è§†å£è®¾ç½®é¢æ¿ï¼ˆç½‘æ ¼ã€åæ ‡è½´å¼€å…³ï¼‰
  - å¸®åŠ©è¦†ç›–å±‚ï¼ˆF1 é”®ï¼Œå¿«æ·é”®è¯´æ˜ï¼‰
  - çŠ¶æ€æ ï¼ˆFPS æ˜¾ç¤ºï¼‰

- [x] **æ–‡ä»¶å¯¹è¯æ¡†**
  - Windows åŸç”Ÿæ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
  - æ”¯æŒå¤šæ ¼å¼è¿‡æ»¤

### æ¶æ„è®¾è®¡
- [x] **æ¨¡å—åŒ–æ¶æ„**
  - `UnifiedRenderer`ï¼šè·¨å¹³å°æ¸²æŸ“å™¨ï¼ˆDX12/Metalï¼‰
  - `OrbitCamera`ï¼šç›¸æœºçŠ¶æ€ç®¡ç†
  - `Viewport`ï¼šè§†å£æ§åˆ¶å™¨ï¼ˆè¾“å…¥å¤„ç†ã€æ¸²æŸ“ç¼–æ’ï¼‰
  - `UIPanels`ï¼šUI é¢æ¿æ¨¡å—åŒ–
  - `AsyncTextureLoader`ï¼šå¼‚æ­¥çº¹ç†åŠ è½½ç³»ç»Ÿ

- [x] **èµ„æºç®¡ç†**
  - GPU ç¼“å†²åŒºç®¡ç†ï¼ˆé¡¶ç‚¹ã€ç´¢å¼•ï¼‰
  - çº¹ç†èµ„æºç®¡ç†ï¼ˆSRV ç´¢å¼•åˆ†é…ï¼‰
  - å‘½ä»¤åˆ—è¡¨åŒæ­¥ï¼ˆFenceã€ç­‰å¾… GPUï¼‰

---

## ğŸ¯ å¼€å‘è·¯çº¿å›¾

æŒ‰ä¼˜å…ˆçº§æ’åºçš„åŠŸèƒ½å¼€å‘è®¡åˆ’ï¼š

### é˜¶æ®µ 1ï¼šåœºæ™¯å›¾ + å¤šå¯¹è±¡æ”¯æŒ âœ… [å·²å®Œæˆ]

è¿™æ˜¯æ‰€æœ‰åç»­åŠŸèƒ½çš„åŸºç¡€ã€‚

- [x] **åœºæ™¯å›¾ç³»ç»Ÿ**
  - Entity å®ä½“ç±»ï¼ˆå”¯ä¸€ IDã€åç§°ã€å¯ç”¨çŠ¶æ€ï¼‰
  - Transform ç»„ä»¶ï¼ˆä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ã€çŸ©é˜µè®¡ç®—ï¼‰
  - çˆ¶å­å±‚çº§å…³ç³»ï¼ˆå±€éƒ¨/ä¸–ç•Œå˜æ¢ï¼‰
  - SceneGraph ç®¡ç†å™¨ï¼ˆåˆ›å»ºã€åˆ é™¤ã€éå†ï¼‰

- [x] **å¤šå¯¹è±¡æ¸²æŸ“**
  - æ¯ä¸ª Entity å…³è” RHILoadedModel
  - æŒ‰ Entity Transform æ¸²æŸ“æ¨¡å‹
  - æ”¯æŒå¤šä¸ªæ¨¡å‹åŒæ—¶æ˜¾ç¤º
  - UnifiedRenderer::setCamera() + renderModel() API

- [x] **åœºæ™¯ç¼–è¾‘å™¨ UI**
  - åœºæ™¯å±‚æ¬¡é¢æ¿ï¼ˆScene Hierarchyï¼‰
  - æ·»åŠ /åˆ é™¤å¯¹è±¡
  - Inspector é¢æ¿ï¼ˆTransform ç¼–è¾‘ï¼‰

### é˜¶æ®µ 2ï¼šé˜´å½±ç³»ç»Ÿ âœ… [å·²å®Œæˆ]

PBR ä¹‹åæœ€é‡è¦çš„è§†è§‰ç‰¹æ€§ã€‚

- [x] **Shadow Mapping**
  - æ–¹å‘å…‰æ·±åº¦è´´å›¾ (2048x2048 é»˜è®¤)
  - é˜´å½±çŸ©é˜µè®¡ç®— (æ­£äº¤æŠ•å½±)
  - Shader é˜´å½±é‡‡æ ·

- [x] **é˜´å½±è´¨é‡**
  - PCF 3x3 è½¯é˜´å½±
  - æ·±åº¦åç½® + æ³•çº¿åç½®
  - å¯é…ç½®é˜´å½±è·ç¦»

**API:**
```cpp
ShadowSettings settings;
settings.enabled = true;
settings.mapSize = 2048;
settings.bias = 0.005f;
settings.pcfSamples = 3;
renderer.setShadowSettings(settings);

// In render loop:
renderer.beginShadowPass(sceneRadius);
scene.traverseRenderables([&](Entity* e) {
    renderer.renderModelShadow(e->model, e->worldMatrix.m);
});
renderer.endShadowPass();
```

### é˜¶æ®µ 3ï¼šIBL ç¯å¢ƒå…‰ç…§ âœ… [å·²å®Œæˆ]

è®© PBR æè´¨æ•ˆæœæ›´å®Œæ•´ã€‚

- [x] **Image-Based Lighting**
  - HDR ç¯å¢ƒè´´å›¾åŠ è½½ï¼ˆ.hdr æ ¼å¼ï¼‰
  - è¾ç…§åº¦è´´å›¾ï¼ˆDiffuse IBLï¼‰- CPU é¢„è®¡ç®—
  - é¢„è¿‡æ»¤ç¯å¢ƒè´´å›¾ï¼ˆSpecular IBLï¼‰- CPU é¢„è®¡ç®—
  - BRDF LUT (Split-Sum è¿‘ä¼¼)

**API:**
```cpp
IBLSettings ibl;
ibl.enabled = true;
ibl.intensity = 1.0f;
ibl.rotation = 0.0f;
renderer.setIBLSettings(ibl);
renderer.loadEnvironmentMap("path/to/environment.hdr");

// Shader è‡ªåŠ¨ä½¿ç”¨ IBL æ›¿ä»£ç®€å•ç¯å¢ƒå…‰
```

### é˜¶æ®µ 4ï¼šShader çƒ­é‡è½½ âœ… [å·²å®Œæˆ]

æå‡å¼€å‘è¿­ä»£æ•ˆç‡ã€‚

- [x] **æ–‡ä»¶ç›‘æ§**
  - è·¨å¹³å°æ–‡ä»¶ç›‘è§†å™¨ (FileWatcher)
  - ç›‘æ§ shaders/ ç›®å½•å˜åŒ–
  - æ£€æµ‹åˆ°ä¿®æ”¹æ—¶è‡ªåŠ¨è§¦å‘é‡ç¼–è¯‘

- [x] **Pipeline çƒ­æ›¿æ¢**
  - DX12: ä»å¤–éƒ¨ .hlsl æ–‡ä»¶åŠ è½½å’Œç¼–è¯‘
  - Metal: ä»å¤–éƒ¨ .metal æ–‡ä»¶é‡æ–°ç¼–è¯‘
  - éªŒè¯ç¼–è¯‘æˆåŠŸåæ›¿æ¢ Pipeline
  - å¤±è´¥æ—¶ä¿æŒæ—§ç‰ˆæœ¬å¹¶è¾“å‡ºé”™è¯¯

**API:**
```cpp
// å¯ç”¨çƒ­é‡è½½
renderer.setShaderHotReload(true);

// æ¯å¸§æ£€æŸ¥æ–‡ä»¶å˜åŒ–
renderer.checkShaderReload();

// æ‰‹åŠ¨è§¦å‘é‡è½½
if (!renderer.reloadShaders()) {
    std::cout << "Error: " << renderer.getShaderError() << std::endl;
}

// æ£€æŸ¥çŠ¶æ€
bool enabled = renderer.isShaderHotReloadEnabled();
```

**æ–‡ä»¶ä½ç½®:**
- `engine/renderer/shaders/pbr.hlsl` (DX12)
- `engine/renderer/shaders/shadow.hlsl` (DX12)
- `engine/renderer/shaders/pbr.metal` (Metal)

### é˜¶æ®µ 5ï¼šå¯¹è±¡é€‰æ‹©ä¸æ“ä½œ âœ… [å·²å®Œæˆ]

ç¼–è¾‘å™¨æ ¸å¿ƒäº¤äº’ã€‚

- [x] **é¼ æ ‡æ‹¾å–**
  - å°„çº¿-AABB ç›¸äº¤æ£€æµ‹
  - å±å¹•åæ ‡è½¬ä¸–ç•Œç©ºé—´å°„çº¿
  - åœºæ™¯éå†æ‰¾æœ€è¿‘å‘½ä¸­

- [x] **Transform Gizmo**
  - ç§»åŠ¨æ‰‹æŸ„ï¼ˆXYZ è½´ï¼‰
  - æ—‹è½¬æ‰‹æŸ„ï¼ˆä¸‰ä¸ªå¹³é¢åœ†ç¯ï¼‰
  - ç¼©æ”¾æ‰‹æŸ„ï¼ˆè½´å‘ + å‡åŒ€ç¼©æ”¾ï¼‰
  - æ‚¬åœ/æ¿€æ´»çŠ¶æ€é«˜äº®

**æ–‡ä»¶:**
- `engine/scene/picking.h` - å°„çº¿ã€AABBã€æ‹¾å–
- `engine/editor/gizmo.h` - Transform Gizmo

**API:**
```cpp
// å°„çº¿æ‹¾å–
float vpInverse[16];
renderer.getViewProjectionInverse(vpInverse);

float ndcX, ndcY;
pixelToNDC(mouseX, mouseY, width, height, ndcX, ndcY);
Ray ray = screenToWorldRay(ndcX, ndcY, vpInverse);

PickResult result = pickEntity(scene, ray);
if (result.hit()) {
    scene.setSelectedEntity(result.entity);
}

// Gizmo ä½¿ç”¨
TransformGizmo gizmo;
gizmo.setMode(GizmoMode::Translate);  // æˆ– Rotate, Scale
gizmo.setTarget(selectedEntity);

// æ£€æµ‹æ‚¬åœ
gizmo.testHover(ray, screenScale);

// æ‹–æ‹½äº¤äº’
if (mouseDown) gizmo.beginDrag(ray, screenScale);
if (dragging) gizmo.updateDrag(ray);
if (mouseUp) gizmo.endDrag();

// æ¸²æŸ“ Gizmo
GizmoRenderData data = gizmo.generateRenderData(screenScale);
std::vector<float> lines;
for (auto& line : data.lines) {
    lines.insert(lines.end(), {line.start.x, line.start.y, line.start.z,
                               line.end.x, line.end.y, line.end.z,
                               line.color[0], line.color[1], line.color[2], line.color[3]});
}
renderer.renderGizmoLines(lines.data(), data.lines.size());
```

### é˜¶æ®µ 6ï¼šåŠ¨ç”»ç³»ç»Ÿ âœ… [å·²å®Œæˆ]

è§’è‰²å’Œç‰©ä½“åŠ¨ç”»ã€‚

- [x] **éª¨éª¼åŠ¨ç”»**
  - éª¨éª¼å±‚æ¬¡ç»“æ„ (Skeleton)
  - é€†ç»‘å®šçŸ©é˜µ (Inverse Bind Matrix)
  - éª¨éª¼å±€éƒ¨å˜æ¢

- [x] **åŠ¨ç”»å‰ªè¾‘ (AnimationClip)**
  - ä½ç½®/æ—‹è½¬/ç¼©æ”¾å…³é”®å¸§
  - çº¿æ€§/çƒé¢æ’å€¼
  - å¾ªç¯/å•æ¬¡æ’­æ”¾

- [x] **åŠ¨ç”»æ’­æ”¾å™¨ (Animator)**
  - åŠ¨ç”»çŠ¶æ€ç®¡ç†
  - äº¤å‰æ·¡å…¥æ·¡å‡º (Crossfade)
  - å¤šåŠ¨ç”»æ··åˆ

- [x] **GPU Skinning**
  - HLSL/MSL Skinning Shader
  - æ¯é¡¶ç‚¹ 4 éª¨éª¼å½±å“
  - éª¨éª¼çŸ©é˜µç¼“å†²åŒº

**æ–‡ä»¶:**
- `engine/animation/skeleton.h` - éª¨éª¼å±‚æ¬¡
- `engine/animation/animation_clip.h` - åŠ¨ç”»æ•°æ®
- `engine/animation/animator.h` - æ’­æ”¾å’Œæ··åˆ
- `engine/animation/animation.h` - ç»Ÿä¸€å¤´æ–‡ä»¶
- `engine/renderer/shaders/skinned.hlsl` - DX12 è’™çš®ç€è‰²å™¨
- `engine/renderer/shaders/skinned.metal` - Metal è’™çš®ç€è‰²å™¨

**API:**
```cpp
// åˆ›å»ºéª¨éª¼
Skeleton skeleton;
int rootBone = skeleton.addBone("root", -1);
int spineBone = skeleton.addBone("spine", rootBone);
skeleton.setInverseBindMatrix(rootBone, inverseBindMat);

// åˆ›å»ºåŠ¨ç”»å‰ªè¾‘
auto clip = std::make_unique<AnimationClip>();
clip->name = "walk";
clip->duration = 1.0f;
auto& channel = clip->addChannel("spine");
channel.rotationKeys.push_back({0.0f, Quat::fromEuler(0, 0, 0)});
channel.rotationKeys.push_back({1.0f, Quat::fromEuler(0, 0.5f, 0)});

// æ’­æ”¾åŠ¨ç”»
Animator animator;
animator.setSkeleton(&skeleton);
animator.addClip("walk", std::move(clip));
animator.play("walk", 0.2f);  // 0.2s crossfade

// æ¯å¸§æ›´æ–°
animator.update(deltaTime);

// è·å–è’™çš®çŸ©é˜µ
Mat4 skinningMatrices[MAX_BONES];
animator.getSkinningMatrices(skinningMatrices);
// ä¸Šä¼ åˆ° GPU å¹¶æ¸²æŸ“
```

### é˜¶æ®µ 7ï¼šåå¤„ç†æ•ˆæœ âœ… [å·²å®Œæˆ]

- [x] **Bloom æ³›å…‰**
  - äº®åº¦é˜ˆå€¼æå–
  - å¤šçº§é«˜æ–¯æ¨¡ç³Š
  - è½¯é˜ˆå€¼è¿‡æ¸¡

- [x] **è‰²è°ƒæ˜ å°„ (Tone Mapping)**
  - Reinhard
  - ACES Filmic
  - Filmic
  - Uncharted 2
  - æ›å…‰è°ƒæ•´

- [x] **è‰²å½©è°ƒæ•´ (Color Grading)**
  - Lift/Gamma/Gain
  - è‰²æ¸©/è‰²è°ƒ
  - å¯¹æ¯”åº¦/é¥±å’Œåº¦

- [x] **FXAA æŠ—é”¯é½¿**
  - è¾¹ç¼˜æ£€æµ‹
  - äºšåƒç´ æ··åˆ

- [x] **å…¶ä»–æ•ˆæœ**
  - Vignette æš—è§’
  - Chromatic Aberration è‰²å·®
  - Film Grain èƒ¶ç‰‡é¢—ç²’

**æ–‡ä»¶:**
- `engine/renderer/post_process.h` - åå¤„ç†è®¾ç½®å’Œå¸¸é‡
- `engine/renderer/shaders/post_process.hlsl` - DX12 åå¤„ç†ç€è‰²å™¨
- `engine/renderer/shaders/post_process.metal` - Metal åå¤„ç†ç€è‰²å™¨

**API:**
```cpp
PostProcessSettings pp;

// Bloom
pp.bloom.enabled = true;
pp.bloom.threshold = 1.0f;
pp.bloom.intensity = 0.8f;

// Tone Mapping
pp.toneMapping.mode = ToneMappingSettings::Mode::ACES;
pp.toneMapping.exposure = 1.2f;

// Color Grading
pp.colorGrading.saturation = 1.1f;
pp.colorGrading.temperature = 0.1f;  // åæš–

// Vignette
pp.vignette.enabled = true;
pp.vignette.intensity = 0.3f;

// FXAA
pp.fxaa.enabled = true;

// åº”ç”¨åˆ°æ¸²æŸ“å™¨
renderer.setPostProcessSettings(pp);
```

### é˜¶æ®µ 8ï¼šåºåˆ—åŒ–ä¸èµ„æºç®¡ç† âœ… [å·²å®Œæˆ]

- [x] **JSON åºåˆ—åŒ–åº“**
  - è½»é‡çº§ header-only å®ç°
  - æ”¯æŒ null/bool/number/string/array/object
  - è§£æå™¨å’Œæ ¼å¼åŒ–è¾“å‡º
  - æ–‡ä»¶è¯»å†™

- [x] **åœºæ™¯åºåˆ—åŒ–**
  - Entity/Transform/Vec3/Quat åºåˆ—åŒ–
  - å±‚çº§å…³ç³»ä¿å­˜
  - æ¨¡å‹å¼•ç”¨æŒä¹…åŒ–
  - åœºæ™¯æ–‡ä»¶åŠ è½½/ä¿å­˜

- [x] **èµ„æºç®¡ç†å™¨**
  - èµ„äº§ç¼“å­˜ (Asset Cache)
  - å¼•ç”¨è®¡æ•°
  - è‡ªåŠ¨åƒåœ¾å›æ”¶ (GC)
  - ç¼“å­˜ç»Ÿè®¡

**æ–‡ä»¶:**
- `engine/serialization/json.h` - JSON è§£æå™¨/å†™å…¥å™¨
- `engine/serialization/scene_serializer.h` - åœºæ™¯åºåˆ—åŒ–
- `engine/asset/asset_manager.h` - èµ„æºç®¡ç†å™¨

**API:**

```cpp
// === JSON ===
JsonValue obj = JsonValue::object();
obj["name"] = "MyScene";
obj["entities"] = JsonValue::array();

std::string jsonStr = toJson(obj, true);  // æ ¼å¼åŒ–è¾“å‡º
JsonValue parsed = parseJson(jsonStr);

// æ–‡ä»¶æ“ä½œ
saveJsonFile("scene.json", obj);
JsonValue loaded = loadJsonFile("scene.json");

// === åœºæ™¯åºåˆ—åŒ– ===
SceneGraph scene;
// ... åˆ›å»ºå®ä½“ ...

// ä¿å­˜åœºæ™¯
SceneSerializer::saveScene(scene, "level1.scene", "Level 1");

// åŠ è½½åœºæ™¯
SceneSerializer::loadScene(scene, "level1.scene", 
    [&](const std::string& path, RHILoadedModel& model) {
        return renderer.loadModel(path, model);
    });

// === èµ„æºç®¡ç†å™¨ ===
AssetManager& assets = getAssetManager();

// è®¾ç½®åŠ è½½å™¨
assets.setModelLoader([&](const std::string& path) {
    return std::make_shared<Model>(loadModel(path));
});

// åŠ è½½èµ„æºï¼ˆè‡ªåŠ¨ç¼“å­˜ï¼‰
auto model = assets.loadModel<Model>("models/player.fbx");

// å¼•ç”¨è®¡æ•°
assets.addRef("models/player.fbx");
assets.release("models/player.fbx");

// åƒåœ¾å›æ”¶
assets.setUnusedTimeout(std::chrono::seconds(300));
assets.collectGarbage();

// ç»Ÿè®¡
auto stats = assets.getStatistics();
// stats.cacheHits, stats.cacheMisses, stats.hitRate
```

### é˜¶æ®µ 9ï¼šç¼–è¾‘å™¨ UI ç³»ç»Ÿ âœ… [å·²å®Œæˆ]

å®Œæ•´çš„ ImGui ç¼–è¾‘å™¨ç•Œé¢ç³»ç»Ÿï¼Œæ”¯æŒç°ä»£ç¼–è¾‘å™¨å·¥ä½œæµã€‚

**æ–‡ä»¶:**
- `engine/ui/editor_ui.h` - å®Œæ•´çš„ç¼–è¾‘å™¨ UI ç³»ç»Ÿ

**UI å¸ƒå±€:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File  Edit  View  Window                              FPS: 60      â”‚ <- Menu Bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Move] [Rotate] [Scale] | [Local/World] | [x] Snap  | [>] [||]     â”‚ <- Toolbar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Hierarchy   â”‚                                    â”‚ Inspector         â”‚
â”‚             â”‚                                    â”‚                   â”‚
â”‚ â—† Player    â”‚         3D Viewport                â”‚ Name: [Player  ]  â”‚
â”‚   â—† Weapon  â”‚                                    â”‚                   â”‚
â”‚ â—† Enemy     â”‚                                    â”‚ â–¼ Transform       â”‚
â”‚ â—‹ Light     â”‚                                    â”‚   Position [x,y,z]â”‚
â”‚             â”‚                                    â”‚   Rotation [x,y,z]â”‚
â”‚             â”‚                                    â”‚   Scale    [x,y,z]â”‚
â”‚             â”‚                                    â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                    â”‚ â–¼ Model           â”‚
â”‚ Post Proc.  â”‚                                    â”‚   Meshes: 3       â”‚
â”‚ â–¼ Bloom     â”‚                                    â”‚   Verts: 12450    â”‚
â”‚   [x] On    â”‚                                    â”‚                   â”‚
â”‚   Thresh 1.0â”‚                                    â”‚ [Add Component]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Assets                            â”‚ Animation Timeline               â”‚
â”‚ [D] models/  [M] player.fbx      â”‚ Clip: [Walk    v]  [Loop] Speed  â”‚
â”‚ [T] diffuse.png                  â”‚      |<  <  [>]  >  >|           â”‚
â”‚                                  â”‚ Time: 0.50 / 2.00                â”‚
â”‚                                  â”‚ â–“â–“â–“â–“â–“â–“â–“|â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ W/E/R: Transform | Alt+Mouse: Camera | F: Focus | G: Grid           â”‚ <- Status Bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½é¢æ¿:**

| é¢æ¿ | åŠŸèƒ½ |
|------|------|
| **Toolbar** | å˜æ¢å·¥å…· (ç§»åŠ¨/æ—‹è½¬/ç¼©æ”¾)ã€åæ ‡ç©ºé—´ã€å¸é™„ã€åŠ¨ç”»æ’­æ”¾ |
| **Hierarchy** | åœºæ™¯æ ‘ã€æœç´¢ã€æ‹–æ‹½æ’åºã€å³é”®èœå•ã€æ·»åŠ å®ä½“ |
| **Inspector** | å®ä½“å±æ€§ã€Transform ç¼–è¾‘ã€ç»„ä»¶ç®¡ç† |
| **Post Processing** | Bloomã€Tone Mappingã€Color Gradingã€Vignetteã€FXAA ç­‰ |
| **Render Settings** | é˜´å½±è®¾ç½®ã€IBL è®¾ç½®ã€è°ƒè¯•å¯è§†åŒ– |
| **Lighting** | æ–¹å‘å…‰ã€ç¯å¢ƒå…‰è®¾ç½® |
| **Animation Timeline** | åŠ¨ç”»å‰ªè¾‘é€‰æ‹©ã€æ’­æ”¾æ§åˆ¶ã€æ—¶é—´è½´æ‹–åŠ¨ |
| **Asset Browser** | æ–‡ä»¶æµè§ˆã€æ‹–æ‹½åŠ è½½ã€èµ„æºé¢„è§ˆ |
| **Console** | æ—¥å¿—è¾“å‡ºã€é”™è¯¯ä¿¡æ¯ |
| **Statistics** | FPSã€Draw Callsã€ä¸‰è§’å½¢/é¡¶ç‚¹æ•° |
| **Shader Status** | Hot-Reload çŠ¶æ€ã€ç¼–è¯‘é”™è¯¯ |

**å¿«æ·é”®:**
- `W` - ç§»åŠ¨å·¥å…·
- `E` - æ—‹è½¬å·¥å…·  
- `R` - ç¼©æ”¾å·¥å…·
- `F` - èšç„¦é€‰ä¸­å¯¹è±¡
- `G` - åˆ‡æ¢ç½‘æ ¼
- `Del` - åˆ é™¤é€‰ä¸­
- `Ctrl+D` - å¤åˆ¶
- `Alt+LMB` - è½¨é“æ—‹è½¬
- `Alt+MMB` - å¹³ç§»
- `Alt+RMB` - ç¼©æ”¾

**ä½¿ç”¨ç¤ºä¾‹:**
```cpp
#include "engine/ui/editor_ui.h"

// åˆå§‹åŒ–
ui::applyEditorTheme();

ui::EditorState editorState;
ui::PostProcessSettings postProcess;
ui::RenderSettings renderSettings;
ui::LightSettings lighting;
ui::AnimationState animation;

editorState.onModelLoad = [&](const std::string& path) {
    // åŠ è½½æ¨¡å‹
};

// æ¸²æŸ“å¾ªç¯
bool shouldQuit = false;
ui::drawMainMenuBar(editorState, viewport, shouldQuit);
ui::drawToolbar(editorState, gizmo);
ui::drawHierarchyPanel(scene, editorState);
ui::drawInspectorPanel(scene, editorState);
ui::drawPostProcessPanel(postProcess, editorState);
ui::drawRenderSettingsPanel(renderSettings, editorState);
ui::drawLightingPanel(lighting, editorState);
ui::drawAnimationTimeline(animation, editorState);
ui::drawAssetBrowser(editorState);
ui::drawConsole(editorState);
ui::drawStatsPanel(editorState);
ui::drawShaderStatus(shaderError, hotReload, onReload, editorState);
ui::drawStatusBar(width, height);
```

### é˜¶æ®µ 10ï¼šæ•´åˆæµ‹è¯•ä¸åº”ç”¨é‡æ„ ğŸš§ [è¿›è¡Œä¸­]

å°†æ‰€æœ‰å·²å®ç°çš„åŠŸèƒ½æ•´åˆåˆ°ä¸»åº”ç”¨ä¸­ï¼ŒéªŒè¯ååŒå·¥ä½œã€‚

#### 10.1 åº”ç”¨é‡å‘½å âœ…
- [x] `creator_imgui` â†’ `luma_studio` (LUMA Studio)
- [x] `creator_macos` â†’ `luma_studio_macos`
- [x] æ›´æ–° CMakeLists.txt ä¸­çš„ç›®æ ‡åç§°
- [x] æ›´æ–°çª—å£æ ‡é¢˜ä¸º "LUMA Studio"

#### 10.2 æ–° UI ç³»ç»Ÿæ¥å…¥ âœ…
- [x] æ›¿æ¢æ—§çš„ `panels.h` ä¸ºæ–°çš„ `editor_ui.h`
- [x] æ¥å…¥ EditorState çŠ¶æ€ç®¡ç†
- [x] æ¥å…¥ Toolbar å’Œ Gizmo æ§åˆ¶
- [x] æ¥å…¥å®Œæ•´çš„ Inspector é¢æ¿
- [x] æ¥å…¥ Post-Processing / Render Settings / Lighting é¢æ¿
- [x] æ¥å…¥ Animation Timeline
- [x] æ¥å…¥ Asset Browser å’Œ Console
- [x] Windows (DX12) å’Œ macOS (Metal) åŒå¹³å°æ›´æ–°

#### 10.3 åå¤„ç†ç®¡çº¿æ¥å…¥ âœ…
- [x] åå¤„ç† API å·²æ·»åŠ åˆ° UnifiedRenderer
  - `setPostProcessEnabled()` / `isPostProcessEnabled()`
  - `setPostProcessParams()` / `getFrameTime()`
- [x] Frame time è·Ÿè¸ªï¼ˆç”¨äºåŠ¨ç”»æ•ˆæœï¼‰
- [x] UI å‚æ•°ä¼ é€’åˆ°æ¸²æŸ“å™¨ï¼ˆWindows + macOSï¼‰
- [x] **HDR æ¸²æŸ“ç›®æ ‡** (RGBA16Float)
- [x] **Bloom ç®¡çº¿**:
  - Bloom é˜ˆå€¼æå– pass
  - æ°´å¹³é«˜æ–¯æ¨¡ç³Š pass (9-tap)
  - å‚ç›´é«˜æ–¯æ¨¡ç³Š pass (9-tap)
  - æœ€ç»ˆåˆæˆ pass (scene + bloom + tone mapping + vignette + film grain)
- [x] DX12 å®ç° (`unified_renderer_dx12.cpp`)
- [x] Metal å®ç° (`unified_renderer_metal.mm`)

**åå¤„ç†ç®¡çº¿æ¶æ„:**
```
Scene â”€â”€â–¶ HDR Target (RGBA16F) â”€â”€â–¶ Bloom Threshold â”€â”€â–¶ Blur H â”€â”€â–¶ Blur V â”€â”€â–¶ Composite â”€â”€â–¶ Swapchain
                                        â”‚                                         â”‚
                                        â””â”€â”€ æå–äº®åº¦ > threshold çš„åƒç´  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                                   â”‚
                                                                        + ACES Tone Mapping
                                                                        + Vignette
                                                                        + Film Grain
                                                                        + Gamma Correction
```

#### 10.4 åŠ¨ç”»ç³»ç»Ÿæ¥å…¥ âœ…
**å·²å®Œæˆ:**
- [x] åŠ¨ç”»æ•°æ®ç»“æ„ (Skeleton, AnimationClip, Animator)
- [x] æ¨¡å‹åŠ è½½å™¨æ”¯æŒéª¨éª¼å’ŒåŠ¨ç”» (`load_model_with_animations`)
- [x] SkinnedVertex ç»“æ„ (bone indices + weights)
- [x] Skinned shader (HLSL + Metal)
- [x] Entity æ·»åŠ  Skeleton å’Œ Animator æˆå‘˜
- [x] UnifiedRenderer æ·»åŠ  `renderSkinnedModel()` æ–¹æ³•
- [x] DX12 skinned pipeline (root signature + PSO + bone buffer)
- [x] Metal skinned pipeline (pipeline state + bone buffer)
- [x] åº”ç”¨ä¸­ä½¿ç”¨ `load_model_with_animations` (Windows + macOS)
- [x] è¿æ¥ Timeline UI åˆ° Animator (æ’­æ”¾/æš‚åœ/æ—¶é—´åŒæ­¥)
- [x] åŠ¨ç”»ç³»ç»Ÿå•å…ƒæµ‹è¯• (`animation_test.h`)
- [x] Animator æ·»åŠ  `setLooping()` å’Œ `setTime()` æ–¹æ³•

**æ–‡ä»¶:**
- `engine/animation/skeleton.h` - éª¨éª¼å±‚æ¬¡ç»“æ„
- `engine/animation/animation_clip.h` - å…³é”®å¸§åŠ¨ç”»æ•°æ®
- `engine/animation/animator.h` - åŠ¨ç”»æ’­æ”¾å’Œæ··åˆ
- `engine/animation/animation.h` - ç»Ÿä¸€å¤´æ–‡ä»¶
- `engine/animation/animation_test.h` - åŠ¨ç”»ç³»ç»Ÿæµ‹è¯•
- `engine/scene/entity.h` - Entity æ”¯æŒ skeleton + animator
- `engine/renderer/mesh.h` - SkinnedVertex ç»“æ„
- `engine/renderer/unified_renderer.h` - renderSkinnedModel API
- `engine/renderer/shaders/skinned.hlsl` - GPU è’™çš®ç€è‰²å™¨ (DX12)
- `engine/renderer/shaders/skinned.metal` - GPU è’™çš®ç€è‰²å™¨ (Metal)
- `apps/luma_studio/main.cpp` - Windows åº”ç”¨é›†æˆ
- `apps/luma_studio_macos/LumaView.mm` - macOS åº”ç”¨é›†æˆ

**æµ‹è¯•:**
è¿è¡ŒåŠ¨ç”»ç³»ç»Ÿæµ‹è¯•: `cmake --build build && ./build/luma_anim_test`
æµ‹è¯•å†…å®¹:
1. éª¨éª¼åˆ›å»º (3-bone arm skeleton)
2. åŠ¨ç”»å‰ªè¾‘åˆ›å»º (wave animation)
3. Animator æ’­æ”¾å’Œæ›´æ–°
4. æ—¶é—´è¿½è¸ª
5. Skinned mesh åˆ›å»º
6. å¾ªç¯æ’­æ”¾
7. åœæ­¢/é‡ç½®

#### 10.5 åœºæ™¯åºåˆ—åŒ–æ¥å…¥ âœ…
- [x] File â†’ Save Scene åŠŸèƒ½ï¼ˆå·²è¿æ¥å›è°ƒï¼‰
- [x] File â†’ Open Scene åŠŸèƒ½ï¼ˆå·²è¿æ¥å›è°ƒï¼‰
- [x] æ¨¡å‹è·¯å¾„æŒä¹…åŒ–
- [x] ä¿å­˜/æ¢å¤ç›¸æœºçŠ¶æ€ (yaw, pitch, distance, target offset)
- [x] ä¿å­˜/æ¢å¤åå¤„ç†è®¾ç½® (bloom, tone mapping, vignette, chromatic aberration, film grain, FXAA)
- [x] åœºæ™¯æ–‡ä»¶ç‰ˆæœ¬å‡çº§ (v1 â†’ v2)
- [x] æ–°å¢ `saveSceneFull()` / `loadSceneFull()` API

**æ–‡ä»¶:**
- `engine/serialization/scene_serializer.h` - æ‰©å±•åºåˆ—åŒ–æ”¯æŒ
  - `serializeCameraParams()` / `deserializeCameraParams()`
  - `serializePostProcess()` / `deserializePostProcess()`
- `apps/luma_studio/main.cpp` - Windows åº”ç”¨ä½¿ç”¨æ–° API
- `apps/luma_studio_macos/LumaView.mm` - macOS åº”ç”¨ä½¿ç”¨æ–° API

**åœºæ™¯æ–‡ä»¶æ ¼å¼ (v2):**
```json
{
  "version": 2,
  "name": "My Scene",
  "camera": {
    "yaw": 0.78, "pitch": 0.5, "distance": 1.0,
    "targetOffsetX": 0, "targetOffsetY": 0, "targetOffsetZ": 0
  },
  "postProcess": {
    "bloom": { "enabled": true, "threshold": 1.0, ... },
    "toneMapping": { "mode": 2, "exposure": 1.0, ... },
    "vignette": { ... }, "filmGrain": { ... }, "fxaa": { ... }
  },
  "entities": [...]
}
```

#### 10.6 èµ„æºç®¡ç†æ¥å…¥ âœ…
- [x] Asset Browser è¿æ¥åˆ° AssetManager
- [x] æ‹–æ‹½æ¨¡å‹åˆ° Viewport
- [x] ç¼“å­˜ç»Ÿè®¡æ˜¾ç¤º (æ–°å¢ Cache tab)
- [x] AssetManager åˆå§‹åŒ– (model loader, cache settings)
- [x] Windows + macOS åŒå¹³å°æ”¯æŒ

**æ–°å¢ UI åŠŸèƒ½:**
- Asset Browser æ–°å¢ "Cache" tab æ˜¾ç¤ºç¼“å­˜ç»Ÿè®¡
  - Total Loads / Cache Hits / Cache Misses
  - Hit Rate è¿›åº¦æ¡
  - Cached Assets æ•°é‡ / Cache Size (MB)
- æ–‡ä»¶æµè§ˆå™¨å¢å¼º (æ–‡ä»¶å¤§å° tooltip)
- Viewport æ‹–æ‹½æ¥æ”¶ (ä» Asset Browser æ‹–æ‹½æ–‡ä»¶åˆ°åœºæ™¯)

**æ–‡ä»¶:**
- `engine/ui/editor_ui.h`:
  - `AssetCacheStats` ç»“æ„
  - `drawAssetBrowserExtended()` - å¸¦ç¼“å­˜ç»Ÿè®¡çš„ Asset Browser
  - `handleViewportDragDrop()` - Viewport æ‹–æ‹½å¤„ç†
- `apps/luma_studio/main.cpp` - Windows AssetManager é›†æˆ
- `apps/luma_studio_macos/LumaView.mm` - macOS AssetManager é›†æˆ

#### 10.7 åŠŸèƒ½éªŒè¯æ¸…å• âœ…

**è‡ªåŠ¨åŒ–æµ‹è¯•** (`luma_integration_test`):
- [x] Math Types: Vec3/Quat/Mat4 è¿ç®—
- [x] Transform: çŸ©é˜µæ„å»ºã€æ¬§æ‹‰è§’è½¬æ¢
- [x] SceneGraph: åˆ›å»º/åˆ é™¤/å±‚çº§/æŸ¥æ‰¾
- [x] Animation: Skeleton/Clip/Animator
- [x] Serialization: JSON è§£æ/å†™å…¥/åœºæ™¯åºåˆ—åŒ–
- [x] PostProcess: è®¾ç½®ç»“æ„éªŒè¯

**æ‰‹åŠ¨æµ‹è¯•æ¸…å•** (è¿è¡Œ `--manual` å‚æ•°æŸ¥çœ‹):
- [x] åœºæ™¯å›¾ï¼šåˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€çˆ¶å­å…³ç³»
- [x] Transformï¼šä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ç¼–è¾‘
- [x] Gizmoï¼šç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾æ“ä½œ
- [x] é˜´å½±ï¼šæ–¹å‘å…‰é˜´å½±ã€PCF è½¯é˜´å½±
- [x] IBLï¼šç¯å¢ƒè´´å›¾åŠ è½½ã€åå°„æ•ˆæœ
- [x] åå¤„ç†ï¼šBloomã€ToneMappingã€FXAA
- [x] åŠ¨ç”»ï¼šæ’­æ”¾ã€æš‚åœã€æ—¶é—´è½´æ‹–åŠ¨
- [x] åºåˆ—åŒ–ï¼šä¿å­˜ã€åŠ è½½åœºæ™¯ï¼ˆå«ç›¸æœºå’Œåå¤„ç†è®¾ç½®ï¼‰
- [x] Shader çƒ­é‡è½½ï¼šä¿®æ”¹ .hlsl/.metal è‡ªåŠ¨æ›´æ–°

**æµ‹è¯•æ–‡ä»¶:**
- `tests/integration_test.h` - æµ‹è¯•å¥—ä»¶
- `tests/run_tests.cpp` - æµ‹è¯•è¿è¡Œå™¨
- ç¼–è¯‘: `cmake --build build --target luma_integration_test`
- è¿è¡Œ: `./build/luma_integration_test [--manual]`

---

## é˜¶æ®µ 11ï¼šäº§å“åŠŸèƒ½å®Œå–„ âœ…

> ç›®æ ‡ï¼šå°† LUMA Studio ä»æŠ€æœ¯æ¼”ç¤ºæå‡ä¸ºå¯ç”¨çš„äº§å“
> 
> **å®ŒæˆçŠ¶æ€**: 11.1-11.6 å·²å®Œæˆï¼Œ11.7 å¹³å°æ‰©å±•å¾…åç»­å®ç°

### 11.1 Undo/Redo ç³»ç»Ÿ âœ…
- [x] Command æ¨¡å¼åŸºç¡€æ¶æ„ (`engine/editor/command.h`)
- [x] Transform æ“ä½œæ’¤é”€ (`engine/editor/commands/transform_commands.h`)
- [x] åœºæ™¯å›¾æ“ä½œæ’¤é”€ (`engine/editor/commands/scene_commands.h`)
- [x] å¿«æ·é”®ç»‘å®š (Ctrl+Z / Ctrl+Shift+Z, Cmd+Z / Cmd+Shift+Z on macOS)
- [x] History Panel UI (Edit > History Panel)
- [x] å¯¹è±¡å¤åˆ¶ Ctrl+D / Cmd+D
- [ ] æè´¨ä¿®æ”¹æ’¤é”€ (å¾…æè´¨ç¼–è¾‘å™¨å®ç°åæ·»åŠ )

### 11.2 æè´¨ç¼–è¾‘å™¨ âœ…
- [x] PBR Material ç»“æ„ (`engine/material/material.h`)
- [x] MaterialLibrary ç®¡ç†å™¨
- [x] Inspector æè´¨å±æ€§é¢æ¿
- [x] Base Color é¢œè‰²é€‰æ‹©å™¨ (RGBA)
- [x] Metallic / Roughness / AO æ»‘å—
- [x] Emissive é¢œè‰²ä¸å¼ºåº¦æ§åˆ¶
- [x] Advanced å±æ€§ (Normal Strength, IOR, Two-Sided, Alpha)
- [x] çº¹ç†æ§½ä½ UI (æ‹–æ‹½æ”¯æŒ)
- [x] æè´¨é¢„è®¾ (Gold, Silver, Copper, Plastic, Rubber, Glass, Emissive)
- [x] Material Commands for Undo/Redo (`engine/editor/commands/material_commands.h`)

### 11.3 æˆªå›¾ä¸å¯¼å‡º âœ…
- [x] ScreenshotExporter ç³»ç»Ÿ (`engine/export/screenshot.h`)
- [x] PNG/JPG æ ¼å¼æ”¯æŒ
- [x] åˆ†è¾¨ç‡é¢„è®¾ (HD, FHD, 4K, Square)
- [x] è‡ªå®šä¹‰åˆ†è¾¨ç‡
- [x] é€æ˜èƒŒæ™¯é€‰é¡¹
- [x] Supersampling (1x/2x/4x)
- [x] Screenshot Settings Dialog UI
- [x] File èœå•é›†æˆ (F12 å¿«æ·é”®)
- [x] åŠ¨ç”»åºåˆ—å¯¼å‡º API
- [ ] è§†é¢‘ç¼–ç  (MP4/GIF) - éœ€ç¬¬ä¸‰æ–¹åº“

### 11.4 å¤šå…‰æºç³»ç»Ÿ âœ…
- [x] Light ç±»å‹å®šä¹‰ (`engine/lighting/light.h`)
- [x] æ”¯æŒ Directional / Point / Spot å…‰æº
- [x] LightManager ç®¡ç†å™¨ (æœ€å¤š 16 ç›ç¯)
- [x] AmbientLight è®¾ç½® (å« IBL é€‰é¡¹)
- [x] Entity Light ç»„ä»¶é›†æˆ
- [x] Lighting Panel UI (æ·»åŠ /åˆ é™¤/ç¼–è¾‘å…‰æº)
- [x] Inspector å…‰æºå±æ€§ç¼–è¾‘
- [x] å…‰æºè¡°å‡è®¡ç®— (constant/linear/quadratic)
- [x] Spot å…‰é”¥è®¡ç®— (inner/outer cone)
- [x] é˜´å½±å‚æ•° (bias, softness, map size)
- [x] GPU Light Data æ‰“åŒ… API
- [ ] å…‰æº Gizmo å¯è§†åŒ– (å¾…å®ç°)
- [ ] å¤šå…‰æºé˜´å½±æ¸²æŸ“ (å¾…å®ç°)

### 11.5 ç¼–è¾‘å™¨å¢å¼º âœ…
- [x] å¤šé€‰æ”¯æŒ (`SceneGraph::selectedEntities_`)
- [x] å¯¹è±¡å¤åˆ¶/ç²˜è´´ (`copySelection/pasteClipboard`)
- [x] å®ä½“å¤åˆ¶ (`duplicateEntity`)
- [x] ç›¸æœºé¢„è®¾ (Front/Back/Left/Right/Top/Bottom/Perspective)
- [x] ç›¸æœºä¹¦ç­¾ä¿å­˜/åŠ è½½
- [x] View èœå• Camera View å­èœå•
- [x] View èœå• Camera Bookmarks å­èœå•
- [x] çº¿æ¡†æ¨¡å¼é€‰é¡¹
- [x] æ­£äº¤è§†å›¾é€‰é¡¹
- [ ] æ‚¬åœé«˜äº® (å¾…å®ç°)
- [ ] æ¡†é€‰æ”¯æŒ (å¾…å®ç°)

### 11.6 æ€§èƒ½ä¼˜åŒ– âœ…
- [x] **Frustum Culling** (`engine/rendering/culling.h`)
  - Plane/Frustum æ•°å­¦åº“
  - BoundingSphere / AABB åŒ…å›´ä½“
  - FrustumCuller è§†é”¥è£å‰ªå™¨
  - CullingSystem ç»Ÿä¸€ç®¡ç†
- [x] **LOD System** (`engine/rendering/lod.h`)
  - LODLevel / LODGroup å®šä¹‰
  - è·ç¦»/å±å¹•å°ºå¯¸é€‰æ‹©
  - å¹³æ»‘è¿‡æ¸¡æ”¯æŒ
  - LODManager å…¨å±€ç®¡ç†
  - Quality é¢„è®¾ (Low/Medium/High/Ultra)
- [x] **GPU Instancing** (`engine/rendering/instancing.h`)
  - InstanceData GPU æ•°æ®ç»“æ„
  - InstanceBatch æ‰¹æ¬¡ç®¡ç†
  - InstancingManager å®ä¾‹åŒ–ç®¡ç†å™¨
  - IndirectDrawCommand é—´æ¥ç»˜åˆ¶æ”¯æŒ
- [x] **Occlusion Culling** (`engine/rendering/culling.h`)
  - OcclusionCuller é®æŒ¡æŸ¥è¯¢è¾…åŠ©
  - åƒç´ é˜ˆå€¼å¯é…ç½®
- [x] **Render Optimizer** (`engine/rendering/render_optimizer.h`)
  - ç»Ÿä¸€ä¼˜åŒ–ç®¡çº¿
  - RenderQueue æ¸²æŸ“é˜Ÿåˆ— (å‰åæ’åº)
  - é€æ˜/ä¸é€æ˜åˆ†ç¦»
  - å¸§ç»Ÿè®¡ä¿¡æ¯

### 11.7 å¹³å°æ‰©å±• (ç§»è‡³ Phase 14)
- [ ] iOS æŸ¥çœ‹å™¨
- [ ] Android æŸ¥çœ‹å™¨
- [ ] WebGL/WebGPU ç‰ˆæœ¬

---

## é˜¶æ®µ 12ï¼šåŠ¨ç”»ç³»ç»Ÿå¢å¼º âœ…

> ç›®æ ‡ï¼šå®Œå–„åŠ¨ç”»ç³»ç»Ÿï¼Œæ”¯æŒå¤æ‚åŠ¨ç”»æ··åˆå’ŒçŠ¶æ€ç®¡ç†

### 12.1 åŠ¨ç”»æ··åˆç³»ç»Ÿ âœ…
- [x] åŠ¨ç”»å±‚ (`engine/animation/animation_layer.h`)
  - AnimationLayer ç±»
  - å¤šå±‚åŠ¨ç”»æ’­æ”¾
  - Override/Additive/Multiply æ··åˆæ¨¡å¼
- [x] éª¨éª¼è’™ç‰ˆ (BoneMask)
  - æŒ‰éª¨éª¼åç§°è¿‡æ»¤
  - é€’å½’å­éª¨éª¼åŒ…å«
  - é¢„è®¾è’™ç‰ˆ (UpperBody/LowerBody/Arms)
- [x] æ··åˆæ ‘ (`engine/animation/blend_tree.h`)
  - BlendTree1D (1D å‚æ•°æ··åˆ)
  - BlendTree2D (2D å‚æ•°æ··åˆ)
  - å·¥å‚æ–¹æ³• (Locomotion/Directional)
- [x] Crossfade è¿‡æ¸¡
- [x] åŠ æ³•æ··åˆ (Additive Blending)
- [x] AnimationLayerManager

### 12.2 åŠ¨ç”»çŠ¶æ€æœº âœ…
- [x] AnimationStateMachine (`engine/animation/state_machine.h`)
- [x] AnimationState çŠ¶æ€èŠ‚ç‚¹
- [x] StateTransition è½¬æ¢
- [x] TransitionCondition æ¡ä»¶
  - If/IfNot/Greater/Less/GreaterEqual/LessEqual
- [x] AnimationParameter å‚æ•°
  - Float/Int/Bool/Trigger ç±»å‹
- [x] Any State è½¬æ¢
- [x] Exit Time æ”¯æŒ
- [x] ä¼˜å…ˆçº§æ’åº
- [x] é¢„è®¾çŠ¶æ€æœº (Locomotion/Combat)

### 12.3 é€†å‘è¿åŠ¨å­¦ (IK) âœ…
- [x] `engine/animation/ik_system.h`
- [x] TwoBoneIK (æ‰‹è‡‚/è…¿)
- [x] LookAtIK (å¤´éƒ¨è·Ÿè¸ª)
- [x] FootIK (åœ°å½¢é€‚åº”)
- [x] FABRIK (è¿­ä»£å¼ IK é“¾)
- [x] IKManager (å¤š IK ç®¡ç†)
- [x] IKRigHelper (äººå½¢éª¨éª¼è‡ªåŠ¨è®¾ç½®)

### 12.4 Timeline ç¼–è¾‘å™¨å¢å¼º âœ…
- [x] `engine/animation/timeline.h`
- [x] AnimationCurve<T> (æ³›å‹æ›²çº¿)
- [x] CurveKeyframe (Bezier åˆ‡çº¿)
- [x] TimelineTrack (å¤šè½¨é“)
- [x] Timeline (æ’­æ”¾æ§åˆ¶)
- [x] å…³é”®å¸§å¤åˆ¶/ç²˜è´´
- [x] CurveEditorState (æ›²çº¿ç¼–è¾‘å™¨ UI çŠ¶æ€)
- [x] æ ‡è®°ç³»ç»Ÿ (Markers)
- [x] å¸é™„ (Snap to frame/marker)

### 12.5 åŠ¨ç”»å·¥å…· âœ…
- [x] `engine/animation/animation_tools.h`
- [x] AnimationRetargeter (åŠ¨ç”»é‡å®šå‘)
  - éª¨éª¼æ˜ å°„
  - è‡ªåŠ¨æ˜ å°„ç”Ÿæˆ
  - æ—‹è½¬/ç¼©æ”¾/é•œåƒè°ƒæ•´
- [x] AnimationCompressor (åŠ¨ç”»å‹ç¼©)
  - çº¿æ€§å†—ä½™å…³é”®å¸§åˆ é™¤
  - å¯é…ç½®å®¹å·®
  - å‹ç¼©ç»Ÿè®¡
- [x] RootMotionExtractor (æ ¹è¿åŠ¨)
  - å¤šç§æå–æ¨¡å¼ (XZ/XYZ/Y/Rotation)
  - çƒ˜ç„™/ç§»é™¤æ ¹è¿åŠ¨
- [x] AnimationNotifyTrack (åŠ¨ç”»é€šçŸ¥)
  - äº‹ä»¶/éŸ³æ•ˆ/ç²’å­/è„šæ­¥è§¦å‘

---

## é˜¶æ®µ 13ï¼šé«˜çº§æ¸²æŸ“ç‰¹æ•ˆ âœ…

> ç›®æ ‡ï¼šå®ç°ç°ä»£æ¸¸æˆå¼•æ“çº§åˆ«çš„æ¸²æŸ“æ•ˆæœ

### 13.1 SSAO (å±å¹•ç©ºé—´ç¯å¢ƒå…‰é®è”½) âœ…
- [x] `engine/rendering/ssao.h`
- [x] SSAOSettings (é‡‡æ ·æ•°/åŠå¾„/å¼ºåº¦ç­‰)
- [x] SSAOKernel (åŠçƒé‡‡æ ·æ ¸)
- [x] SSAONoise (4x4 æ—‹è½¬å™ªå£°)
- [x] Metal Shader (SSAO + Blur + Apply)
- [x] è´¨é‡é¢„è®¾ (Low/Medium/High/Ultra)

### 13.2 HDR ç¯å¢ƒå…‰ç…§ (IBL) âœ…
- [x] `engine/rendering/ibl.h`
- [x] HDRImage (æµ®ç‚¹ HDR æ•°æ®)
- [x] HDRLoader (Radiance æ ¼å¼)
- [x] EnvironmentMap
  - ç­‰è·æŸ±çŠ¶å›¾è½¬ç«‹æ–¹ä½“è´´å›¾
  - æ¼«åå°„è¾ç…§åº¦å·ç§¯
  - é¢„æ»¤æ³¢é•œé¢åå°„è´´å›¾
  - BRDF LUT ç”Ÿæˆ
- [x] IBLSettings

### 13.3 å±å¹•ç©ºé—´åå°„ (SSR) âœ…
- [x] `engine/rendering/ssr.h`
- [x] SSRSettings (æ­¥æ•°/è·ç¦»/åšåº¦ç­‰)
- [x] SSRTracer (CPU å°„çº¿è¡Œè¿›)
- [x] SSRHit ç»“æœç»“æ„
- [x] äºŒåˆ†æœç´¢ç²¾ç»†åŒ–
- [x] è¾¹ç¼˜æ·¡å‡º
- [x] Metal Shader (SSR + Blur + Composite)
- [x] è´¨é‡é¢„è®¾ (Low/Medium/High)

### 13.4 ä½“ç§¯æ•ˆæœ âœ…
- [x] `engine/rendering/volumetrics.h`
- [x] VolumetricFog
  - é«˜åº¦è¡°å‡å¯†åº¦
  - Henyey-Greenstein ç›¸ä½å‡½æ•°
  - æ•£å°„/å¸æ”¶è®¡ç®—
- [x] GodRays (å±å¹•ç©ºé—´å…‰çº¿)
- [x] AtmosphericScattering
  - Rayleigh æ•£å°„ (è“å¤©)
  - Mie æ•£å°„ (å¤ªé˜³å…‰æ™•)
  - è¡Œæ˜Ÿå¤§æ°”æ¨¡æ‹Ÿ
- [x] é¢„è®¾ (Earth/Mars/LightFog/DenseFog)
- [x] Metal Shader (Fog + GodRay)

### 13.5 é«˜çº§é˜´å½± âœ…
- [x] `engine/rendering/advanced_shadows.h`
- [x] Cascaded Shadow Maps (CSM)
  - å¤šçº§çº§è” (1-4)
  - è‡ªåŠ¨åˆ†å‰²è·ç¦»è®¡ç®—
  - é˜´å½±ç¨³å®šåŒ– (é˜²æ­¢æ¸¸æ³³)
  - çº§è”æ··åˆ
- [x] PCSS (Percentage Closer Soft Shadows)
  - Blocker æœç´¢
  - å¯å˜åŠå½±å¤§å°
  - Poisson Disk é‡‡æ ·
- [x] æ¥è§¦ç¡¬åŒ–é˜´å½± (Contact Hardening)
- [x] CSM/PCF/PCSS Metal Shader
- [x] è´¨é‡é¢„è®¾ (Low/Medium/High/Ultra)

---

## é˜¶æ®µ 14ï¼šå¹³å°æ‰©å±• âœ…

> ç›®æ ‡ï¼šå°† LUMA Studio æ‰©å±•åˆ°å¤šä¸ªå¹³å°

### 14.1 iOS æŸ¥çœ‹å™¨ âœ…
- [x] iOS Metal æ¸²æŸ“å™¨ (`apps/luma_viewer_ios/`)
- [x] è§¦æ‘¸æ‰‹åŠ¿ (å•æŒ‡æ—‹è½¬/åŒæŒ‡å¹³ç§»/æåˆç¼©æ”¾/åŒå‡»é‡ç½®)
- [x] ç§»åŠ¨ç«¯ UI é€‚é… (Info Label + Toolbar)
- [x] æ€§èƒ½ä¼˜åŒ– (Frustum Culling + LOD)
- [ ] ARKit æ”¯æŒ (å¾…å®ç°)

**æ–‡ä»¶:**
- `apps/luma_viewer_ios/LumaViewController.mm` - ä¸»è§†å›¾æ§åˆ¶å™¨
- `apps/luma_viewer_ios/Info.plist` - iOS åº”ç”¨é…ç½®
- `apps/luma_viewer_ios/LaunchScreen.storyboard` - å¯åŠ¨å±å¹•

**æ„å»º:**
```bash
# ç”Ÿæˆ iOS Xcode é¡¹ç›®
cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_DEPLOYMENT_TARGET=14.0 -B build-ios
# åœ¨ Xcode ä¸­æ‰“å¼€å¹¶è¿è¡Œ
open build-ios/luma.xcodeproj
```

### 14.2 Android æŸ¥çœ‹å™¨ âœ…
- [x] Vulkan æ¸²æŸ“å™¨ (`apps/luma_viewer_android/`)
- [x] è§¦æ‘¸äº¤äº’ (å•æŒ‡è½¨é“/åŒæŒ‡å¹³ç§»/æåˆç¼©æ”¾)
- [x] JNI æ¡¥æ¥ (Kotlin â†” C++)
- [x] åŸºç¡€ UI (ä¿¡æ¯é¢æ¿ + å·¥å…·æ )

**æ–‡ä»¶:**
- `apps/luma_viewer_android/app/src/main/cpp/vulkan_renderer.cpp` - Vulkan æ¸²æŸ“å™¨
- `apps/luma_viewer_android/app/src/main/cpp/jni_bridge.cpp` - JNI æ¥å£
- `apps/luma_viewer_android/app/src/main/java/com/luma/viewer/MainActivity.kt` - ä¸» Activity

**æ„å»º:**
```bash
cd apps/luma_viewer_android
./gradlew assembleDebug
# APK è¾“å‡º: app/build/outputs/apk/debug/app-debug.apk
```

### 14.3 Web ç‰ˆæœ¬ âœ…
- [x] WebGPU æ¸²æŸ“å™¨ (`apps/luma_viewer_web/`)
- [x] WGSL ç€è‰²å™¨ (PBR å…‰ç…§)
- [x] é¼ æ ‡/è§¦æ‘¸äº¤äº’ (è½¨é“/å¹³ç§»/ç¼©æ”¾)
- [x] ç°ä»£ Web UI (HTML5 + CSS3)
- [ ] WebGL 2.0 å›é€€ (å¾…å®ç°)
- [ ] èµ„æºæµå¼åŠ è½½ (å¾…å®ç°)

**æ–‡ä»¶:**
- `apps/luma_viewer_web/src/renderer.ts` - WebGPU æ¸²æŸ“å™¨
- `apps/luma_viewer_web/src/camera.ts` - è½¨é“ç›¸æœº
- `apps/luma_viewer_web/src/geometry.ts` - å‡ ä½•ä½“å·¥å…·

**æ„å»º:**
```bash
cd apps/luma_viewer_web
npm install
npm run dev    # å¼€å‘æ¨¡å¼
npm run build  # ç”Ÿäº§æ„å»º
```

---

## é˜¶æ®µ 15ï¼šæµ‹è¯•ä¸æ–‡æ¡£ä¸ç¤ºä¾‹ âœ…

> ç›®æ ‡ï¼šç¡®ä¿ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œæä¾›å®Œæ•´ç¤ºä¾‹

### 15.1 æµ‹è¯•è¦†ç›– âœ…
- [x] `tests/unit_tests.h` - å®Œæ•´å•å…ƒæµ‹è¯•å¥—ä»¶
  - Math Tests (Vec3, Quat, Mat4)
  - Animation Tests (Skeleton, Clip, Animator, BlendTree, StateMachine)
  - Rendering Tests (Culling, LOD, SSAO, IBL, CSM, PCSS, Volumetrics)
  - IK Tests (TwoBoneIK, LookAtIK, IKManager)
  - Timeline Tests (Curve, Playback, Markers)
- [x] `tests/integration_test.h` - é›†æˆæµ‹è¯•
  - SceneGraph Tests
  - Transform Tests
  - Serialization Tests
- [x] `tests/run_tests.cpp` - æµ‹è¯•è¿è¡Œå™¨
  - å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ
  - å•å…ƒ/é›†æˆæµ‹è¯•é€‰æ‹©
  - æ‰‹åŠ¨æµ‹è¯•æ¸…å•

### 15.2 æ–‡æ¡£ âœ…
- [x] `docs/ARCHITECTURE.md` - æ¶æ„è®¾è®¡æ–‡æ¡£
  - ç›®å½•ç»“æ„
  - æ ¸å¿ƒç³»ç»Ÿæ¦‚è¿°
  - æ¸²æŸ“ç®¡çº¿æµç¨‹
  - å¹³å°æŠ½è±¡å±‚
  - æ‰©å±•ç‚¹
- [x] `docs/API_REFERENCE.md` - API å‚è€ƒæ–‡æ¡£
  - Math Types (Vec3, Quat, Mat4)
  - Scene Graph API
  - Animation API
  - Material & Lighting API
  - Rendering API
  - Editor API
  - Serialization API
  - Timeline API

### 15.3 ç¤ºä¾‹é¡¹ç›® âœ…

**A. ä»£ç ç¤ºä¾‹ (`examples/`)**
- [x] `01_basic_scene.h` - åœºæ™¯åˆ›å»ºã€Transformã€é€‰æ‹©
- [x] `02_animation.h` - éª¨éª¼åŠ¨ç”»ã€çŠ¶æ€æœºã€æ··åˆæ ‘ã€IK
- [x] `03_materials.h` - PBR æè´¨ã€é¢„è®¾ã€é€æ˜/å‘å…‰
- [x] `04_lighting.h` - å…‰æºç±»å‹ã€ä¸‰ç‚¹ç…§æ˜ã€è‰²æ¸©
- [x] `05_post_processing.h` - Bloomã€SSAOã€SSRã€ä½“ç§¯æ•ˆæœ
- [x] `06_performance.h` - Cullingã€LODã€Instancingã€Benchmark
- [x] `examples.h` - ç»Ÿä¸€å…¥å£ã€åˆ†ç±»ç›®å½•

**B. åœºæ™¯æ–‡ä»¶ (`assets/scenes/*.luma`)**
- [x] `demo_basic.luma` - åŸºç¡€åœºæ™¯ (3 å¯¹è±¡ + åŒå…‰æº)
- [x] `demo_materials.luma` - 5Ã—5 æè´¨ç½‘æ ¼æ¼”ç¤º
- [x] `demo_lighting.luma` - å¤šå…‰æº + èšå…‰ç¯æ¼”ç¤º

**C. æ•™ç¨‹æ–‡æ¡£ (`docs/tutorials/`)**
- [x] `01_getting_started.md` - å¿«é€Ÿå…¥é—¨
- [x] `02_scene_setup.md` - åœºæ™¯ç»„ç»‡
- [x] `03_materials.md` - PBR æè´¨è¯¦è§£
- [x] `04_animation.md` - åŠ¨ç”»ç³»ç»Ÿä½¿ç”¨
- [x] `05_lighting.md` - å…‰ç…§è®¾ç½®
- [x] `06_optimization.md` - æ€§èƒ½ä¼˜åŒ–æŒ‡å—

**D. å†…ç½®æ¼”ç¤ºæ¨¡å¼ (`engine/editor/demo_mode.h`)**
- [x] DemoMode ç±» (10 ç§æ¼”ç¤ºåœºæ™¯)
- [x] DemoInfo ç»“æ„ (id/name/description/category)
- [x] æ¼”ç¤ºåœºæ™¯ç”Ÿæˆå™¨:
  - basic - åŸºç¡€åœºæ™¯
  - materials - æè´¨ç½‘æ ¼
  - lighting - å¤šå…‰æº
  - hierarchy - å±‚çº§å…³ç³» (å¤ªé˜³ç³»)
  - animation_ready - åŠ¨ç”»å‡†å¤‡åœºæ™¯
  - post_process - åå¤„ç†æ¼”ç¤º (å‘å…‰)
  - stress_test - å‹åŠ›æµ‹è¯• (900 å¯¹è±¡)
  - material_presets - æ‰€æœ‰æè´¨é¢„è®¾
  - emissive - å‘å…‰/éœ“è™¹æ•ˆæœ
  - three_point - ä¸‰ç‚¹ç…§æ˜
- [x] DemoMenuState (Help èœå•é›†æˆ)

### 15.4 UI åŠŸèƒ½å®Œå–„ âœ…

**æ–°å¢ UI é¢æ¿ (`engine/ui/editor_ui.h`):**

| é¢æ¿ | åŠŸèƒ½ |
|------|------|
| **Advanced Post-Process** | SSAO è®¾ç½®ã€SSR è®¾ç½®ã€ä½“ç§¯é›¾ã€God Rays |
| **Advanced Shadows** | CSM çº§è”è®¾ç½®ã€PCSS è½¯é˜´å½± |
| **Environment** | HDR ç¯å¢ƒè´´å›¾åŠ è½½ã€IBL å¼ºåº¦/æ—‹è½¬ |
| **State Machine Editor** | å‚æ•°ç®¡ç†ã€çŠ¶æ€åˆ—è¡¨ã€è½¬æ¢ç¼–è¾‘ |
| **Blend Tree Editor** | 1D/2D æ··åˆæ ‘å¯è§†åŒ–ã€å‚æ•°æ§åˆ¶ |
| **IK Settings** | IK é“¾ç®¡ç†ã€ç›®æ ‡/æƒé‡æ§åˆ¶ |
| **Animation Layers** | å›¾å±‚æƒé‡ã€æ··åˆæ¨¡å¼ã€éª¨éª¼è’™ç‰ˆ |
| **LOD Settings** | è´¨é‡é¢„è®¾ã€LOD åå·®ã€è°ƒè¯•é¢œè‰² |
| **Demo Menu** | 10 ç§æ¼”ç¤ºåœºæ™¯ä¸€é”®ç”Ÿæˆ |

**æ–°å¢çŠ¶æ€ç»“æ„:**
- `AdvancedPostProcessState` - SSAO/SSR/Volumetrics è®¾ç½®
- `AdvancedShadowState` - CSM/PCSS è®¾ç½®
- `LODState` - LOD è´¨é‡è®¾ç½®

**èœå•æ›´æ–°:**
- Window èœå•é‡ç»„ (Panels / Rendering / Animation åˆ†ç»„)
- Help èœå•æ·»åŠ  Demo Scenes å…¥å£
- File èœå•å®Œå–„ (New/Open/Save å›è°ƒè¿æ¥)
- Edit èœå•å®Œå–„ (Delete/Duplicate å›è°ƒè¿æ¥)

**åŠŸèƒ½å®Œå–„:**
- æˆªå›¾åŠŸèƒ½ (F12 å¿«æ·é”®, è®¾ç½®å¯¹è¯æ¡†)
- HDR ç¯å¢ƒåŠ è½½ (æ–‡ä»¶å¯¹è¯æ¡†)
- å¿«æ·é”®å¸®åŠ©é¢æ¿æ‰©å±• (æ–°å¢ Cmd+Z/D/C/V, F12)
- SceneCallbacks ç³»ç»Ÿ (è·¨æ¨¡å—å›è°ƒ)

### 15.5 é«˜çº§æ¸²æŸ“ç³»ç»Ÿè¿æ¥ âœ…

**UnifiedRenderer æ–°å¢ API (`engine/renderer/unified_renderer.h`):**

| API | åŠŸèƒ½ |
|-----|------|
| `setSSAOEnabled/Settings` | SSAO å¼€å…³å’Œå‚æ•° |
| `setSSREnabled/Settings` | SSR å¼€å…³å’Œå‚æ•° |
| `setVolumetricFogEnabled/Settings` | ä½“ç§¯é›¾å¼€å…³å’Œå‚æ•° |
| `setGodRaysEnabled/Settings` | God Rays å¼€å…³å’Œå‚æ•° |
| `setCSMEnabled/Settings` | CSM çº§è”é˜´å½±å¼€å…³å’Œå‚æ•° |
| `setPCSSEnabled/Settings` | PCSS è½¯é˜´å½±å¼€å…³å’Œå‚æ•° |
| `updateCSM` | æ¯å¸§æ›´æ–° CSM çº§è” |

**Metal Shader å®ç° (`engine/renderer/shaders/advanced_post_process.metal`):**
- SSAO: åŠçƒé‡‡æ ·ã€æ·±åº¦é‡å»ºã€æ¨¡ç³Š
- SSR: å°„çº¿è¡Œè¿›ã€äºŒåˆ†æœç´¢ç»†åŒ–ã€è¾¹ç¼˜æ·¡å‡º
- Volumetric Fog: Henyey-Greenstein ç›¸ä½å‡½æ•°ã€é«˜åº¦è¡°å‡
- God Rays: å±å¹•ç©ºé—´å…‰çº¿ã€Poisson é‡‡æ ·
- CSM: çº§è”é€‰æ‹©ã€PCF é‡‡æ ·ã€PCSS è½¯é˜´å½±

**Impl çŠ¶æ€ (`unified_renderer_metal.mm`):**
- `ssaoEnabled`, `ssaoSettings`, `ssaoTexture`, `ssaoPipeline` ç­‰
- `ssrEnabled`, `ssrSettings`, `ssrTexture`, `ssrPipeline` ç­‰
- `fogEnabled`, `fogSettings`, `volumetricTexture`, `fogPipeline` ç­‰
- `csmEnabled`, `csmSettings`, `csmTextures[4]`, `csmViewProj[4]` ç­‰
- `pcssEnabled`, `pcssBlockerSamples`, `pcssPCFSamples`, `pcssLightSize`

**LumaView è¿æ¥ (`LumaView.mm`):**
- æ¯å¸§åŒæ­¥ UI è®¾ç½®åˆ°æ¸²æŸ“å™¨
- SSAO/SSR/Volumetrics/GodRays è®¾ç½®
- CSM/PCSS é˜´å½±è®¾ç½®

---

## Phase 16: ç²’å­ç³»ç»Ÿ âœ…

### 16.1 æ ¸å¿ƒæ•°æ®ç»“æ„ (`engine/particles/particle.h`)

**Particle ç»“æ„:**
- position, velocity, color, size
- startColor/endColor, startSize/endSize
- rotation, angularVelocity
- life/maxLife/age

**EmissionShape æšä¸¾:**
- Point, Sphere, Hemisphere, Cone, Box, Circle, Edge, Mesh

**ParticleEmitter:**
- å‘å°„ç‡æ§åˆ¶ (emissionRate, maxParticles)
- å½¢çŠ¶å‚æ•° (EmissionShapeParams)
- åˆå§‹å€¼èŒƒå›´ (life, speed, size, color, rotation)
- ç‰©ç† (gravity, drag)
- çˆ†å‘ (ParticleBurst)
- çº¹ç†åŠ¨ç”» (textureRows/Cols)

**ParticleSystem:**
- å¤šå‘å°„å™¨ç®¡ç†
- ä½ç½®/æ—‹è½¬
- æ’­æ”¾æ§åˆ¶ (play/stop/pause)

**ParticleManager:**
- å…¨å±€å•ä¾‹ç®¡ç†
- ç³»ç»Ÿåˆ›å»º/é”€æ¯
- æ¯å¸§æ›´æ–°

### 16.2 æ¨¡å—ç³»ç»Ÿ (`engine/particles/particle_modules.h`)

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| ColorOverLifetimeModule | é¢œè‰²æ¸å˜æ›²çº¿ |
| SizeOverLifetimeModule | å¤§å°æ›²çº¿ |
| VelocityOverLifetimeModule | çº¿æ€§/è½¨é“/å¾„å‘é€Ÿåº¦ |
| ForceFieldModule | æ–¹å‘/ç‚¹/æ¼©æ¶¡/æ¹æµåŠ›åœº |
| NoiseModule | å™ªå£°æ‰°åŠ¨ |
| RotationOverLifetimeModule | è§’é€Ÿåº¦æ›²çº¿ |
| LimitVelocityModule | é€Ÿåº¦é™åˆ¶ |
| CollisionModule | åœ°é¢ç¢°æ’/åå¼¹ |
| SubEmitterModule | å­å‘å°„å™¨è§¦å‘ |
| TrailModule | æ‹–å°¾æ•ˆæœ |
| TextureSheetModule | çº¹ç†åŠ¨ç”» |

**è¾…åŠ©ç±»:**
- ColorGradient - é¢œè‰²æ¸å˜
- FloatCurve - æµ®ç‚¹æ›²çº¿
- GradientKey<T> - å…³é”®å¸§

### 16.3 GPU æ¸²æŸ“ (`engine/renderer/shaders/particle.metal`)

**Vertex Shaders:**
- `particleVertex` - å…¬å‘Šæ¿ç²’å­
- `particleVertexStretched` - é€Ÿåº¦æ‹‰ä¼¸ç²’å­
- `trailVertex` - æ‹–å°¾æ¸²æŸ“

**Fragment Shaders:**
- `particleFragment` - çº¹ç†ç²’å­ + è½¯ç²’å­æ·¡å‡º
- `particleFragmentAdditive` - åŠ æ³•æ··åˆ
- `particleFragmentCircle` - åœ†å½¢ç¨‹åºåŒ–ç²’å­
- `particleFragmentStar` - æ˜Ÿå½¢/ç«èŠ±ç²’å­
- `particleFragmentSmoke` - çƒŸé›¾ç²’å­ (å™ªå£°)
- `particleFragmentFire` - ç«ç„°ç²’å­

**Uniform ç»“æ„:**
- ParticleUniforms (viewProj, camera, texture sheet, soft distance)
- ParticleData (position, size, color, rotation, frame)

### 16.4 é¢„è®¾æ•ˆæœ (`engine/particles/particle_presets.h`)

| ç±»åˆ« | é¢„è®¾ |
|------|------|
| **ç«ç„°** | fire, fireWithSparks |
| **çƒŸé›¾** | smoke, campfireSmoke, steam |
| **çˆ†ç‚¸** | explosion, explosionWithSmoke |
| **é­”æ³•** | magicSparkle, magicAura, magicOrb, portal |
| **å¤©æ°”** | rain, heavyRain, snow, blizzard |
| **ç‰¹æ•ˆ** | sparks, weldingSparks, dust, waterSplash, bloodSplash |
| **ç¯å¢ƒ** | fallingLeaves, fireflies, confetti |

**å¤åˆæ•ˆæœ:**
- createFireWithSparks() - ç«ç„° + ç«æ˜Ÿ
- createExplosion() - çˆ†ç‚¸ + çƒŸé›¾
- createMagicOrb() - æ ¸å¿ƒ + ç¯ç»•ç²’å­
- createPortal() - ç¯å½¢ + æ¼©æ¶¡

### 16.5 ç¼–è¾‘å™¨ UI (`engine/ui/editor_ui.h`)

**ParticleEditorState:**
- selectedSystem, selectedEmitterIndex
- previewPlaying, previewSpeed

**drawParticleEditorPanel:**
- ç³»ç»Ÿåˆ—è¡¨ (åˆ›å»º/åˆ é™¤/é‡å‘½å)
- ä»é¢„è®¾åˆ›å»º
- é¢„è§ˆæ§åˆ¶ (Play/Pause/Restart/Stop)
- å‘å°„å™¨ Tab åˆ‡æ¢
- å±æ€§ç¼–è¾‘:
  - Emission (rate, max, looping, bursts)
  - Shape (type, parameters)
  - Lifetime
  - Velocity (speed, gravity, drag)
  - Size (start/end)
  - Color (start/end, gradient)
  - Rotation
  - Rendering (billboard, stretch, sort, texture sheet)

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ Particle Editor

### 16.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- æ·»åŠ  ParticleEditorState å®ä¾‹å˜é‡
- æ¯å¸§è°ƒç”¨ ParticleManager::update()
- ç»˜åˆ¶ drawParticleEditorPanel()

---

## Phase 17: ç‰©ç†ç³»ç»Ÿ âœ…

### 17.1 æ ¸å¿ƒæ•°æ®ç»“æ„ (`engine/physics/physics_world.h`)

**PhysicsWorld:**
- åˆšä½“ç®¡ç† (createBody/destroyBody)
- å›ºå®šæ—¶é—´æ­¥è¿› (step/fixedStep)
- é‡åŠ›å’Œå…¨å±€è®¾ç½® (PhysicsSettings)
- ç¢°æ’å›è°ƒ (CollisionCallback, TriggerCallback)
- æŸ¥è¯¢æ¥å£ (raycast, queryAABB, querySphere)

**RigidBody:**
- ç±»å‹: Static, Dynamic, Kinematic
- è´¨é‡å’Œæƒ¯æ€§å¼ é‡
- ä½ç½®/æ—‹è½¬/é€Ÿåº¦
- åŠ›/æ‰­çŸ©/å†²é‡
- æè´¨ (restitution, friction)
- é˜»å°¼ (linear/angular damping)
- ä¼‘çœ ç³»ç»Ÿ

**Collider:**
- å½¢çŠ¶ç±»å‹: Sphere, Box, Capsule, Plane, Mesh, Compound
- æœ¬åœ°åç§»å’Œæ—‹è½¬
- è§¦å‘å™¨æ¨¡å¼
- ç¢°æ’å±‚å’Œè’™ç‰ˆ

**AABB:**
- è¾¹ç•Œç›’ç»“æ„
- expand/intersects/contains

### 17.2 ç¢°æ’æ£€æµ‹ (`engine/physics/collision.h`)

**Broadphase:**
- AABB ç›¸äº¤æµ‹è¯•
- ç¢°æ’å¯¹ç”Ÿæˆ (broadphasePairs)

**Narrowphase:**
- Sphere vs Sphere
- Sphere vs Box
- Sphere vs Plane
- Box vs Box (SAT)
- Box vs Plane
- Capsule vs Sphere

**SAT è¾…åŠ©:**
- projectOntoAxis
- axisOverlap

**GJK æ”¯æŒå‡½æ•°:**
- supportSphere
- supportBox

### 17.3 ç¢°æ’å“åº”

**å†²é‡æ±‚è§£:**
- ç›¸å¯¹é€Ÿåº¦è®¡ç®—
- å¼¹æ€§ç³»æ•° (restitution)
- æ³•å‘å†²é‡
- æ‘©æ“¦å†²é‡ (Coulomb friction)

**ä½ç½®æ ¡æ­£:**
- ç©¿é€æ·±åº¦æ ¡æ­£
- Baumgarte stabilization

**è¿­ä»£æ±‚è§£:**
- velocityIterations (é»˜è®¤ 8)
- positionIterations (é»˜è®¤ 3)

### 17.4 çº¦æŸç³»ç»Ÿ (`engine/physics/constraints.h`)

| çº¦æŸç±»å‹ | åŠŸèƒ½ |
|----------|------|
| DistanceConstraint | å›ºå®šè·ç¦» (ç»³ç´¢) |
| BallSocketConstraint | çƒçªå…³èŠ‚ (3DOF) |
| HingeConstraint | é“°é“¾å…³èŠ‚ (1DOF) + é™åˆ¶ + ç”µæœº |
| SliderConstraint | æ»‘å—å…³èŠ‚ (1DOF) + é™åˆ¶ |
| FixedConstraint | ç„Šæ¥çº¦æŸ (0DOF) |
| SpringConstraint | å¼¹ç°§ (stiffness/damping) |

**ConstraintManager:**
- çº¦æŸåˆ›å»º/é”€æ¯
- æ¯å¸§æ±‚è§£
- æ–­è£‚æ£€æµ‹ (breakForce)

### 17.5 ç¼–è¾‘å™¨ UI (`engine/ui/editor_ui.h`)

**PhysicsEditorState:**
- selectedBody, selectedConstraint
- è°ƒè¯•å¯è§†åŒ–é€‰é¡¹
- æ¨¡æ‹Ÿæ§åˆ¶ (pause/step/reset)

**drawPhysicsEditorPanel:**
- æ¨¡æ‹Ÿæ§åˆ¶ (Pause/Resume/Step/Reset)
- æ—¶é—´ç¼©æ”¾
- ä¸–ç•Œè®¾ç½® (é‡åŠ›/è¿­ä»£æ¬¡æ•°/ä¼‘çœ )
- è°ƒè¯•å¯è§†åŒ–å¼€å…³
- åˆšä½“åˆ›å»º (ç±»å‹/å½¢çŠ¶é€‰æ‹©)
- åˆšä½“åˆ—è¡¨ (é€‰æ‹©/æ£€æŸ¥)
- åˆšä½“å±æ€§ç¼–è¾‘ (è´¨é‡/é€Ÿåº¦/æè´¨/é˜»å°¼)
- ç¢°æ’å™¨ç¼–è¾‘ (å¤§å°/è§¦å‘å™¨)
- çº¦æŸåˆ›å»ºå’Œç®¡ç†

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ Physics Editor

### 17.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- PhysicsEditorState å®ä¾‹å˜é‡
- æ¯å¸§è°ƒç”¨ PhysicsWorld::step()
- æ¯å¸§è°ƒç”¨ ConstraintManager::solveConstraints()
- ç»˜åˆ¶ drawPhysicsEditorPanel()

### 17.7 è°ƒè¯•æ¸²æŸ“ (`engine/physics/physics_debug.h`) âœ…

**PhysicsDebugRenderer:**
- ç¢°æ’å™¨å¯è§†åŒ– (Sphere/Box/Capsule/Plane)
- é¢œè‰²ç¼–ç  (Static=ç°, Dynamic=ç»¿, Kinematic=è“, Sleeping=ç´«, Trigger=é»„)
- AABB è¾¹ç•Œæ¡†æ˜¾ç¤º
- æ¥è§¦ç‚¹å’Œæ³•å‘é‡æ˜¾ç¤º
- çº¦æŸè¿æ¥çº¿å’Œé”šç‚¹æ˜¾ç¤º
- å¼¹ç°§å·æ›²å¯è§†åŒ–
- çº¿æ€§/è§’é€Ÿåº¦çŸ¢é‡æ˜¾ç¤º

**DebugColors:**
- StaticCollider, DynamicCollider, KinematicCollider
- SleepingCollider, TriggerCollider
- AABB, ContactPoint, ContactNormal
- LinearVelocity, AngularVelocity
- ConstraintOK, ConstraintStressed, ConstraintBroken

### 17.8 ç²¾ç¡®å°„çº¿æ£€æµ‹ (`engine/physics/raycast.h`) âœ…

**Ray ç»“æ„:**
- origin, direction (å½’ä¸€åŒ–)
- getPoint(t) è·å–å°„çº¿ä¸Šç‚¹

**RaycastHit ç»“æœ:**
- hit, distance, point, normal
- body, collider å¼•ç”¨

**ç²¾ç¡®å½¢çŠ¶å°„çº¿æ£€æµ‹:**
| å½¢çŠ¶ | ç®—æ³• |
|------|------|
| Sphere | äºŒæ¬¡æ–¹ç¨‹æ±‚è§£ |
| Box (OBB) | æœ¬åœ°ç©ºé—´ AABB slab æµ‹è¯• |
| Capsule | åœ†æŸ± + ä¸¤ç«¯åŠçƒç»„åˆ |
| Plane | å¹³é¢æ–¹ç¨‹æ±‚è§£ |

**é«˜çº§æŸ¥è¯¢:**
- `raycast()` - å•å°„çº¿æœ€è¿‘å‘½ä¸­
- `raycastAll()` - è¿”å›æ‰€æœ‰å‘½ä¸­
- `sphereCast()` - çƒä½“æ‰«æ 
- `boxCast()` - ç›’å­æ‰«æ 

**ä¾¿æ·å‡½æ•°:**
- `physicsRaycast(origin, direction, maxDistance, layerMask)`
- `physicsRaycastAll(...)`
- `physicsSphereCast(...)`

**UI é›†æˆ:**
- å°„çº¿æµ‹è¯•é¢æ¿ (åŸç‚¹/æ–¹å‘/è·ç¦»)
- å‘½ä¸­ç»“æœæ˜¾ç¤º (è·ç¦»/ç‚¹/æ³•çº¿/åˆšä½“ID)
- å°„çº¿å¯è§†åŒ– (çº¢=å‘½ä¸­, ç°=æœªå‘½ä¸­)
- å‘½ä¸­ç‚¹æ ‡è®°å’Œæ³•å‘é‡æ˜¾ç¤º

---

## Phase 18: åœ°å½¢ç³»ç»Ÿ âœ…

### 18.1 åœ°å½¢æ ¸å¿ƒ (`engine/terrain/terrain.h`)

**Heightmap:**
- å®½åº¦/é«˜åº¦ã€æ•°æ®å­˜å‚¨
- `getHeight(x, y)`, `setHeight(x, y, h)`
- `sampleBilinear(u, v)` - åŒçº¿æ€§æ’å€¼
- `getNormal(x, y)` - æ³•çº¿è®¡ç®—
- `normalize()` - å½’ä¸€åŒ–

**Splatmap:**
- 4 å±‚çº¹ç†æƒé‡ (MAX_LAYERS = 4)
- `getWeight/setWeight(layer, x, y)`
- `normalizeAt(x, y)` - æƒé‡å½’ä¸€åŒ–

**TerrainLayer:**
- name, diffuseTexture, normalTexture
- tint, metallic, roughness, tileScale
- é«˜åº¦æ··åˆ (minHeight, maxHeight, blendSharpness)
- å¡åº¦æ··åˆ (minSlope, maxSlope)

**TerrainChunk:**
- åˆ†å—ç®¡ç† (chunkX, chunkZ)
- LOD çº§åˆ«æ§åˆ¶
- `generateMesh()` - ä»é«˜åº¦å›¾ç”Ÿæˆç½‘æ ¼
- TerrainMeshData (vertices, indices)

**Terrain:**
- TerrainSettings (åˆ†è¾¨ç‡ã€å¤§å°ã€é«˜åº¦ç¼©æ”¾)
- `getHeightAt(worldX, worldZ)` - ä¸–ç•Œåæ ‡æŸ¥è¯¢
- `getNormalAt(worldX, worldZ)`
- `updateLOD(cameraPos)` - LOD æ›´æ–°
- `autoGenerateSplatmap()` - è‡ªåŠ¨æè´¨åˆ†é…

### 18.2 åœ°å½¢ç”Ÿæˆ (`engine/terrain/terrain_generator.h`)

**PerlinNoise:**
- 2D/3D Perlin å™ªå£°å®ç°
- fade/lerp/grad è¾…åŠ©å‡½æ•°
- 512 å…ƒç´ ç½®æ¢è¡¨

**FractalNoiseSettings:**
- octaves, frequency, amplitude
- lacunarity, persistence
- exponent, ridged, ridgeOffset

**FractalNoise:**
- å¤šå€é¢‘å åŠ 
- è„ŠçŠ¶å™ªå£°æ”¯æŒ
- æŒ‡æ•°æ›²çº¿æ˜ å°„

**HydraulicErosion:**
- æ°´æ»´ä¾µèš€æ¨¡æ‹Ÿ
- ErosionSettings (iterations, lifetime, inertia ç­‰)
- æ²‰ç§¯/ä¾µèš€åˆ·
- é«˜åº¦æ¢¯åº¦è®¡ç®—

**é¢„è®¾:**
| é¢„è®¾ | ç‰¹ç‚¹ |
|------|------|
| Flat | å¹³å¦ã€ä½æŒ¯å¹… |
| Hills | èµ·ä¼ä¸˜é™µ |
| Mountains | é«˜å±±ã€è„ŠçŠ¶å™ªå£° |
| Islands | å²›å±¿ã€æŒ‡æ•°è¡°å‡ |
| Canyon | å³¡è°·ã€ä½æŒ‡æ•° |

### 18.3 æ¤è¢«ç³»ç»Ÿ (`engine/terrain/foliage.h`)

**FoliageInstance:**
- position, rotation, scale
- color (è‰²å½©å˜åŒ–)
- windPhase (é£åŠ¨ç”»ç›¸ä½)

**FoliageLayerSettings:**
- density, densityVariation
- minScale, maxScale, rotation
- baseColor, colorVariation
- é«˜åº¦/å¡åº¦/å›¾å±‚çº¦æŸ
- LOD è·ç¦»ã€å‰”é™¤è·ç¦»
- é£å¼ºåº¦/é¢‘ç‡
- å…¬å‘Šæ¿/ç½‘æ ¼æ¨¡å¼

**FoliagePatch:**
- åˆ†å—å®ä¾‹ç®¡ç†
- LOD çº§åˆ«
- å¯è§æ€§å‰”é™¤

**FoliageLayer:**
- `generateInstances()` - æ ¹æ®åœ°å½¢ç”Ÿæˆå®ä¾‹
- `updateLOD()` - åŸºäºç›¸æœºæ›´æ–°

**FoliageSystem:**
- å¤šå›¾å±‚ç®¡ç†
- `generateAll()`, `updateLOD()`

**é¢„è®¾:**
| é¢„è®¾ | å¯†åº¦ | ç‰¹ç‚¹ |
|------|------|------|
| Grass | 20/mÂ² | åŸºç¡€è‰åœ° |
| TallGrass | 5/mÂ² | é«˜è‰ |
| Flowers | 2/mÂ² | èŠ±æœµã€é¢œè‰²å˜åŒ–å¤§ |
| Rocks | 0.5/mÂ² | å²©çŸ³ã€å¡åº¦åŒºåŸŸ |
| Trees | 0.1/mÂ² | æ ‘æœ¨ã€å¤§å‰”é™¤è·ç¦» |

### 18.4 åœ°å½¢ç¼–è¾‘å™¨ UI

**TerrainEditorState:**
- noiseSettings, erosionSettings
- seed, presets
- brushMode/Radius/Strength
- selectedFoliageLayer

**drawTerrainEditorPanel:**
- ç”Ÿæˆè®¾ç½® (é¢„è®¾/å™ªå£°å‚æ•°/ä¾µèš€)
- åœ°å½¢è®¾ç½® (åˆ†è¾¨ç‡/å¤§å°/é«˜åº¦)
- æè´¨å›¾å±‚ç¼–è¾‘
- æ¤è¢«å›¾å±‚ç®¡ç†
- ç¬”åˆ·å·¥å…· (æŠ¬å‡/é™ä½/å¹³æ»‘/å±•å¹³/ç»˜åˆ¶)

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ Terrain Editor

### 18.5 åº”ç”¨é›†æˆ (`LumaView.mm`)

- TerrainEditorState å®ä¾‹å˜é‡
- æ¯å¸§è°ƒç”¨ Terrain::updateLOD()
- æ¯å¸§è°ƒç”¨ FoliageSystem::updateLOD()
- ç»˜åˆ¶ drawTerrainEditorPanel()

---

## Phase 19: éŸ³é¢‘ç³»ç»Ÿ âœ…

### 19.1 éŸ³é¢‘æ ¸å¿ƒ (`engine/audio/audio.h`)

**AudioFormat:**
- Mono8, Mono16, Stereo8, Stereo16
- MonoFloat, StereoFloat

**AudioClip:**
- name, data, sampleRate, channels, bitsPerSample
- `getDuration()` - è·å–æ—¶é•¿
- `loadFromMemory()` - ä»å†…å­˜åŠ è½½
- `generateSineWave()` - ç”Ÿæˆæ­£å¼¦æ³¢æµ‹è¯•éŸ³
- `generateWhiteNoise()` - ç”Ÿæˆç™½å™ªå£°

**AudioSourceSettings:**
- æ’­æ”¾: volume, pitch, loop, playOnAwake, priority
- 3D: spatialize, minDistance, maxDistance
- è¡°å‡: rolloff (Linear/Logarithmic/Custom), rolloffFactor
- å¤šæ™®å‹’: dopplerLevel
- ç©ºé—´: spread, reverbZoneMix

**AudioSource:**
- `setClip()`, `setPosition()`, `setVelocity()`
- `play()`, `pause()`, `unpause()`, `stop()`
- `getState()`, `getTime()`, `setTime()`
- computedVolume, computedPanL/R (3D è®¡ç®—ç»“æœ)

**AudioListener:**
- position, velocity
- forward, up (æ–¹å‘å‘é‡)
- `getRight()` - è®¡ç®—å³å‘é‡
- volume (ç›‘å¬å™¨éŸ³é‡)

### 19.2 3D ç©ºé—´éŸ³é¢‘

**è·ç¦»è¡°å‡:**
- Linear: `1 - (d - minDist) / (maxDist - minDist)`
- Logarithmic: `minDist / (minDist + factor * (d - minDist))`

**ç«‹ä½“å£°å¹³ç§»:**
- è®¡ç®—å£°æºç›¸å¯¹ç›‘å¬å™¨æ–¹å‘
- ä¸ right å‘é‡ç‚¹ç§¯å¾—åˆ°å·¦å³å¹³è¡¡
- Constant power panning (ç­‰åŠŸç‡å¹³ç§»)

**å¤šæ™®å‹’æ•ˆåº”:**
- `shift = (c + vL) / (c + vS)`
- c = 343 m/s (å£°é€Ÿ)
- é™åˆ¶èŒƒå›´ 0.5 - 2.0

### 19.3 éŸ³é¢‘æ··åˆå™¨

**AudioMixerGroup:**
- name, volume, mute, solo
- parentIndex (å±‚çº§å…³ç³»)
- æ•ˆæœ: lowPassEnabled, lowPassCutoff, reverbEnabled, reverbMix

**AudioMixer:**
- é¢„è®¾ç»„: Master, Music, SFX, Ambient, UI
- `addGroup()`, `getGroup()`, `getGroupByName()`
- `getEffectiveVolume()` - è®¡ç®—ç»§æ‰¿åçš„éŸ³é‡

### 19.4 éŸ³é¢‘ç³»ç»Ÿ (AudioSystem)

**åˆå§‹åŒ–:**
- `initialize(sampleRate, channels, bufferSize)`
- é»˜è®¤: 44100Hz, 2 channels, 4096 samples

**èµ„æºç®¡ç†:**
- `createClip()`, `getClip()`
- `createSource()`, `destroySource()`

**å…¨å±€æ§åˆ¶:**
- masterVolume, muted
- `pauseAll()`, `unpauseAll()`, `stopAll()`

**æ›´æ–°:**
- `update(dt)` - æ›´æ–°æ‰€æœ‰ 3D è®¡ç®—
- `mixAudio(buffer, frameCount)` - éŸ³é¢‘æ··åˆå›è°ƒ

**ä¾¿æ·å‡½æ•°:**
- `playOneShot(clip, position, volume)` - ä¸€æ¬¡æ€§æ’­æ”¾

### 19.5 éŸ³é¢‘ç¼–è¾‘å™¨ UI

**AudioEditorState:**
- selectedSourceIndex, selectedClipIndex, selectedMixerGroup
- testToneFrequency, testToneDuration
- showSourceGizmos, showListenerGizmo

**drawAudioEditorPanel:**
- ä¸»æ§åˆ¶ (Master Volume, Mute, Stop All)
- ç›‘å¬å™¨è®¾ç½® (ä½ç½®/æ–¹å‘/éŸ³é‡)
- æ··åˆå™¨é¢æ¿ (åˆ†ç»„/éŸ³é‡/Mute/Solo/æ•ˆæœ)
- éŸ³æºåˆ—è¡¨ (åˆ›å»º/é€‰æ‹©/åˆ é™¤)
- éŸ³æºè¯¦æƒ… (æ’­æ”¾æ§åˆ¶/è®¾ç½®/3D å‚æ•°)
- æµ‹è¯•éŸ³ç”Ÿæˆ (æ­£å¼¦æ³¢/ç™½å™ªå£°/ä½ç½®æ’­æ”¾)

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ Audio Editor

### 19.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- AudioEditorState å®ä¾‹å˜é‡
- æ¯å¸§è°ƒç”¨ AudioSystem::update(dt)
- ç»˜åˆ¶ drawAudioEditorPanel()

---

## Phase 20: å…¨å±€å…‰ç…§ç³»ç»Ÿ âœ…

### 20.1 çƒè°å‡½æ•° (`engine/renderer/gi/spherical_harmonics.h`)

**SHConstants:**
- L2 çƒè°å‡½æ•°å¸¸æ•° (9 ç³»æ•°)
- kC0-kC4: å½’ä¸€åŒ–å¸¸æ•°
- kA0-kA2: è¾ç…§åº¦è½¬æ¢å¸¸æ•°
- kIrr*: é¢„è®¡ç®—è¾ç…§åº¦ç³»æ•°

**SHCoefficients:**
- 9 ä¸ª RGB ç³»æ•°å­˜å‚¨
- `addSample(direction, radiance)` - æ·»åŠ è¾å°„æ ·æœ¬
- `scale(s)`, `add(other)`, `lerp(a, b, t)`
- `evaluateIrradiance(normal)` - è®¡ç®—æ³•å‘è¾ç…§åº¦
- `evaluateBasis(dir, basis)` - è®¡ç®—åŸºå‡½æ•°
- é™æ€æ„é€ : `fromDirectionalLight()`, `fromAmbient()`, `fromSkyGradient()`

**SHSampleGenerator:**
- `generateSamples(count)` - çƒé¢æ–æ³¢é‚£å¥‘å‡åŒ€åˆ†å¸ƒ
- è¿”å›æ–¹å‘ã€åŸºå‡½æ•°ã€ç«‹ä½“è§’

**SHGPUData:**
- GPU å¯¹é½æ•°æ®æ ¼å¼ (4-float padding)
- `fromSHCoefficients()` - è½¬æ¢ä¸º GPU æ ¼å¼

### 20.2 å…‰ç…§æ¢é’ˆ (`engine/renderer/gi/light_probe.h`)

**LightProbe:**
- position, SHCoefficients
- `evaluateIrradiance(normal)` - æŸ¥è¯¢è¾ç…§åº¦
- dirty/valid çŠ¶æ€æ ‡è®°

**LightProbeGroup:**
- éè§„åˆ™æ¢é’ˆç»„ç®¡ç†
- `addProbe()`, `removeProbe()`, `clear()`
- `findNearestProbes(position, maxCount)` - æœ€è¿‘æ¢é’ˆæŸ¥æ‰¾
- é€†è·ç¦»åŠ æƒ (IDW) æ’å€¼
- `interpolateSH(position)` - SH æ’å€¼

**LightProbeGrid:**
- è§„åˆ™ 3D ç½‘æ ¼æ¢é’ˆå­˜å‚¨
- `initialize(min, max, resX, resY, resZ)`
- `getProbe(x, y, z)`, `getCell(pos)`
- `sampleSH(position)` - ä¸‰çº¿æ€§æ’å€¼

### 20.3 åå°„æ¢é’ˆ (`engine/renderer/gi/reflection_probe.h`)

**ReflectionProbeSettings:**
- resolution, mipLevels, hdr
- nearClip, farClip, layerMask
- realtime/baked, refreshRate
- boxProjection, blendDistance

**ReflectionProbe:**
- name, position
- shape: Box/Sphere
- boxSize, boxOffset / sphereRadius
- influenceRadius, priority, intensity
- `containsPoint()`, `calculateBlendWeight()`
- `boxProjectReflection()` - è§†å·®æ ¡æ­£
- gpuCubemapHandle

**ReflectionProbeManager:**
- é¢„åˆ›å»º Skybox æ¢é’ˆ (æœ€ä½ä¼˜å…ˆçº§)
- `createProbe()`, `removeProbe()`
- `findProbesForPoint(position, maxCount)` - æŒ‰ä¼˜å…ˆçº§æ’åº
- `getDirtyProbes()`, `markAllDirty()`

### 20.4 GI ç³»ç»Ÿ (`engine/renderer/gi/gi_system.h`)

**GISettings:**
- lightProbes/reflectionProbes å¯ç”¨å¼€å…³
- ambientSkyColor, ambientGroundColor, ambientIntensity
- bounces, raysPerSample, rayLength (çƒ˜ç„™)

**GISystem:**
- `initializeLightProbeGrid()` - åˆå§‹åŒ–æ¢é’ˆç½‘æ ¼
- `addLightProbeGroup()` - æ·»åŠ æ¢é’ˆç»„
- `sampleIndirectDiffuse(position, normal)` - é‡‡æ ·é—´æ¥å…‰
- `getAmbientSH()` - è·å–ç¯å¢ƒ SH

**çƒ˜ç„™ç³»ç»Ÿ:**
- LightInfo (Directional/Point/Spot)
- RayTraceCallback - è‡ªå®šä¹‰å°„çº¿è¿½è¸ª
- `bakeLightProbe()` - çƒ˜ç„™å•ä¸ªæ¢é’ˆ
- `bakeAllLightProbes()` - çƒ˜ç„™ç½‘æ ¼
- `bakeAllLightProbeGroups()` - çƒ˜ç„™æ‰€æœ‰ç»„
- åŠçƒä½™å¼¦é‡‡æ ·ã€å¤šæ¬¡å¼¹å°„

**GPU æ•°æ®å¯¼å‡º:**
- GPUProbeData ç»“æ„
- `exportGPUData()` - å¯¼å‡ºæ‰€æœ‰æ¢é’ˆ SH

### 20.5 GI ç¼–è¾‘å™¨ UI

**GIEditorState:**
- gridMin/Max, gridResolution
- bakeProgress/Total
- selectedLightProbeGroup, selectedReflectionProbe
- visualization é€‰é¡¹

**drawGIEditorPanel:**
- GI è®¾ç½® (å¼€å…³/å¼ºåº¦/ç¯å¢ƒè‰²)
- å…‰ç…§æ¢é’ˆç½‘æ ¼ (åˆå§‹åŒ–/åˆ†è¾¨ç‡)
- å…‰ç…§æ¢é’ˆç»„ (æ·»åŠ /ç®¡ç†)
- åå°„æ¢é’ˆåˆ—è¡¨ (åˆ›å»º/é€‰æ‹©)
- åå°„æ¢é’ˆè¯¦æƒ… (ä½ç½®/å½¢çŠ¶/ä¼˜å…ˆçº§/åˆ†è¾¨ç‡)
- çƒ˜ç„™æ§åˆ¶ (å‚æ•°/è¿›åº¦/æ‰§è¡Œ)
- é¢„è§ˆ (ä½ç½®/æ³•çº¿/è¾ç…§åº¦)
- å¯è§†åŒ–é€‰é¡¹

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ GI Editor

### 20.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- GIEditorState å®ä¾‹å˜é‡
- ç»˜åˆ¶ drawGIEditorPanel()

---

## Phase 21: è§†é¢‘å¯¼å‡ºç³»ç»Ÿ âœ…

### 21.1 æ ¸å¿ƒç»“æ„ (`engine/video/video_export.h`)

**VideoFormat:**
- MP4_H264, MP4_H265, WebM_VP9, AVI_MJPEG
- GIF
- ImageSequence_PNG/JPG/TGA

**VideoQuality:**
- Low, Medium, High, Lossless

**FrameData:**
- pixels (RGBA/RGB), width, height, channels
- `convertToRGB()`, `flipVertical()`

**VideoExportSettings:**
- è¾“å‡º: path, format, quality
- åˆ†è¾¨ç‡: width, height, matchViewport
- æ—¶é—´çº¿: frameRate, startTime, endTime
- ç¼–ç : bitrate, keyframeInterval

### 21.2 ç¼–ç å™¨

**IVideoEncoder æ¥å£:**
- `initialize()`, `encodeFrame()`, `finalize()`
- `getProgress()`, `getError()`

**ImageSequenceEncoder:**
- TGA å†™å…¥ (BGR/BGRA)
- PNG å ä½ (é™çº§åˆ° TGA)

**FFmpegEncoder:**
- ç®¡é“åˆ° FFmpeg è¿›ç¨‹
- è‡ªåŠ¨æ„å»ºå‘½ä»¤è¡Œå‚æ•°
- æ”¯æŒå¤šç§ç¼–è§£ç å™¨

**GIFEncoder:**
- GIF89a æ ¼å¼
- Netscape å¾ªç¯æ‰©å±•
- ç®€åŒ– LZW (ç°åº¦)

### 21.3 å½•åˆ¶ç®¡ç†å™¨

**RecordingState:**
- Idle, Preparing, Recording, Paused, Finalizing, Complete, Error

**RecordingManager:**
- `startRecording()`, `stopRecording()`
- `pauseRecording()`, `resumeRecording()`
- `captureFrame()` - æ¸²æŸ“å¾ªç¯ä¸­è°ƒç”¨
- è¿›åº¦/å®Œæˆå›è°ƒ
- ä¼°ç®—æ–‡ä»¶å¤§å°å’Œå‰©ä½™æ—¶é—´

### 21.4 ç¼–è¾‘å™¨ UI

**VideoExportState:**
- settings, formatIndex, qualityIndex
- resolutionPreset
- recordStartTime, avgFrameTime

**drawVideoExportPanel:**
- è¾“å‡ºè®¾ç½® (æ ¼å¼/è´¨é‡/è·¯å¾„)
- åˆ†è¾¨ç‡ (é¢„è®¾/è‡ªå®šä¹‰)
- æ—¶é—´çº¿ (å¸§ç‡/èµ·æ­¢æ—¶é—´)
- é«˜çº§é€‰é¡¹ (ç ç‡/å…³é”®å¸§)
- å½•åˆ¶æ§åˆ¶ (å¼€å§‹/æš‚åœ/åœæ­¢)
- è¿›åº¦æ¡å’ŒçŠ¶æ€æ˜¾ç¤º

---

## Phase 22: ç½‘ç»œç³»ç»Ÿ âœ…

### 22.1 æ ¸å¿ƒç»“æ„ (`engine/network/network.h`)

**NetworkRole:**
- None, Client, Server, Host

**NetworkMessageType:**
- Connect/Disconnect/Heartbeat
- StateUpdate/StateFull/StateRequest
- RPC/RPCResponse
- EntitySpawn/Destroy/Ownership
- ScriptRPC/ScriptStateSync

**NetworkMessage:**
- å†™å…¥: `writeByte/UInt16/UInt32/Float/String/Vec3/Bytes`
- è¯»å–: `readByte/UInt16/UInt32/Float/String/Vec3/Bytes`
- `serialize()`, `deserialize()`

### 22.2 è¿æ¥ç®¡ç†

**NetworkConnection:**
- id, state, address, port
- lastHeartbeat, roundTripTime
- bytesSent/Received, packetsç»Ÿè®¡
- username, userId

**ConnectionState:**
- Disconnected, Connecting, Connected, Disconnecting

### 22.3 RPC ç³»ç»Ÿ

**RPCDefinition:**
- name, id
- serverOnly, clientOnly, requiresOwnership
- Handler å›è°ƒ

**NetworkPeer åŸºç±»:**
- `send()`, `broadcast()`
- `registerRPC()`, `callRPC()`
- æ¶ˆæ¯å¤„ç†å™¨æ³¨å†Œ
- è¿æ¥å›è°ƒ

### 22.4 æœåŠ¡å™¨/å®¢æˆ·ç«¯

**NetworkServer:**
- `start()`, `stop()`, `update()`
- `acceptConnection()`, `disconnectClient()`
- å¿ƒè·³å‘é€å’Œè¶…æ—¶æ£€æµ‹

**NetworkClient:**
- `start()`, `stop()`, `update()`
- `isConnected()`, `getConnectionState()`
- è‡ªåŠ¨è¿æ¥è¯·æ±‚

**NetworkManager (å•ä¾‹):**
- `startServer()`, `startClient()`, `startHost()`
- `isServer()`, `isClient()`, `isHost()`
- ä¾¿æ· RPC è°ƒç”¨

---

## Phase 23: Lua è„šæœ¬ç³»ç»Ÿ âœ…

### 23.1 è„šæœ¬å€¼ (`engine/script/script_engine.h`)

**ScriptValueType:**
- Nil, Boolean, Number, String
- Table, Function, UserData
- Vec3, Quat

**ScriptValue:**
- è”åˆä½“å­˜å‚¨å„ç±»å‹
- ç±»å‹æ£€æŸ¥: `isNil/Bool/Number/String/Table/Vec3/Quat`
- ç½‘ç»œåºåˆ—åŒ–: `serialize()`, `deserialize()`

### 23.2 è„šæœ¬å±æ€§å’Œ RPC

**ScriptProperty:**
- name, value
- networked (ç½‘ç»œåŒæ­¥)
- serverAuthority (æœåŠ¡å™¨æƒå¨)
- dirty (å·²ä¿®æ”¹æ ‡è®°)

**ScriptRPCDef:**
- name
- serverOnly, clientOnly, ownerOnly
- luaFuncRef (Lua å‡½æ•°å¼•ç”¨)

### 23.3 è„šæœ¬ç±»å’Œå®ä¾‹

**ScriptClass:**
- name, sourceFile, sourceCode
- properties[], rpcs[]
- Lua å›è°ƒå¼•ç”¨: onStart, onUpdate, onDestroy
- ç½‘ç»œå›è°ƒ: onNetworkSpawn, onNetworkDespawn

**ScriptInstance:**
- scriptClass, entityId
- networkId, ownerConnection
- propertyValues
- instanceRef (Lua è¡¨å¼•ç”¨)
- `hasAuthority()` - æƒå¨æ€§æ£€æŸ¥

### 23.4 è„šæœ¬å¼•æ“

**ScriptEngine:**
- `initialize()`, `shutdown()`
- `loadScript()`, `loadScriptString()`
- `registerClass()`, `getClass()`
- `createInstance()`, `destroyInstance()`
- `update(dt)` - è°ƒç”¨æ‰€æœ‰å®ä¾‹çš„ onUpdate

**å‡½æ•°è°ƒç”¨:**
- `callFunction(name, args, results)`
- `callMethod(instance, method, args, results)`

**ç½‘ç»œé›†æˆ:**
- `setNetworkEnabled()`
- `callRPC()` - å‘é€ç½‘ç»œ RPC
- `handleNetworkRPC()` - å¤„ç†ä¼ å…¥ RPC
- `syncNetworkedProperties()` - åŒæ­¥å±æ€§

**API ç»‘å®š:**
- `bindVec3()`, `bindQuat()`
- `bindInput()`, `bindEntity()`
- `bindNetwork()`, `bindDebug()`

### 23.5 ç½‘ç»œ+è„šæœ¬æ•´åˆè®¾è®¡

```lua
-- ç¤ºä¾‹è„šæœ¬
PlayerController = {
    -- ç½‘ç»œåŒæ­¥å±æ€§
    networked = {
        health = { default = 100, authority = "server" },
        position = { default = Vec3(0,0,0), authority = "owner" }
    },
    
    -- æœåŠ¡ç«¯ RPC
    ServerRPC = {
        takeDamage = function(self, amount)
            self.health = self.health - amount
        end
    },
    
    -- å®¢æˆ·ç«¯ RPC
    ClientRPC = {
        playEffect = function(self, effectName)
            -- æ’­æ”¾ç‰¹æ•ˆ
        end
    },
    
    onUpdate = function(self, dt)
        if Network.hasAuthority(self) then
            -- åªæœ‰æƒå¨è€…æ›´æ–°
        end
    end
}
```

### 23.6 ç¼–è¾‘å™¨ UI

**NetworkPanelState:**
- serverAddress, serverPort
- selectedConnection, showStats

**drawNetworkPanel:**
- è§’è‰²çŠ¶æ€æ˜¾ç¤º
- è¿æ¥è®¾ç½® (åœ°å€/ç«¯å£)
- å¯åŠ¨æŒ‰é’® (Server/Host/Client)
- æœåŠ¡å™¨: å®¢æˆ·ç«¯åˆ—è¡¨ã€è¸¢äºº
- å®¢æˆ·ç«¯: è¿æ¥çŠ¶æ€ã€RTT

**ScriptEditorState:**
- selectedClass/Instance
- newClassName, codeBuffer
- consoleLog, consoleInput

**drawScriptEditorPanel:**
- è„šæœ¬ç±»åˆ—è¡¨
- å±æ€§/RPC ç¼–è¾‘
- ç½‘ç»œé›†æˆå¼€å…³
- Lua æ§åˆ¶å°
- API å‚è€ƒ

### 23.7 åº”ç”¨é›†æˆ (`LumaView.mm`)

- NetworkPanelState, ScriptEditorState å®ä¾‹
- æ¯å¸§: NetworkManager::update(), ScriptEngine::update()
- ç»˜åˆ¶ Network å’Œ Script é¢æ¿

---

## Phase 24: AI/å¯»è·¯ç³»ç»Ÿ âœ…

### 24.1 NavMesh (`engine/ai/navmesh.h`)

**NavPoly:**
- indices[] (æœ€å¤š6é¡¶ç‚¹)
- neighbors[] (ç›¸é‚»å¤šè¾¹å½¢)
- center, normal, area
- flags, areaType

**NavEdge:**
- polyA, polyB
- start, end, width

**NavMeshBuildSettings:**
- Agent: height, radius, maxClimb, maxSlope
- Voxelization: cellSize, cellHeight
- Region: minArea, mergeArea
- Polygon: maxEdgeLen, maxSimplificationError

**NavMesh:**
- `build(vertices, indices)` - ä»å‡ ä½•ä½“æ„å»º
- `buildFromHeightmap()` - ä»é«˜åº¦å›¾æ„å»º
- `addPolygon()`, `connectPolygons()`
- `findNearestPoly()` - æ‰¾æœ€è¿‘å¤šè¾¹å½¢
- `getClosestPointOnPoly()` - å¤šè¾¹å½¢ä¸Šæœ€è¿‘ç‚¹
- `isPointInPoly()` - ç‚¹åœ¨å¤šè¾¹å½¢å†…æµ‹è¯•
- `raycast()` - å°„çº¿æ£€æµ‹

### 24.2 A* å¯»è·¯

**NavNode:**
- polyIndex, position
- gCost (èµ·ç‚¹ä»£ä»·), hCost (å¯å‘å¼)
- parentIndex, edgeIndex

**NavPath:**
- points[] (PathPoint)
- totalLength
- `getPositionAtDistance()` - æŒ‰è·ç¦»è·å–ä½ç½®

**NavPathfinder:**
- `findPath(start, end, outPath)` - A* æœç´¢
- `findPath(..., areaCosts)` - å¸¦åŒºåŸŸä»£ä»·
- `smoothPath()` - è·¯å¾„å¹³æ»‘ (è§†çº¿æ£€æµ‹)
- å¯å‘å¼: æ¬§å‡ é‡Œå¾—è·ç¦»
- æ”¯æŒè‡ªå®šä¹‰è¿­ä»£ä¸Šé™å’Œæƒé‡

### 24.3 NavAgent (`engine/ai/nav_agent.h`)

**NavAgentState:**
- Idle, Moving, Waiting, Stuck, Arrived

**NavAgentSettings:**
- speed, acceleration, angularSpeed
- stoppingDistance, radius, height
- avoidObstacles, avoidancePriority
- pathUpdateInterval, autoRepath

**NavAgent:**
- `setDestination()` - è®¾ç½®ç›®æ ‡
- `stop()`, `resume()` - æ§åˆ¶
- `update(dt, navMesh)` - æ¯å¸§æ›´æ–°
- `move(direction, dt)` - æ‰‹åŠ¨ç§»åŠ¨
- `getRemainingDistance()` - å‰©ä½™è·ç¦»
- å›è°ƒ: onPathComplete

**NavAgentManager:**
- `createAgent()`, `destroyAgent()`
- `update(dt, navMesh)` - æ›´æ–°æ‰€æœ‰Agent
- `getAgentById()`, `getAgentCount()`

### 24.4 è¡Œä¸ºæ ‘ (`engine/ai/behavior_tree.h`)

**BTStatus:**
- Invalid, Success, Failure, Running

**å¤åˆèŠ‚ç‚¹:**
| ç±»å‹ | è¯´æ˜ |
|------|------|
| Sequence | é¡ºåºæ‰§è¡Œï¼Œå¤±è´¥å³åœ |
| Selector | é€‰æ‹©æ‰§è¡Œï¼ŒæˆåŠŸå³åœ |
| Parallel | å¹¶è¡Œæ‰§è¡Œ |
| RandomSelector | éšæœºé€‰æ‹©å­èŠ‚ç‚¹ |

**è£…é¥°èŠ‚ç‚¹:**
| ç±»å‹ | è¯´æ˜ |
|------|------|
| Inverter | åè½¬ç»“æœ |
| Succeeder | æ€»æ˜¯æˆåŠŸ |
| Repeater | é‡å¤Næ¬¡/-1æ— é™ |
| Limiter | é™åˆ¶æ‰§è¡Œæ¬¡æ•° |

**å¶èŠ‚ç‚¹:**
| ç±»å‹ | è¯´æ˜ |
|------|------|
| Action | è‡ªå®šä¹‰å‡½æ•° |
| Condition | æ¡ä»¶æ£€æŸ¥ |
| Wait | ç­‰å¾…æ—¶é—´ |
| Log | è°ƒè¯•æ—¥å¿— |

**Blackboard:**
- `set<T>(key, value)`, `get<T>(key)`
- `has(key)`, `remove(key)`

**BTBuilder (Fluent API):**
```cpp
BTBuilder()
    .selector()
        .sequence("Attack")
            .condition(inRange("target", 2.0f))
            .action(attackTarget)
        .end()
        .sequence("Chase")
            .condition(hasTarget)
            .action(moveTo("target"))
        .end()
        .action(patrol)
    .end()
.build();
```

**é¢„å®šä¹‰åŠ¨ä½œ (BTActions):**
- `moveTo(targetKey)` - ç§»åŠ¨åˆ°ç›®æ ‡
- `inRange(targetKey, range)` - è·ç¦»æ£€æŸ¥
- `checkBool(key, expected)` - é»‘æ¿å€¼æ£€æŸ¥
- `setValue(key, value)` - è®¾ç½®é»‘æ¿å€¼

### 24.5 AI ç¼–è¾‘å™¨ UI

**AIEditorState:**
- navMeshSettings, navMeshBuilt
- selectedAgent, agentTestDestination
- pathStart/End, testPath

**drawAIEditorPanel:**
- NavMesh è®¾ç½®å’Œæ„å»º
- Agent åˆ—è¡¨å’Œè¯¦æƒ…
- è·¯å¾„æµ‹è¯• (èµ·ç‚¹/ç»ˆç‚¹/å¯è§†åŒ–)
- è¡Œä¸ºæ ‘å‚è€ƒ

**èœå•é›†æˆ:**
- Window â†’ Rendering â†’ AI Editor

### 24.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- AIEditorState å®ä¾‹
- æ¯å¸§: NavAgentManager::update(dt, navMesh)
- ç»˜åˆ¶ drawAIEditorPanel()

---

## Phase 25: æ¸¸æˆUIç³»ç»Ÿ âœ…

### 25.1 UI Core (`engine/game_ui/ui_core.h`)

**åŸºç¡€ç±»å‹:**
- UIRect (x, y, width, height, contains, intersects)
- UIColor (r, g, b, a, é¢„å®šä¹‰é¢œè‰²)
- UIMargin (left, right, top, bottom)
- UIPivot (x, y å½’ä¸€åŒ–)
- UIAnchor (9ç‚¹é”šå®š + Stretch)

**UIEvent:**
- PointerDown/Up/Move/Enter/Exit
- Click, DoubleClick
- DragStart/Drag/DragEnd
- Scroll, KeyDown/Up, TextInput
- Focus/Blur

**UIWidget:**
- ä½ç½®/å¤§å°/é”šç‚¹/æ¢è½´
- visible/enabled/interactive
- å±‚çº§ (addChild/removeChild/parent)
- äº‹ä»¶ç›‘å¬ (addEventListener, onClick, onHover)
- hitTest/hitTestRecursive
- updateLayout() è®¡ç®— worldRect

**UICanvas:**
- æ ¹å®¹å™¨, screenSize
- handleEvent() åˆ†å‘äº‹ä»¶
- ç„¦ç‚¹/æ‚¬åœ/æŒ‰ä¸‹çŠ¶æ€ç®¡ç†

### 25.2 UI Widgets (`engine/game_ui/ui_widgets.h`)

| æ§ä»¶ | ç‰¹æ€§ |
|------|------|
| **UIPanel** | èƒŒæ™¯è‰²ã€è¾¹æ¡†ã€åœ†è§’ |
| **UILabel** | æ–‡æœ¬ã€å­—ä½“ã€å¯¹é½ã€é˜´å½± |
| **UIImage** | çº¹ç†ã€UVã€9-sliceã€å¡«å……æ¨¡å¼ |
| **UIButton** | æ–‡æœ¬ã€å›¾æ ‡ã€çŠ¶æ€é¢œè‰²(Normal/Hover/Pressed/Disabled) |
| **UICheckbox** | checkedçŠ¶æ€ã€toggle() |
| **UISlider** | value/min/maxã€stepã€æ–¹å‘ |
| **UIProgressBar** | valueã€åŠ¨ç”»ã€æ˜¾ç¤ºç™¾åˆ†æ¯” |
| **UIInputField** | æ–‡æœ¬è¾“å…¥ã€placeholderã€å¯†ç æ¨¡å¼ã€maxLength |
| **UIDropdown** | é€‰é¡¹åˆ—è¡¨ã€å±•å¼€/æ”¶èµ· |
| **UIScrollView** | æ»šåŠ¨å†…å®¹ã€æƒ¯æ€§ã€æ»šåŠ¨æ¡ |
| **UIListView** | æ•°æ®åˆ—è¡¨ã€é€‰æ‹©ã€itemCreator |

### 25.3 UI Layout (`engine/game_ui/ui_layout.h`)

| å¸ƒå±€ | è¯´æ˜ |
|------|------|
| **UIHorizontalLayout** | æ°´å¹³æ’åˆ—, childAlign |
| **UIVerticalLayout** | å‚ç›´æ’åˆ—, childAlign |
| **UIGridLayout** | ç½‘æ ¼, columns, cellSize |
| **UIStackLayout** | å †å (é‡å ) |
| **UIFlowLayout** | æµå¼(è‡ªåŠ¨æ¢è¡Œ) |
| **UIAnchorLayout** | é”šç‚¹å¸ƒå±€ |

**é€šç”¨å±æ€§:**
- padding, spacing
- childAlign (Start/Center/End/Stretch)
- fitContent (è‡ªåŠ¨å°ºå¯¸)

### 25.4 UI System (`engine/game_ui/ui_system.h`)

**UIRenderCommand:**
- Rect, RoundedRect, Text, Image, Line, Clip

**IUIRenderer:**
- drawRect, drawRoundedRect, drawText, drawImage
- pushClip/popClip

**UIWidgetDrawer:**
- draw(widget) é€’å½’æ¸²æŸ“æ‰€æœ‰æ§ä»¶

**UISystem:**
- createCanvas/getCanvas/removeCanvas
- update(dt) æ›´æ–°æ‰€æœ‰ç”»å¸ƒ
- handleEvent() äº‹ä»¶åˆ†å‘
- render(renderer) æ¸²æŸ“æ‰€æœ‰ç”»å¸ƒ

**UIFactory:**
```cpp
auto panel = UIFactory::createPanel("MyPanel");
auto button = UIFactory::createButton("Click Me");
auto slider = UIFactory::createSlider();
auto vbox = UIFactory::createVBox();
```

### 25.5 Game UI ç¼–è¾‘å™¨

**GameUIEditorState:**
- selectedCanvas, selectedWidgetId
- widgetTypeToCreate
- showPreview, previewScale

**drawGameUIEditorPanel:**
- Canvas ç®¡ç† (åˆ›å»º/åˆ é™¤/å¯è§æ€§)
- Widget å±‚çº§æ ‘
- Widget åˆ›å»º (æ‰€æœ‰ç±»å‹)
- Widget å±æ€§ç¼–è¾‘ (ä½ç½®/å¤§å°/é”šç‚¹/é¢œè‰²)
- ç±»å‹ç‰¹å®šå±æ€§ (Labelæ–‡æœ¬, Buttoné¢œè‰², SliderèŒƒå›´ç­‰)

**èœå•å…¥å£:** Window â†’ Rendering â†’ Game UI Editor

### 25.6 åº”ç”¨é›†æˆ (`LumaView.mm`)

- GameUIEditorState å®ä¾‹
- æ¯å¸§: UISystem::update(dt)
- ç»˜åˆ¶ drawGameUIEditorPanel()

---

## Phase 26: åœºæ™¯ç®¡ç†ç³»ç»Ÿ âœ…

### 26.1 åœºæ™¯ç®¡ç† (`engine/scene/scene_manager.h`)

**SceneState:**
- Unloaded, Loading, Loaded, Active, Unloading

**SceneLoadMode:**
- Single (å¸è½½å…¶ä»–åœºæ™¯)
- Additive (ä¿ç•™ç°æœ‰åœºæ™¯)

**SceneObject:**
- id, name, prefabPath
- position, rotation, scale
- active, parentId
- componentData (åºåˆ—åŒ–æ•°æ®)

**SceneData:**
- å¯¹è±¡åˆ—è¡¨, ç¯å¢ƒè®¾ç½® (ambient, skybox)
- å…‰ç…§ (DirectionalLight)
- NavMeshå¼•ç”¨, ä¾èµ–èµ„æº

**SceneManager:**
- `loadScene(path, mode)` - åŒæ­¥åŠ è½½
- `loadSceneAsync(path, mode, callbacks)` - å¼‚æ­¥åŠ è½½
- `preloadScene(path)` - é¢„åŠ è½½
- `activatePreloadedScene(path)` - æ¿€æ´»é¢„åŠ è½½åœºæ™¯
- `createScene(name)` - åˆ›å»ºæ–°åœºæ™¯
- `saveScene(scene, path)` - ä¿å­˜åœºæ™¯
- `unloadScene()`, `unloadAllScenes()`

**SceneTransition:**
- ç±»å‹: None, Fade, Crossfade, SlideLeft/Right/Up/Down
- duration, color, progress
- `getFadeOpacity()` - æ¸å˜ä¸é€æ˜åº¦

**SceneTransitionManager:**
- `transitionTo(path, type, duration)` - å¸¦è¿‡æ¸¡åˆ‡æ¢åœºæ™¯
- è‡ªåŠ¨é¢„åŠ è½½ + ä¸­ç‚¹åˆ‡æ¢

---

## Phase 27: æ•°æ®é©±åŠ¨ç³»ç»Ÿ âœ…

### 27.1 é…ç½®è¡¨ (`engine/data/data_system.h`)

**ConfigValue:**
- æ”¯æŒ: bool, int64_t, double, string, string[], double[]

**ConfigTable:**
- `setBool/Int/Float/String()` - è®¾ç½®å€¼
- `getBool/Int/Float/String()` - è·å–å€¼ (å¸¦é»˜è®¤å€¼)
- `parseFromString()` - ä» key=value æ ¼å¼è§£æ
- `serializeToString()` - åºåˆ—åŒ–

### 27.2 æœ¬åœ°åŒ–

**Localization:**
- `setLanguage(code)` - åˆ‡æ¢è¯­è¨€
- `loadStrings(language, strings)` - åŠ è½½å­—ç¬¦ä¸²
- `get(key)` - è·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²
- `format(key, args...)` - æ ¼å¼åŒ–å­—ç¬¦ä¸²
- è‡ªåŠ¨å›é€€åˆ°è‹±è¯­

### 27.3 æ–‡ä»¶ç›‘æ§

**FileWatcher:**
- `addWatch(path, callback)` - æ·»åŠ ç›‘æ§
- `update()` - æ£€æŸ¥æ–‡ä»¶å˜åŒ–
- åŸºäºä¿®æ”¹æ—¶é—´æ£€æµ‹

### 27.4 æ•°æ®ç®¡ç†å™¨

**DataManager:**
- `loadConfig(name)` - åŠ è½½é…ç½®è¡¨
- `reloadConfig(name)` - é‡è½½é…ç½®
- `addConfigListener()` - é…ç½®å˜åŒ–ç›‘å¬
- `loadLanguage(code)` - åŠ è½½è¯­è¨€æ–‡ä»¶
- `localize(key)` / `localizeFormat(key, args)`
- çƒ­é‡è½½æ”¯æŒ

**ä¾¿æ·å®:**
```cpp
LOC("key")                    // è·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²
LOC_FMT("key", arg1, arg2)    // æ ¼å¼åŒ–
CONFIG("name")->getInt("key") // è·å–é…ç½®
```

---

## Phase 28: æ‰“åŒ…/å‘å¸ƒç³»ç»Ÿ âœ…

### 28.1 èµ„æºæ‰“åŒ… (`engine/build/build_system.h`)

**AssetBundleEntry:**
- sourcePath, bundlePath
- offset, size, originalSize
- crc32, compressed

**AssetBundler:**
- `addAsset(source, bundlePath)` - æ·»åŠ èµ„æº
- `addDirectory(dir, filter)` - æ·»åŠ ç›®å½•
- `build(outputPath, compress)` - æ„å»ºåŒ…
- `buildManifest()` - ç”Ÿæˆæ¸…å•

### 28.2 æ„å»ºé…ç½®

**BuildPlatform:**
- Windows, macOS, iOS, Android, Linux, WebGL

**BuildConfig:**
- Debug, Development, Release

**BuildSettings:**
- projectName, version, buildNumber
- platform, config
- outputDir, assetsDir
- compressAssets, stripDebugInfo
- bundleIdentifier (iOS/macOS/Android)
- teamId (iOS), keystorePath (Android)

### 28.3 æ„å»ºç®¡çº¿

**BuildPipeline:**
- å¯é…ç½®æ­¥éª¤åˆ—è¡¨
- é»˜è®¤æ­¥éª¤: Validate â†’ Clean â†’ CreateDirectories â†’ CopyAssets â†’ BundleAssets â†’ WriteMetadata
- `addStep()`, `insertStepBefore()`, `removeStep()`
- è¿›åº¦å›è°ƒæ”¯æŒ

**BuildResult:**
- success, outputPath, errorMessage
- warnings, buildTimeMs, totalSize
- stepResults (æ¯æ­¥ç»“æœ)

**BuildManager:**
- `build(progressCallback)` - æ‰§è¡Œæ„å»º
- `buildForPlatform(platform)` - æŒ‡å®šå¹³å°æ„å»º
- é¢„è®¾: `useDebugPreset()`, `useDevelopmentPreset()`, `useReleasePreset()`

### 28.4 ç¼–è¾‘å™¨é¢æ¿

**Scene Manager Panel:**
- å½“å‰åœºæ™¯ä¿¡æ¯
- å·²åŠ è½½åœºæ™¯åˆ—è¡¨
- åŠ è½½/é¢„åŠ è½½/å¸è½½æ“ä½œ
- åœºæ™¯è¿‡æ¸¡è®¾ç½®

**Data Manager Panel:**
- é…ç½®è¡¨åŠ è½½/ç¼–è¾‘/ä¿å­˜
- æœ¬åœ°åŒ–è¯­è¨€åˆ‡æ¢
- çƒ­é‡è½½çŠ¶æ€

**Build Settings Panel:**
- é¡¹ç›®ä¿¡æ¯ç¼–è¾‘
- å¹³å°/é…ç½®é€‰æ‹©
- è·¯å¾„è®¾ç½®
- æ„å»ºé€‰é¡¹
- ä¸€é”®æ„å»º + è¿›åº¦æ˜¾ç¤º
- æ„å»ºç»“æœæ˜¾ç¤º

**èœå•å…¥å£:** Window â†’ Rendering â†’ Scene Manager / Data Manager / Build Settings

---

## ğŸ“ æ—§è®¡åˆ’ï¼ˆå·²æ•´åˆåˆ°è·¯çº¿å›¾ï¼‰

<details>
<summary>ç‚¹å‡»å±•å¼€æ—§è®¡åˆ’</summary>

#### æè´¨ç¼–è¾‘å™¨ UI
- [ ] **å®æ—¶æè´¨ç¼–è¾‘**
  - Metallicã€Roughnessã€Base Color æ»‘å—
  - çº¹ç†æ›¿æ¢ï¼ˆæ‹–æ‹½æˆ–æ–‡ä»¶é€‰æ‹©ï¼‰
  - å®æ—¶é¢„è§ˆæ›´æ–°

- [ ] **æè´¨ç®¡ç†**
  - æè´¨é¢„è®¾ä¿å­˜/åŠ è½½
  - æè´¨åº“ï¼ˆMaterial Libraryï¼‰
  - æè´¨å®ä¾‹åŒ–

#### ç¯å¢ƒè´´å›¾æ”¯æŒ
- [ ] .hdr æ–‡ä»¶åŠ è½½
  - ç¯å¢ƒè´´å›¾åˆ‡æ¢
  - ç¯å¢ƒå¼ºåº¦è°ƒèŠ‚

#### 5. åå¤„ç†æ•ˆæœ
- [ ] **åŸºç¡€åå¤„ç†**
  - Bloomï¼ˆæ³›å…‰æ•ˆæœï¼‰
  - è‰²è°ƒæ˜ å°„ä¼˜åŒ–ï¼ˆå¤šç§ç®—æ³•å¯é€‰ï¼‰
  - é¢œè‰²åˆ†çº§ï¼ˆColor Gradingï¼‰

- [ ] **é«˜çº§åå¤„ç†**
  - å±å¹•ç©ºé—´ç¯å¢ƒå…‰é®è”½ï¼ˆSSAOï¼‰
  - æŠ—é”¯é½¿ï¼ˆMSAA / TAAï¼‰
  - æ™¯æ·±ï¼ˆDepth of Fieldï¼Œå¯é€‰ï¼‰

### ä¼˜å…ˆçº§ 3ï¼šåŠ¨ç”»ä¸äº¤äº’

#### 6. åŠ¨ç”»æ”¯æŒ
- [ ] **éª¨éª¼åŠ¨ç”»**
  - éª¨éª¼å±‚æ¬¡ç»“æ„è§£æ
  - GPU Skinningï¼ˆé¡¶ç‚¹ç€è‰²å™¨è’™çš®ï¼‰
  - åŠ¨ç”»å‰ªè¾‘æ’­æ”¾
  - åŠ¨ç”»æ··åˆï¼ˆBlendingï¼‰

- [ ] **å…³é”®å¸§åŠ¨ç”»**
  - Transform å…³é”®å¸§ï¼ˆä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ï¼‰
  - æ›²çº¿ç¼–è¾‘å™¨ï¼ˆBezier æ›²çº¿ï¼‰
  - åŠ¨ç”»æ—¶é—´è½´

- [ ] **Timeline ç¼–è¾‘å™¨**
  - æ—¶é—´è½´ UIï¼ˆå‚è€ƒ GOLDEN_PATHï¼‰
  - å¤šè½¨é“æ”¯æŒï¼ˆTransformã€Cameraã€Materialã€Animationï¼‰
  - æ’­æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœ/åœæ­¢ï¼‰
  - å…³é”®å¸§ç¼–è¾‘

#### 7. äº¤äº’ç³»ç»Ÿ
- [ ] **Action ç³»ç»Ÿ**
  - Action å®šä¹‰ï¼ˆApplyLookã€SetParameterã€SwitchCamera ç­‰ï¼‰
  - Action æ´¾å‘æœºåˆ¶
  - Action è®°å½•/å›æ”¾

- [ ] **çŠ¶æ€æœº**
  - çŠ¶æ€å®šä¹‰ï¼ˆStateï¼‰
  - çŠ¶æ€è½¬æ¢ï¼ˆTransitionï¼‰
  - äº‹ä»¶è§¦å‘ï¼ˆEvent Busï¼‰

### ä¼˜å…ˆçº§ 4ï¼šæ€§èƒ½ä¸ä¼˜åŒ–

#### 8. æ€§èƒ½ä¼˜åŒ–
- [ ] **æ¸²æŸ“ä¼˜åŒ–**
  - è§†é”¥å‰”é™¤ï¼ˆFrustum Cullingï¼‰
  - é®æŒ¡å‰”é™¤ï¼ˆOcclusion Cullingï¼Œå¯é€‰ï¼‰
  - LOD ç³»ç»Ÿï¼ˆLevel of Detailï¼‰
  - æ‰¹å¤„ç†ä¼˜åŒ–ï¼ˆInstancingï¼‰

- [ ] **èµ„æºä¼˜åŒ–**
  - çº¹ç†å‹ç¼©ï¼ˆBC1/BC3/BC7ï¼‰
  - çº¹ç†æµå¼åŠ è½½
  - æ¨¡å‹ç¼“å­˜

- [ ] **æ€§èƒ½åˆ†æ**
  - GPU æ€§èƒ½è®¡æ•°å™¨
  - å¸§æ—¶é—´åˆ†æ
  - æ€§èƒ½é¢æ¿ï¼ˆæ˜¾ç¤º Draw Callsã€Trianglesã€Memory ç­‰ï¼‰

#### 9. å·¥å…·ä¸å·¥ä½œæµ
- [ ] **æ‰“åŒ…å·¥å…·å¢å¼º**
  - ç¡®å®šæ€§æ„å»ºï¼ˆDeterministic Buildï¼‰
  - Asset Registryï¼ˆèµ„äº§æ³¨å†Œè¡¨ï¼‰
  - ä¾èµ–åˆ†æ

- [ ] **å¯¼å‡ºåŠŸèƒ½**
  - åœºæ™¯å¯¼å‡ºï¼ˆJSON/Binaryï¼‰
  - é¢„è§ˆå›¾ç”Ÿæˆ
  - ç§»åŠ¨ç«¯åŒ…ç”Ÿæˆï¼ˆiOS/Androidï¼‰

### ä¼˜å…ˆçº§ 5ï¼šå¹³å°æ‰©å±•

#### 10. å¤šå¹³å°æ”¯æŒ
- [ ] **ç§»åŠ¨ç«¯è¿è¡Œæ—¶**
  - iOS Runtimeï¼ˆMetal åç«¯ï¼‰
  - Android Runtimeï¼ˆVulkan åç«¯ï¼‰
  - ç§»åŠ¨ç«¯ Look Fallbackï¼ˆç®€åŒ–æ¸²æŸ“ç®¡çº¿ï¼‰

- [x] **è·¨å¹³å°æ¸²æŸ“åç«¯**
  - [ ] Vulkan åç«¯
  - [x] Metal åç«¯ï¼ˆmacOS/iOSï¼‰
  - [x] æ¸²æŸ“æŠ½è±¡å±‚ï¼ˆRHIï¼‰

#### 11. Look System
- [ ] **å…‰ç…§é…ç½®**
  - IBL/HDR ç¯å¢ƒé…ç½®
  - ä¸»å…‰æºè®¾ç½®
  - å…‰ç…§é¢„è®¾

- [ ] **åå¤„ç†é…ç½®**
  - æ›å…‰ã€è‰²è°ƒè°ƒèŠ‚
  - åå¤„ç†é“¾ï¼ˆBloomã€Tone Mapping ç­‰ï¼‰
  - Look é¢„è®¾ä¿å­˜/åŠ è½½

- [ ] **çƒ­åˆ‡æ¢**
  - è¿è¡Œæ—¶åˆ‡æ¢ Look
  - Look åºåˆ—åŒ–

---

## ğŸ“ å¼€å‘ç¬”è®°

### æŠ€æœ¯å†³ç­–
- **Pimpl æ¨¡å¼**ï¼š`UnifiedRenderer` ä½¿ç”¨ Pimpl éšè—å¹³å°å®ç°ç»†èŠ‚
- **è·¨å¹³å°æ¶æ„**ï¼šDX12 (Windows) å’Œ Metal (macOS) å…±ç”¨ç›¸åŒæ¥å£
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šå°† UIã€ç›¸æœºã€è§†å£åˆ†ç¦»ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
- **åŠ¨æ€è£å‰ªå¹³é¢**ï¼šæ ¹æ®ç›¸æœºè·ç¦»è‡ªåŠ¨è°ƒæ•´ï¼Œæ”¯æŒå¤§åœºæ™¯ç¼©æ”¾
- **å¼‚æ­¥åŠ è½½**ï¼šçº¹ç†è§£ç åœ¨åå°çº¿ç¨‹ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹

### å·²çŸ¥é—®é¢˜
- æŸäº› FBX æ¨¡å‹çš„åµŒå…¥çº¹ç†è·¯å¾„å¯èƒ½ä¸æ­£ç¡®ï¼ˆå·²é€šè¿‡æ–‡ä»¶ååŒ¹é…è§£å†³ï¼‰

### å·²å®Œæˆä¼˜åŒ–
- [x] å¸¸é‡ç¼“å†²åŒºç¯å½¢ç¼“å†²ï¼ˆé¿å…æ¯å¸§ Map/Unmapï¼‰
- [x] å¼‚æ­¥çº¹ç†åŠ è½½ï¼ˆåå°çº¿ç¨‹è§£ç ï¼‰
- [x] æŒä¹…åŒ–æ˜ å°„ï¼ˆDX12ï¼‰

---

## ğŸ“… æ›´æ–°è®°å½•

- **2026-01-13**ï¼š**RHI é‡æ„ & ä»£ç ç»Ÿä¸€ (é˜¶æ®µ 3)**
  - è®¾è®¡è·¨å¹³å° RHI æŠ½è±¡æ¥å£ (`engine/renderer/rhi/`)
    - `rhi_types.h` - å¹³å°æ— å…³çš„æ¸²æŸ“ç±»å‹å®šä¹‰
    - `rhi_resources.h` - Bufferã€Textureã€Samplerã€Shaderã€Pipeline æŠ½è±¡
    - `rhi_device.h` - Device å’Œ CommandBuffer æŠ½è±¡æ¥å£
    - `rhi.h` - ç»Ÿä¸€å…¥å£å’Œè¾…åŠ©å‡½æ•°
  - å®ç° Metal RHI åç«¯ (`metal_rhi.mm`)
    - MetalBufferã€MetalTextureã€MetalSampler
    - MetalShaderã€MetalPipeline
    - MetalSwapchainã€MetalCommandBuffer
    - MetalDeviceï¼ˆè®¾å¤‡ç®¡ç†ã€èµ„æºåˆ›å»ºï¼‰
  - å®ç° DX12 RHI åç«¯ (`dx12_rhi.cpp`)
    - DX12Bufferã€DX12Textureã€DX12Sampler
    - DX12Shaderã€DX12Pipeline
    - DX12Swapchainã€DX12CommandBuffer
    - DX12Deviceï¼ˆè®¾å¤‡ç®¡ç†ã€Root Signatureï¼‰
  - **åˆ›å»º UnifiedRenderer ç»Ÿä¸€æ¸²æŸ“å™¨**
    - `unified_renderer.h` - è·¨å¹³å°æ¸²æŸ“å™¨æ¥å£
    - `unified_renderer_metal.mm` - Metal å®ç°
    - `unified_renderer_dx12.cpp` - DX12 å®ç°
    - æ”¯æŒ PBR æ¸²æŸ“ã€ç½‘æ ¼æ¸²æŸ“ã€åæ ‡è½´æ¸²æŸ“
    - ç»Ÿä¸€çš„æ¨¡å‹åŠ è½½å’Œèµ„æºç®¡ç†
  - **è¿ç§»åº”ç”¨åˆ° UnifiedRenderer**
    - macOS `LumaView.mm` ä½¿ç”¨ `UnifiedRenderer`
    - Windows åº”ç”¨æ”¯æŒ (å¾…å®Œæ•´æµ‹è¯•)
  - **æ¸…ç†æ—§ä»£ç **
    - æ—§ `PBRRenderer` ä»£ç å·²å®Œå…¨åˆ é™¤
    - ç»Ÿä¸€ä½¿ç”¨ `UnifiedRenderer`

- **2026-01-23**ï¼š**å¼‚æ­¥çº¹ç†åŠ è½½ & ä»£ç æ¸…ç†**
  - æ–°å¢å¼‚æ­¥çº¹ç†åŠ è½½ç³»ç»Ÿ (`engine/asset/async_texture_loader.h/cpp`)
    - 2 ä¸ªå·¥ä½œçº¿ç¨‹åå°è§£ç çº¹ç†
    - å‡ ä½•ä½“å³æ—¶æ˜¾ç¤ºï¼Œçº¹ç†é€æ¸åŠ è½½
    - UI æ˜¾ç¤ºåŠ è½½è¿›åº¦æ¡
  - ä»£ç æ¸…ç†
    - åˆ é™¤ `_deprecated/` æ–‡ä»¶å¤¹ï¼ˆæ—§ PBR æ¸²æŸ“å™¨ï¼‰
    - åˆ é™¤ `apps/creator_win/` Qt ç‰ˆä»£ç 
    - æ›´æ–° README.md åæ˜ å½“å‰æ¶æ„
  - Windows Creator è¿ç§»åˆ° `UnifiedRenderer`
    - `apps/creator_imgui/main.cpp` ä½¿ç”¨ç»Ÿä¸€æ¸²æŸ“å™¨

- **2026-01-12**ï¼š**Metal æ¸²æŸ“åç«¯æ”¯æŒ (é˜¶æ®µ 1 & 2)**
  - æ–°å¢ Metal ç€è‰²å™¨ (`engine/renderer/shaders/pbr.metal`)
    - å®Œæ•´ PBR ç®¡çº¿ï¼ˆCook-Torrance BRDFã€ACES è‰²è°ƒæ˜ å°„ï¼‰
    - Line shaderï¼ˆç”¨äºç½‘æ ¼å’Œåæ ‡è½´ï¼‰
  - æ–°å¢ Metal æ¸²æŸ“å™¨å®ç° (`unified_renderer_metal.mm`)
    - ä¸ DX12 ç‰ˆæœ¬åŠŸèƒ½å¯¹ç­‰
    - æ”¯æŒçº¹ç†åŠ è½½ï¼ˆDiffuseã€Normalã€Specular/Metallicï¼‰
    - æ”¯æŒç½‘æ ¼å’Œåæ ‡è½´æ¸²æŸ“
  - æ–°å¢ macOS åº”ç”¨ (`apps/creator_macos/`)
    - `LumaView` Metal è§†å›¾
    - å®Œæ•´ ImGui é›†æˆ
      - Model é¢æ¿ï¼ˆæ¨¡å‹ä¿¡æ¯ã€æ‰“å¼€æ–‡ä»¶ï¼‰
      - Camera é¢æ¿ï¼ˆè‡ªåŠ¨æ—‹è½¬ã€æ‰‹åŠ¨æ§åˆ¶ï¼‰
      - Material é¢æ¿ï¼ˆMetallicã€Roughnessã€Base Colorï¼‰
      - Viewport é¢æ¿ï¼ˆç½‘æ ¼å¼€å…³ï¼‰
      - å¸®åŠ©è¦†ç›–å±‚ï¼ˆF1ï¼‰
      - çŠ¶æ€æ ï¼ˆFPSï¼‰
    - Maya é£æ ¼ç›¸æœºæ§åˆ¶ï¼ˆOption + é¼ æ ‡ï¼‰
  - æ›´æ–° CMakeLists.txt æ”¯æŒ macOS æ„å»º
    - æ¡ä»¶ç¼–è¯‘ DX12/Metal
    - ImGui Metal åç«¯é›†æˆ
    - è‡ªåŠ¨é“¾æ¥ Metal æ¡†æ¶
    - ç€è‰²å™¨å¤åˆ¶åˆ° app bundle

- **2024-12-XX**ï¼šåˆå§‹å¼€å‘æ—¥å¿—åˆ›å»º
  - è®°å½•å·²å®ŒæˆåŠŸèƒ½ï¼ˆPBR æ¸²æŸ“ã€æ¨¡å‹åŠ è½½ã€ç›¸æœºæ§åˆ¶ã€UI ç­‰ï¼‰
  - åˆ¶å®šä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

---

## ğŸš€ Phase 16: äº§å“å®Œå–„è®¡åˆ’

### 16.1 ä¼˜å…ˆçº§è§„åˆ’

#### P0 - å¿…é¡»åšï¼ˆèƒ½ç”¨ï¼‰
| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ•´åˆæµ‹è¯• | â³ å¾…åš | ç¡®ä¿æ‰€æœ‰ç³»ç»ŸååŒå·¥ä½œ |
| åŸºç¡€ç¤ºä¾‹é¡¹ç›® | âœ… å·²å®Œæˆ | A-D å››ä¸ªç¤ºä¾‹é¡¹ç›® |
| å¿«é€Ÿå…¥é—¨æ–‡æ¡£ | âœ… å·²å®Œæˆ | GOLDEN_PATH.md |

#### P1 - åº”è¯¥åšï¼ˆå¥½ç”¨ï¼‰
| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| é¡¹ç›®æ¨¡æ¿ | â³ å¾…åš | ç©ºç™½/2D/3D æ¨¡æ¿ |
| è‡ªåŠ¨ä¿å­˜ & å´©æºƒæ¢å¤ | â³ å¾…åš | é˜²æ­¢ç”¨æˆ·ä¸¢å¤±å·¥ä½œ |
| Undo/Redo å®Œå–„ | âœ… å·²å®Œæˆ | Command ç³»ç»Ÿ |
| å¿«æ·é”®ç³»ç»Ÿ | â³ å¾…åš | æé«˜å·¥ä½œæ•ˆç‡ |
| èµ„äº§å¯¼å…¥å‘å¯¼ | â³ å¾…åš | ç®€åŒ–æ¨¡å‹/çº¹ç†å¯¼å…¥ |

#### P2 - å¯ä»¥åšï¼ˆæ˜“ç”¨ï¼‰
| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ¬¢è¿é¡µé¢/æœ€è¿‘é¡¹ç›® | â³ å¾…åš | æ›´å¥½çš„é¦–æ¬¡ä½“éªŒ |
| åå¥½è®¾ç½®é¢æ¿ | â³ å¾…åš | è‡ªå®šä¹‰ç¼–è¾‘å™¨ |
| Console/æ—¥å¿—é¢æ¿ | â³ å¾…åš | è°ƒè¯•ä¿¡æ¯å¯è§†åŒ– |
| èµ„äº§æµè§ˆå™¨ | ğŸ”„ è¿›è¡Œä¸­ | ç®¡ç†é¡¹ç›®èµ„æº |

#### P3 - æœªæ¥è€ƒè™‘
| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ’ä»¶/æ‰©å±•ç³»ç»Ÿ | â³ å¾…åš | ç¤¾åŒºè´¡çŒ® |
| å¯è§†åŒ–è„šæœ¬ | ğŸ”„ è¿›è¡Œä¸­ | éç¨‹åºå‘˜å‹å¥½ |
| åä½œç¼–è¾‘ | â³ å¾…åš | å›¢é˜Ÿå·¥ä½œæµ |

---

### 16.2 èµ„äº§æµè§ˆå™¨ï¼ˆAsset Browserï¼‰

è®¾è®¡ç›®æ ‡ï¼šæä¾›ç›´è§‚çš„é¡¹ç›®èµ„æºç®¡ç†ç•Œé¢

#### åŠŸèƒ½è®¾è®¡
1. **ç›®å½•æ ‘è§†å›¾**
   - æ˜¾ç¤ºé¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„
   - æ”¯æŒæ–‡ä»¶å¤¹å±•å¼€/æŠ˜å 
   - æ‹–æ‹½ç»„ç»‡æ–‡ä»¶

2. **èµ„äº§ç½‘æ ¼è§†å›¾**
   - ç¼©ç•¥å›¾é¢„è§ˆï¼ˆæ¨¡å‹ã€çº¹ç†ã€æè´¨ï¼‰
   - åˆ—è¡¨/ç½‘æ ¼åˆ‡æ¢
   - æœç´¢è¿‡æ»¤

3. **èµ„äº§ç±»å‹æ”¯æŒ**
   - æ¨¡å‹ï¼š.fbx, .obj, .gltf
   - çº¹ç†ï¼š.png, .jpg, .hdr
   - æè´¨ï¼š.mat
   - åœºæ™¯ï¼š.luma
   - è„šæœ¬ï¼š.lua
   - éŸ³é¢‘ï¼š.wav, .mp3

4. **æ“ä½œåŠŸèƒ½**
   - åŒå‡»æ‰“å¼€/é¢„è§ˆ
   - å³é”®èœå•ï¼ˆé‡å‘½åã€åˆ é™¤ã€å¤åˆ¶ï¼‰
   - æ‹–æ‹½åˆ°åœºæ™¯
   - å¯¼å…¥æ–°èµ„äº§

---

### 16.3 è§’è‰²åˆ›å»ºç³»ç»Ÿï¼ˆCharacter Creation Systemï¼‰

**æ—¥æœŸ**: 2026-01-23

è®¾è®¡ç›®æ ‡ï¼šå®ç°"ç…§ç‰‡ â†’ å¯ç¼–è¾‘ 3D è§’è‰² â†’ å¯ç©¿æˆ´ â†’ å¯åŠ¨ç”»"çš„å®Œæ•´è§’è‰²ç”Ÿäº§æµæ°´çº¿ã€‚

#### å·²å®Œæˆæ¨¡å—

1. **BlendShape ç³»ç»Ÿ** (`engine/character/blend_shape.h`)
   - BlendShapeTarget: å­˜å‚¨é¡¶ç‚¹åç§»æ•°æ®ï¼ˆä½ç½®ã€æ³•çº¿ã€åˆ‡çº¿ï¼‰
   - BlendShapeChannel: æƒé‡æ§åˆ¶ï¼Œæ”¯æŒå¤šç›®æ ‡æ··åˆ
   - BlendShapeMesh: ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ BlendShape æ•°æ®
   - BlendShapePreset: é¢„è®¾ç³»ç»Ÿï¼ˆè¡¨æƒ…ã€ä½“å‹ï¼‰
   - CPU æ··åˆè®¡ç®—æ”¯æŒ
   - ç¨€ç–å­˜å‚¨ä¼˜åŒ–ï¼ˆåªå­˜å‚¨å˜åŒ–çš„é¡¶ç‚¹ï¼‰

2. **BlendShape GPU è®¡ç®—** (`engine/renderer/shaders/blend_shape.metal`)
   - ç¨€ç– Delta åº”ç”¨ Kernel
   - ç¨ å¯† Per-Vertex åº”ç”¨ Kernel
   - é¢„ç´¢å¼•ä¼˜åŒ– Kernelï¼ˆæœ€é«˜æ•ˆï¼‰
   - BlendShape + éª¨éª¼è’™çš®è”åˆè®¡ç®— Kernel
   - ä» Base Mesh åˆå§‹åŒ– Kernel

3. **èº«ä½“å‚æ•°ç³»ç»Ÿ** (`engine/character/character_body.h`)
   - Gender: ç”·/å¥³/ä¸­æ€§
   - AgeGroup: å¹¼å¹´/é’å°‘å¹´/é’å¹´/æˆå¹´/è€å¹´
   - BodyPreset: 15+ é¢„è®¾ä½“å‹
   - BodyMeasurements: 20+ ç»†èŠ‚å‚æ•°ï¼ˆèº«é«˜ã€ä½“é‡ã€è‚Œè‚‰ã€è‚©å®½...ï¼‰
   - BlendShape æ˜ å°„ç³»ç»Ÿï¼ˆå‚æ•° â†’ æƒé‡ï¼‰
   - åºåˆ—åŒ–/ååºåˆ—åŒ–æ”¯æŒ

4. **è„¸éƒ¨å‚æ•°ç³»ç»Ÿ** (`engine/character/character_face.h`)
   - FaceShapeParams: 50+ è„¸éƒ¨å½¢çŠ¶å‚æ•°
   - FaceExpressionParams: ARKit 52 å…¼å®¹è¡¨æƒ…å‚æ•°
   - FaceTextureParams: è‚¤è‰²ã€çœ¼è‰²ã€å”‡è‰²ã€åŒ–å¦†ç­‰
   - PhotoFaceResult: AI ç…§ç‰‡é‡å»ºç»“æœæ•°æ®ç»“æ„
   - è„¸éƒ¨é¢„è®¾åº“æ”¯æŒ

5. **è§’è‰²æ•´åˆç³»ç»Ÿ** (`engine/character/character.h`)
   - Character: ç»Ÿä¸€è§’è‰²ç±»ï¼ˆFace + Body + Clothing + Animationï¼‰
   - CharacterClothing: æœè£…ç®¡ç†ï¼ˆè£…å¤‡ã€åˆ†å±‚ã€é¢œè‰²å®šåˆ¶ï¼‰
   - CharacterAnimationState: åŠ¨ç”»çŠ¶æ€ç®¡ç†
   - CharacterFactory: è§’è‰²åˆ›å»ºå·¥å‚
   - CharacterManager: å¤šè§’è‰²ç®¡ç†
   - æ ‡å‡† Humanoid éª¨éª¼ï¼ˆ30+ éª¨éª¼ï¼‰
   - å¯¼å‡ºæ”¯æŒï¼ˆglTF, FBX, VRM é¢„ç•™ï¼‰

6. **è§’è‰²åˆ›å»º UI** (`engine/character/character_creator_ui.h`)
   - ImGui é›†æˆç•Œé¢
   - åˆ† Tab è®¾è®¡ï¼ˆBody/Face/Clothing/Animation/Exportï¼‰
   - èº«ä½“å­é¢æ¿ï¼ˆPreset/Overall/Torso/Arms/Legs/Skinï¼‰
   - è„¸éƒ¨å­é¢æ¿ï¼ˆShape/Eyes/Nose/Mouth/Texture/Expressionï¼‰
   - æ»‘å— + é‡ç½®æŒ‰é’®
   - é¢œè‰²é€‰æ‹©å™¨ + é¢„è®¾
   - é¢„è®¾ç½‘æ ¼å±•ç¤º

#### äº§å“è§„åˆ’æ–‡æ¡£

è¯¦ç»†äº§å“è§„åˆ’å‚è§: `docs/CHARACTER_CREATION_SPEC.md`

7. **åŸºç¡€äººä½“æ¨¡å‹åŠ è½½** (`engine/character/base_human_loader.h`)
   - BaseHumanModel: ç»Ÿä¸€æ¨¡å‹æ•°æ®ç»“æ„
   - BaseHumanLoader: æ”¯æŒ OBJ å’Œ MakeHuman target æ–‡ä»¶
   - ProceduralHumanGenerator: ç¨‹åºåŒ–äººä½“ç”Ÿæˆï¼ˆç”¨äºæµ‹è¯•ï¼‰
   - BaseHumanModelLibrary: æ¨¡å‹åº“ç®¡ç†

8. **AI æ¨ç†å¼•æ“** (`engine/character/ai/ai_inference.h`)
   - Tensor: å¤šç»´å¼ é‡æ•°æ®ç»“æ„
   - InferenceSession: ONNX Runtime å°è£…
   - AIModelManager: æ¨¡å‹ç®¡ç†å™¨
   - ImagePreprocess: å›¾åƒé¢„å¤„ç†å·¥å…·ï¼ˆresize, normalize, NCHWè½¬æ¢ï¼‰

9. **ç…§ç‰‡â†’è„¸éƒ¨ Pipeline** (`engine/character/ai/face_reconstruction.h`)
   - FaceLandmarks: 468ç‚¹ MediaPipe å…¼å®¹
   - FaceDetector: äººè„¸æ£€æµ‹
   - FaceMeshEstimator: äººè„¸ç½‘æ ¼ä¼°è®¡
   - FLAME3DMMParams: FLAME æ¨¡å‹å‚æ•°
   - Face3DMMRegressor: 3DMM å‚æ•°å›å½’
   - FaceParameterMapper: 3DMMâ†’LUMA å‚æ•°æ˜ å°„
   - FaceTextureExtractor: è„¸éƒ¨è´´å›¾æå–
   - PhotoToFacePipeline: å®Œæ•´ç…§ç‰‡åˆ°è„¸éƒ¨æµç¨‹

10. **è§’è‰²æ¸²æŸ“å™¨** (`engine/character/character_renderer.h`)
    - CharacterGPUData: ç®¡ç†åŸºç¡€ç½‘æ ¼å’Œå˜å½¢åç½‘æ ¼
    - CharacterRenderer: æ¸²æŸ“é›†æˆç±»
    - è‡ªåŠ¨æ›´æ–° BlendShape å¹¶åŒæ­¥åˆ° GPU

11. **è§’è‰²åˆ›å»ºæ¼”ç¤º** (`examples/07_character_creator.h`)
    - CharacterCreatorDemo: å®Œæ•´æ¼”ç¤ºåº”ç”¨
    - ImGui ç•Œé¢é›†æˆ
    - å®æ—¶é¢„è§ˆå’Œè°ƒæ•´
    - Body/Face/BlendShape/Export æ ‡ç­¾é¡µ

12. **ä½¿ç”¨æ–‡æ¡£** (`docs/tutorials/07_character_creation.md`)
    - å®Œæ•´çš„ä½¿ç”¨æ•™ç¨‹
    - API å‚è€ƒ
    - ä»£ç ç¤ºä¾‹
    - å¸¸è§é—®é¢˜è§£ç­”

13. **ç¼–è¾‘å™¨ UI é›†æˆ** (`engine/ui/editor_ui.h`, `apps/luma_studio_macos/LumaView.mm`)
    - CharacterCreatorState: è§’è‰²åˆ›å»º UI çŠ¶æ€
    - drawCharacterCreatorPanel: ImGui è§’è‰²åˆ›å»ºé¢æ¿
    - èœå•å…¥å£: Window â†’ Tools â†’ Character Creator
    - å›è°ƒç³»ç»Ÿ: éšæœºåŒ–ã€é¢„è®¾ã€å‚æ•°å˜åŒ–ã€ç…§ç‰‡å¯¼å…¥ã€å¯¼å‡º

14. **è§’è‰²å®æ—¶æ¸²æŸ“é¢„è§ˆ**
    - initializeCharacter: åˆå§‹åŒ–è§’è‰²å’Œç½‘æ ¼
    - updateAndRenderCharacter: æ¯å¸§æ›´æ–°å’Œæ¸²æŸ“è§’è‰²
    - å‚æ•°å˜åŒ–è‡ªåŠ¨åŒæ­¥åˆ° BlendShape
    - è§’è‰²æ˜¾ç¤ºåœ¨åœºæ™¯å³ä¾§

15. **AI æ¨¡å‹ç®¡ç†** (`engine/character/ai/ai_model_manager.h`)
    - AIModelInfo: æ¨¡å‹ä¿¡æ¯ç»“æ„
    - ModelRegistry: å·²çŸ¥æ¨¡å‹æ³¨å†Œè¡¨
    - AIModelManager: ç®¡ç†æ¨¡å‹ä¸‹è½½ã€éªŒè¯ã€åŠ è½½
    - AI Model Setup å¼¹çª—ç”¨äºå¯¼å…¥ ONNX æ¨¡å‹

16. **è§’è‰²å¯¼å‡º** (`engine/character/character_exporter.h`)
    - OBJExporter: Wavefront OBJ æ ¼å¼å¯¼å‡º
    - GLTFExporter: glTF 2.0 (.glb) æ ¼å¼å¯¼å‡º
    - CharacterExporter: ç»Ÿä¸€å¯¼å‡ºæ¥å£
    - æ”¯æŒå¯¼å‡ºé€‰é¡¹: éª¨éª¼ã€BlendShapeã€ç¼©æ”¾

17. **æœè£…ç³»ç»Ÿ** (`engine/character/clothing_system.h`)
    - ClothingAsset: æœè£…èµ„äº§å®šä¹‰
    - ClothingManager: ç©¿æˆ´ç®¡ç†
    - ProceduralClothingGenerator: ç¨‹åºåŒ–ç”Ÿæˆæœè£…
    - è‡ªåŠ¨é€‚é…ä¸åŒä½“å‹
    - UI é›†æˆ: Clothing æ ‡ç­¾é¡µ

18. **åŠ¨ç”»é‡å®šå‘** (`engine/character/animation_retargeting.h`)
    - HumanoidBoneMapping: æ ‡å‡†äººå½¢éª¨éª¼æ˜ å°„
    - AnimationPose: å§¿åŠ¿æ•°æ®
    - PoseLibrary: å§¿åŠ¿åº“
    - RetargetableClip: å¯é‡å®šå‘åŠ¨ç”»ç‰‡æ®µ
    - AnimationRetargeter: é‡å®šå‘å™¨
    - UI é›†æˆ: Animation æ ‡ç­¾é¡µ

19. **é£æ ¼åŒ–æ¸²æŸ“** (`engine/character/stylized_rendering.h`)
    - CelShadingParams: å¡é€šç€è‰²å‚æ•°
    - OutlineParams: è½®å»“çº¿å‚æ•°
    - AnimeFeatures: åŠ¨æ¼«ç‰¹æ•ˆ
    - StylizedRenderingSettings: å®Œæ•´è®¾ç½®
    - StylizedRenderingManager: ç®¡ç†å™¨
    - æ”¯æŒ: å†™å®ã€åŠ¨æ¼«ã€å¡é€šã€ç»˜ç”»ã€ç´ æé£æ ¼
    - UI é›†æˆ: Style æ ‡ç­¾é¡µ

20. **MakeHuman é›†æˆ** (`engine/character/makehuman_integration.h`)
    - MakeHumanTargetLoader: åŠ è½½ .target æ–‡ä»¶
    - MakeHumanSkeletonMapping: éª¨éª¼æ˜ å°„
    - MakeHumanLoader: æ¨¡å‹åŠ è½½å™¨
    - MakeHumanAssetManager: èµ„äº§ç®¡ç†
    - æ”¯æŒåŠ è½½ MakeHuman å¯¼å‡ºçš„æ¨¡å‹å’Œå˜å½¢ç›®æ ‡

#### ä¸‹ä¸€æ­¥è®¡åˆ’

1. **å®é™…æ¨¡å‹éƒ¨ç½²**
   - ä¸‹è½½å¹¶éƒ¨ç½² ONNX æ ¼å¼çš„ AI æ¨¡å‹
   - æµ‹è¯•ç«¯åˆ°ç«¯ç…§ç‰‡å¤„ç†æµç¨‹

2. **æœè£…ç³»ç»Ÿ**
   - æœè£…æ•°æ®æ ¼å¼å®šä¹‰
   - æœè£…è‡ªåŠ¨é€‚é…ä¸åŒä½“å‹
   - å¤šå±‚æœè£…ç³»ç»Ÿ

3. **é«˜çº§åŠŸèƒ½**
   - åŠ¨ç”»é‡å®šå‘
   - å®æ—¶é¢éƒ¨æ•æ‰
   - é£æ ¼åŒ–æ¸²æŸ“ (åŠ¨æ¼«/å¡é€š)

---

### 21. è§’è‰²è´´å›¾ç³»ç»Ÿï¼ˆCharacter Texture Systemï¼‰

**æ–‡ä»¶**: `engine/character/texture_system.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **çš®è‚¤è´´å›¾ç”Ÿæˆ**
   - Diffuse/Albedo è´´å›¾
   - Normal Mapï¼ˆçš®è‚¤ç»†èŠ‚ã€æ¯›å­”ã€çš±çº¹ï¼‰
   - Roughness Mapï¼ˆç²—ç³™åº¦å˜åŒ–ï¼‰
   - å¤šç§æ—é¢„è®¾ï¼ˆCaucasianã€Asianã€Africanã€Latinoã€Middle Easternï¼‰

2. **çœ¼ç›è´´å›¾**
   - è™¹è†œçº¹ç†ï¼ˆæ”¾å°„çŠ¶çº¤ç»´å›¾æ¡ˆï¼‰
   - ç³å­”å¤§å°å¯è°ƒ
   - çœ¼ç™½ï¼ˆå·©è†œï¼‰è¡€ä¸æ•ˆæœ
   - å¤šç§çœ¼ç›é¢œè‰²é¢„è®¾

3. **å˜´å”‡è´´å›¾**
   - é¢œè‰²ã€å…‰æ³½åº¦æ§åˆ¶
   - é¾Ÿè£‚æ•ˆæœ

4. **å‚æ•°ç³»ç»Ÿ**
   - SkinTextureParams: çš®è‚¤è‰²è°ƒã€é¥±å’Œåº¦ã€æ¯›å­”ã€é›€æ–‘ã€çš±çº¹ã€SSS
   - EyeTextureParams: è™¹è†œé¢œè‰²/å¤§å°ã€ç³å­”å¤§å°ã€ç»†èŠ‚ã€æ¹¿æ¶¦åº¦
   - LipTextureParams: é¢œè‰²ã€å…‰æ³½ã€é¾Ÿè£‚

5. **UI é›†æˆ**
   - æ–°å¢ "Texture" æ ‡ç­¾é¡µ
   - çš®è‚¤/çœ¼ç›/å˜´å”‡é¢„è®¾é€‰æ‹©
   - å®æ—¶å‚æ•°è°ƒèŠ‚
   - åˆ†è¾¨ç‡é€‰æ‹©ï¼ˆ512/1024/2048ï¼‰
   - ä¸€é”®ç”Ÿæˆè´´å›¾

---

### 22. UV æ˜ å°„ä¼˜åŒ–ï¼ˆUV Mapping Systemï¼‰

**æ–‡ä»¶**: `engine/character/uv_mapping.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **UV æŠ•å½±æ–¹æ³•**
   - åœ†æŸ±å½¢æŠ•å½±ï¼ˆèº«ä½“ï¼‰
   - ç›’å¼æŠ•å½±ï¼ˆå¤´éƒ¨ï¼‰
   - çƒå½¢æŠ•å½±ï¼ˆé¢éƒ¨ï¼‰
   - å¹³é¢æŠ•å½±ï¼ˆæ­£é¢ï¼‰

2. **åˆ‡çº¿è®¡ç®—**
   - è‡ªåŠ¨ä» UV è®¡ç®—åˆ‡çº¿å‘é‡
   - Gram-Schmidt æ­£äº¤åŒ–
   - æ”¯æŒæ³•çº¿è´´å›¾

3. **UV ä¿®å¤**
   - è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤ UV æ¥ç¼
   - åŒºåŸŸé‡æ˜ å°„

4. **å¸ƒå±€é¢„è®¾**
   - Cylindrical: ç®€å•åœ†æŸ±æŠ•å½±
   - Atlas: ä¼˜åŒ–çš„åˆ†åŒºå¸ƒå±€

---

### 23. å‘å‹åº“ç³»ç»Ÿï¼ˆHair Style Systemï¼‰

**æ–‡ä»¶**: `engine/character/hair_system.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **å‘å‹èµ„äº§**
   - HairStyleAsset: å‘å‹å®šä¹‰
   - HairCategory: çŸ­å‘/ä¸­å‘/é•¿å‘/ç›˜å‘/å…‰å¤´
   - æ”¯æŒå¤–éƒ¨æ¨¡å‹å¯¼å…¥

2. **å‘å‹æè´¨**
   - HairMaterial: åŸºè‰²ã€é«˜å…‰ã€ç²—ç³™åº¦ã€å„å‘å¼‚æ€§
   - 13ç§é¢œè‰²é¢„è®¾ï¼ˆé»‘/æ£•/é‡‘/çº¢/ç°/ç™½ + å¹»æƒ³è‰²ï¼‰
   - è‡ªå®šä¹‰é¢œè‰²æ”¯æŒ

3. **ç¨‹åºåŒ–å‘å‹ç”Ÿæˆ**
   - generateBuzzCut(): å¹³å¤´
   - generateMediumHair(): ä¸­é•¿å‘ï¼ˆå‘ç‰‡æ³•ï¼‰
   - generatePonytail(): é©¬å°¾

4. **å‘å‹ç®¡ç†å™¨**
   - HairManager: è§’è‰²å‘å‹ç®¡ç†
   - HairStyleLibrary: å‘å‹åº“ï¼ˆå•ä¾‹ï¼‰
   - åŠ¨æ€æ¢å‘å‹/æ¢å‘è‰²

5. **UI é›†æˆ**
   - æ–°å¢ "Hair" æ ‡ç­¾é¡µ
   - å‘å‹ä¸‹æ‹‰é€‰æ‹©
   - é¢œè‰²é¢„è®¾ + è‡ªå®šä¹‰é¢œè‰²
   - å®æ—¶é¢„è§ˆ

---

### 24. æœè£…åŠ è½½å™¨ï¼ˆClothing Loaderï¼‰

**æ–‡ä»¶**: `engine/character/clothing_loader.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **æ¨¡å‹æ ¼å¼æ”¯æŒ**
   - OBJ, glTF/GLB, FBX, DAE, 3DS
   - åˆ©ç”¨ Assimp ç»Ÿä¸€åŠ è½½

2. **å…ƒæ•°æ®ç³»ç»Ÿ**
   - `.meta` è¾¹è½¦æ–‡ä»¶æ”¯æŒ
   - ç®€å• key=value æ ¼å¼
   - è‡ªåŠ¨åˆ†ç±»å’Œæ§½ä½è¯†åˆ«

3. **è‡ªåŠ¨é€‚é…å½¢çŠ¶ç”Ÿæˆ**
   - åŸºäºç½‘æ ¼åˆ†æè‡ªåŠ¨ç”Ÿæˆ BlendShape
   - èº«é«˜/ä½“é‡/èƒ¸å›´/è‡€å›´é€‚é…

4. **æ‰¹é‡åŠ è½½**
   - `loadDirectory()` æ‰¹é‡å¯¼å…¥ç›®å½•
   - `loadAndRegister()` åŠ è½½å¹¶æ³¨å†Œåˆ°åº“

---

### 25. å¸ƒæ–™ç‰©ç†ç³»ç»Ÿï¼ˆCloth Simulationï¼‰

**æ–‡ä»¶**: `engine/character/cloth_simulation.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **è´¨ç‚¹-å¼¹ç°§æ¨¡å‹**
   - ClothParticle: è´¨ç‚¹ï¼ˆä½ç½®/é€Ÿåº¦/è´¨é‡ï¼‰
   - ClothSpring: å¼¹ç°§çº¦æŸï¼ˆç»“æ„/å‰ªåˆ‡/å¼¯æ›²ï¼‰
   - Verlet ç§¯åˆ†

2. **ç‰©ç†å‚æ•°**
   - é‡åŠ›ã€é˜»å°¼ã€ç©ºæ°”é˜»åŠ›
   - å¼¹ç°§åˆšåº¦ï¼ˆç»“æ„/å‰ªåˆ‡/å¼¯æ›²åˆ†ç¦»ï¼‰
   - æœ€å¤§æ‹‰ä¼¸é™åˆ¶

3. **ç¢°æ’æ£€æµ‹**
   - CollisionSphere: çƒä½“ç¢°æ’
   - CollisionCapsule: èƒ¶å›Šä½“ç¢°æ’
   - ç¢°æ’æ‘©æ“¦

4. **èº«ä½“ç¢°æ’ç”Ÿæˆå™¨**
   - BodyCollisionGenerator
   - è‡ªåŠ¨ä»èº«ä½“å‚æ•°ç”Ÿæˆç¢°æ’ä½“

---

### 26. æœè£…è´´å›¾ç³»ç»Ÿï¼ˆClothing Texturesï¼‰

**æ–‡ä»¶**: `engine/character/clothing_textures.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **å¸ƒæ–™ç±»å‹**
   - Cotton, Denim, Silk, Leather, Wool
   - Polyester, Velvet, Linen, Satin, Canvas

2. **ç¨‹åºåŒ–çº¹ç†ç”Ÿæˆ**
   - generateDiffuse(): åŸºç¡€é¢œè‰²çº¹ç†
   - generateNormal(): æ³•çº¿è´´å›¾
   - generateRoughness(): ç²—ç³™åº¦è´´å›¾

3. **å¸ƒæ–™ç‰¹å¾**
   - æ£‰å¸ƒç¼–ç»‡çº¹ç†
   - ç‰›ä»”æ–œçº¹
   - ä¸ç»¸å…‰æ³½
   - çš®é©çº¹ç†
   - ç¾Šæ¯›çº¤ç»´

4. **æè´¨é›†ç®¡ç†**
   - ClothingMaterialSet: å®Œæ•´æè´¨åŒ…
   - ClothingTextureManager: ç¼“å­˜å’Œç®¡ç†

---

### 27. æœè£…éª¨éª¼è’™çš®ï¼ˆClothing Skinningï¼‰

**æ–‡ä»¶**: `engine/character/clothing_skinning.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **è‡ªåŠ¨æƒé‡ç”Ÿæˆ**
   - åŸºäºè·ç¦»çš„æƒé‡è®¡ç®—
   - çƒ­æ‰©æ•£æƒé‡å¹³æ»‘
   - æœ€å¤š4éª¨éª¼å½±å“

2. **è’™çš®æ•°æ®ç»“æ„**
   - VertexSkinData: é¡¶ç‚¹æƒé‡
   - ClothingSkinData: æ•´ä»¶æœè£…è’™çš®
   - é€†ç»‘å®šçŸ©é˜µ

3. **è’™çš®å˜å½¢å™¨**
   - ClothingSkinningDeformer
   - å®æ—¶éª¨éª¼çŸ©é˜µå˜å½¢
   - æ³•çº¿åŒæ­¥å˜æ¢

4. **ç®¡ç†å™¨**
   - ClothingSkinningManager: ç¼“å­˜è’™çš®æ•°æ®
   - æŒ‰éœ€ç”Ÿæˆæˆ–åŠ è½½

---

### 28. è§’è‰²æ¨¡æ¿ç³»ç»Ÿï¼ˆCharacter Template Systemï¼‰

**æ–‡ä»¶**: `engine/character/character_template.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **æ¨¡æ¿æ¥å£**
   - ICharacterTemplate: æŠ½è±¡æ¥å£
   - CharacterType: Human/Anime/Cartoon/Mascot/Animal/Robot/Fantasy/Chibi
   - CharacterParams: ç»Ÿä¸€å‚æ•°ç»“æ„
   - BodyProportions: èº«ä½“æ¯”ä¾‹é¢„è®¾

2. **æ¨¡æ¿æ³¨å†Œè¡¨**
   - CharacterTemplateRegistry: å•ä¾‹ç®¡ç†
   - æŒ‰ç±»å‹æ³¨å†Œ/è·å–æ¨¡æ¿
   - createCharacter(): ç»Ÿä¸€åˆ›å»ºæ¥å£

3. **åŸºç±»å®ç°**
   - BaseCharacterTemplate: é€šç”¨åŠŸèƒ½
   - è‡ªåŠ¨è¾¹ç•Œè®¡ç®—
   - å‚æ•°éªŒè¯

---

### 29. èº«ä½“éƒ¨ä»¶ç³»ç»Ÿï¼ˆBody Part Systemï¼‰

**æ–‡ä»¶**: `engine/character/body_part_system.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **éƒ¨ä»¶ç±»å‹**
   - BodyPartType: Head/Torso/Arms/Legs/Hands/Feet
   - é¢éƒ¨ç‰¹å¾: Eyes/Nose/Mouth/Ears
   - é¢å¤–éƒ¨ä»¶: Tail/Wings/Antenna
   - é…é¥°: Hat/Bow/Collar

2. **å½¢çŠ¶ç”Ÿæˆ**
   - PartShape: Sphere/Ellipsoid/Capsule/Cylinder/Cone/Box/Custom
   - ProceduralPartGenerator: ç¨‹åºåŒ–ç”Ÿæˆå„ç§å½¢çŠ¶
   - è‡ªåŠ¨ UV/æ³•çº¿/åˆ‡çº¿

3. **éƒ¨ä»¶ç»„è£…**
   - BodyPartAssembly: ç»„è£…ç®¡ç†
   - çˆ¶å­å…³ç³»/é™„ç€ç‚¹
   - combineMesh(): åˆå¹¶ä¸ºå•ä¸€ç½‘æ ¼
   - createSkeleton(): è‡ªåŠ¨ç”Ÿæˆéª¨éª¼

---

### 30. å¡é€šç‰¹å¾ç³»ç»Ÿï¼ˆCartoon Featuresï¼‰

**æ–‡ä»¶**: `engine/character/cartoon_features.h`

#### æ ¸å¿ƒåŠŸèƒ½

1. **çœ¼ç›æ ·å¼**
   - CartoonEyeStyle: Circle/Oval/Dot/Button/Anime/Disney/Pie
   - è™¹è†œã€ç³å­”ã€é«˜å…‰ã€è½®å»“
   - çœ¼ç‘ï¼ˆç”¨äºè¡¨æƒ…ï¼‰

2. **è€³æœµæ ·å¼**
   - CartoonEarStyle: MouseRound/CatPointed/BunnyLong/BearRound/DogFloppy
   - å†…å¤–é¢œè‰²ã€å°–åº¦ã€å¼¯æ›²åº¦

3. **é¼»å­æ ·å¼**
   - CartoonNoseStyle: Dot/Triangle/Button/Animal/Beak/Snout
   - å¤§å°ã€é¢œè‰²ã€å…‰æ³½

4. **å˜´å·´æ ·å¼**
   - CartoonMouthStyle: None/Line/Smile/Open/Cat
   - Hello Kitty æ— å˜´æ”¯æŒï¼

5. **é…é¥°**
   - Bowï¼ˆè´è¶ç»“ï¼‰ã€Collarï¼ˆé¡¹åœˆï¼‰
   - å¯è‡ªå®šä¹‰é¢œè‰²å’Œä½ç½®

---

### 31. è§’è‰²æ¨¡æ¿å®ç°ï¼ˆCharacter Templatesï¼‰

**æ–‡ä»¶**: `engine/character/character_templates.h`

#### å®ç°çš„æ¨¡æ¿

1. **HumanTemplate**
   - å†™å®äººç±»è§’è‰²
   - 7.5å¤´èº«æ¯”ä¾‹
   - å®Œæ•´éª¨éª¼ï¼ˆ21+éª¨éª¼ï¼‰
   - å¤ç”¨ç°æœ‰ ProceduralHumanGenerator

2. **MascotTemplate (Hello Kitty é£æ ¼)**
   - å¤§å¤´å°èº«ï¼ˆ1.5å¤´èº«ï¼‰
   - çŒ«è€³ã€è´è¶ç»“
   - æ— å˜´è®¾è®¡ï¼
   - ç®€å•éª¨éª¼ï¼ˆè€³æœµå¯åŠ¨ï¼‰
   - é»„è‰²é¼»å­ã€é»‘è‰²ç‚¹çœ¼

3. **CartoonTemplate (ç±³å¥‡é£æ ¼)**
   - å¡é€šæ¯”ä¾‹ï¼ˆ4å¤´èº«ï¼‰
   - å¤§åœ†è€³æœµ
   - é»‘èº«ä½“ + æµ…è‰²è„¸
   - çº¢è‰²çŸ­è£¤ã€é»„è‰²å¤§é‹
   - ç™½è‰²æ‰‹å¥—
   - å°¾å·´æ”¯æŒ

#### ä½¿ç”¨æ–¹å¼

```cpp
// æ³¨å†Œæ¨¡æ¿
luma::registerDefaultTemplates();

// åˆ›å»º Hello Kitty é£æ ¼è§’è‰²
auto& registry = luma::getTemplateRegistry();
luma::CharacterParams params;
params.type = luma::CharacterType::Mascot;
params.primaryColor = luma::Vec3(1, 1, 1);  // ç™½è‰²
params.accentColor = luma::Vec3(1, 0.3f, 0.4f);  // ç²‰è‰²è´è¶ç»“

auto result = registry.createCharacter(luma::CharacterType::Mascot, params);
```

---

### 16.4 å¯è§†åŒ–è„šæœ¬ï¼ˆVisual Scriptingï¼‰

è®¾è®¡ç›®æ ‡ï¼šè®©éç¨‹åºå‘˜ä¹Ÿèƒ½åˆ›å»ºæ¸¸æˆé€»è¾‘

#### æ ¸å¿ƒæ¦‚å¿µ
1. **èŠ‚ç‚¹ç±»å‹**
   - äº‹ä»¶èŠ‚ç‚¹ï¼ˆOnStart, OnUpdate, OnCollisionï¼‰
   - é€»è¾‘èŠ‚ç‚¹ï¼ˆIf, Loop, Switchï¼‰
   - æ•°å­¦èŠ‚ç‚¹ï¼ˆAdd, Multiply, Lerpï¼‰
   - å˜é‡èŠ‚ç‚¹ï¼ˆGet, Setï¼‰
   - åŠ¨ä½œèŠ‚ç‚¹ï¼ˆMove, Rotate, PlaySoundï¼‰

2. **è¿æ¥ç³»ç»Ÿ**
   - æ‰§è¡Œæµï¼ˆç™½è‰²çº¿ï¼‰
   - æ•°æ®æµï¼ˆå½©è‰²çº¿æŒ‰ç±»å‹ï¼‰
   - è‡ªåŠ¨ç±»å‹è½¬æ¢

3. **ä¸ Lua é›†æˆ**
   - å¯è§†åŒ–è„šæœ¬ç¼–è¯‘ä¸º Lua
   - æ”¯æŒè°ƒç”¨è‡ªå®šä¹‰ Lua å‡½æ•°
   - åŒå‘è°ƒè¯•

---

### 32. æ’ä»¶ç³»ç»Ÿï¼ˆPlugin Systemï¼‰

**æ–‡ä»¶**:
- `engine/plugin/plugin_system.h` - æ’ä»¶æ¥å£å®šä¹‰
- `engine/plugin/plugin_manager.h` - æ’ä»¶åŠ è½½å’Œç®¡ç†
- `engine/plugin/plugin_examples.h` - ç¤ºä¾‹æ’ä»¶
- `docs/PLUGIN_DEVELOPMENT.md` - æ’ä»¶å¼€å‘æŒ‡å—

#### æ”¯æŒçš„æ’ä»¶ç±»å‹

| ç±»å‹ | è¯´æ˜ | æ¥å£ |
|------|------|------|
| CharacterTemplate | è§’è‰²æ¨¡æ¿ | `ICharacterTemplatePlugin` |
| Clothing | æœè£… | `IClothingPlugin` |
| Hair | å‘å‹ | `IHairPlugin` |
| Accessory | é…é¥° | `IPlugin` |
| Animation | åŠ¨ç”» | `IPlugin` |
| Expression | è¡¨æƒ… | `IPlugin` |
| Material | æè´¨ | `IPlugin` |
| BodyPart | èº«ä½“éƒ¨ä»¶ | `IPlugin` |

#### æ’ä»¶åŒ…ç»“æ„

```
my-plugin.lumapkg/
â”œâ”€â”€ manifest.json      # å…ƒæ•°æ®
â”œâ”€â”€ thumbnail.png      # é¢„è§ˆå›¾
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ meshes/       # 3D æ¨¡å‹
â”‚   â”œâ”€â”€ textures/     # è´´å›¾
â”‚   â””â”€â”€ configs/      # é…ç½®
â””â”€â”€ lib/              # åŸç”Ÿåº“ (å¯é€‰)
```

#### ä½¿ç”¨æ–¹å¼

```cpp
#include "engine/plugin/plugin_manager.h"

auto& pm = luma::getPluginManager();

// æ·»åŠ æ’ä»¶ç›®å½•
pm.addPluginDirectory("/path/to/plugins");

// å‘ç°å¹¶åŠ è½½æ’ä»¶
auto discovered = pm.discoverPlugins();
for (const auto& meta : discovered) {
    auto result = pm.loadPlugin(meta.id);
    if (result.success) {
        std::cout << "Loaded: " << meta.name << std::endl;
    }
}

// è·å–æ‰€æœ‰æœè£…æ’ä»¶
auto clothingPlugins = luma::getClothingPlugins();
for (auto& plugin : clothingPlugins) {
    for (const auto& item : plugin->getClothingItems()) {
        std::cout << "  - " << item.name << std::endl;
    }
}

// æœç´¢èµ„æº
auto results = pm.searchAssets("striped", luma::PluginType::Clothing);
```

#### åˆ›å»ºç®€å•æœè£…æ’ä»¶

1. åˆ›å»ºç›®å½• `my-clothing/`
2. æ·»åŠ  `manifest.json`:
```json
{
  "id": "com.artist.my-clothing",
  "name": "My Clothing Pack",
  "type": "clothing",
  "version": "1.0.0"
}
```
3. æ·»åŠ æ¨¡å‹åˆ° `assets/meshes/`
4. æ·»åŠ é…ç½®åˆ° `assets/configs/item.json`

è¯¦è§ `docs/PLUGIN_DEVELOPMENT.md`

---

### 33. æ ‡å‡†ç»‘å®šç³»ç»Ÿï¼ˆStandard Rig Systemï¼‰

**æ–‡ä»¶**:
- `engine/character/standard_rig.h` - æ ‡å‡†éª¨éª¼è§„èŒƒ
- `engine/character/facial_rig.h` - é¢éƒ¨ç»‘å®šç³»ç»Ÿ
- `engine/character/auto_rig.h` - è‡ªåŠ¨ç»‘å®šç”Ÿæˆ

#### 32.1 æ”¯æŒçš„éª¨éª¼æ ‡å‡†

| æ ‡å‡† | ç”¨é€” | éª¨éª¼æ•° |
|------|------|--------|
| Luma | å†…éƒ¨æ ‡å‡†ï¼ˆè¶…é›†ï¼‰ | 65+ |
| Mixamo | Adobe åŠ¨ç”»åº“ | 65 |
| Unity Humanoid | Unity Avatar ç³»ç»Ÿ | 55 |
| VRM | VTuber/è™šæ‹Ÿè§’è‰² | 55 |
| Unreal Mannequin | UE5 éª¨éª¼ | 67 |

#### 32.2 éª¨éª¼å‘½åè§„èŒƒ

```cpp
namespace StandardBones {
    // è„Šæ¤é“¾
    Hips -> Spine -> Spine1 -> Spine2 -> Chest -> Neck -> Head
    
    // æ‰‹è‡‚ï¼ˆå·¦/å³ï¼‰
    Shoulder_L/R -> UpperArm_L/R -> LowerArm_L/R -> Hand_L/R
    
    // è…¿ï¼ˆå·¦/å³ï¼‰
    UpperLeg_L/R -> LowerLeg_L/R -> Foot_L/R -> Toes_L/R
    
    // æ‰‹æŒ‡ï¼ˆæ¯æ ¹3èŠ‚ï¼‰
    Thumb1/2/3, Index1/2/3, Middle1/2/3, Ring1/2/3, Pinky1/2/3
    
    // é¢éƒ¨
    Jaw, Eye_L/R, Eyebrow_L/R, EyelidUpper/Lower_L/R, Tongue1/2
}
```

#### 32.3 éª¨éª¼åç§°è½¬æ¢

```cpp
// åœ¨ä¸åŒæ ‡å‡†é—´è½¬æ¢éª¨éª¼åç§°
auto& mapping = BoneMappingTable::getInstance();
std::string mixamoName = mapping.convertBoneName(
    "upperArm_L",           // Luma åç§°
    RigStandard::Luma,      // æºæ ‡å‡†
    RigStandard::Mixamo     // ç›®æ ‡æ ‡å‡†
);
// ç»“æœ: "mixamorig:LeftArm"
```

#### 32.4 é¢éƒ¨ç»‘å®šï¼ˆARKit 52 BlendShapesï¼‰

**çœ¼ç› (14)**
- eyeBlink/LookDown/LookIn/LookOut/LookUp/Squint/Wide (L/R)

**å˜´å·´ (28)**
- jaw: Forward, Left, Right, Open
- mouth: Close, Funnel, Pucker, Left, Right, Smile, Frown, Dimple, Stretch, Roll, Shrug, Press, LowerDown, UpperUp (L/R)

**çœ‰æ¯› (5)**
- browDown (L/R), browInnerUp, browOuterUp (L/R)

**è„¸é¢Š/é¼»å­ (5)**
- cheekPuff, cheekSquint (L/R), noseSneer (L/R)

**èˆŒå¤´ (1)**
- tongueOut

#### 32.5 è¡¨æƒ…é¢„è®¾

```cpp
// ä½¿ç”¨é¢„è®¾è¡¨æƒ…
auto& library = ExpressionLibrary::getInstance();

// å¯ç”¨é¢„è®¾
// - neutral, happy, sad, angry, surprised, fear, disgust
// - blink, wink_left, wink_right

FacialRigController controller;
controller.setExpression("happy", 0.8f);  // 80% å¼ºåº¦
controller.setExpression("angry", 0.3f, true);  // å åŠ  30%
```

#### 32.6 Viseme å£å‹åŒæ­¥

```cpp
// 15 ç§å£å‹
Visemes::sil   // é™é»˜
Visemes::PP    // p, b, m
Visemes::FF    // f, v
Visemes::TH    // th
Visemes::DD    // t, d
Visemes::kk    // k, g
Visemes::CH    // ch, j, sh
Visemes::SS    // s, z
Visemes::nn    // n, l
Visemes::RR    // r
Visemes::aa    // A å…ƒéŸ³
Visemes::E     // E å…ƒéŸ³
Visemes::ih    // I å…ƒéŸ³
Visemes::oh    // O å…ƒéŸ³
Visemes::ou    // U å…ƒéŸ³

VisemeController viseme;
viseme.setViseme(Visemes::aa, 0.8f);
viseme.applyToFacialRig(facialController);
```

#### 32.7 è‡ªåŠ¨ç»‘å®šç”Ÿæˆ

```cpp
// ä¸ºç½‘æ ¼è‡ªåŠ¨ç”Ÿæˆéª¨éª¼æƒé‡
AutoRigParams params;
params.method = AutoRigParams::WeightMethod::DistanceBased;
params.falloffDistance = 0.3f;
params.smoothIterations = 3;

MeshSkinData skinData = AutoRigGenerator::generateWeights(
    mesh, skeleton, params);

// éªŒè¯æƒé‡
if (AutoRigGenerator::validateWeights(skinData)) {
    skinData.applyToMesh(mesh);
}
```

#### 32.8 åˆ›å»ºå®Œæ•´ç»‘å®šè§’è‰²

```cpp
// ä¸€é”®åˆ›å»ºæ ‡å‡†ç»‘å®šè§’è‰²
auto result = CharacterRigManager::createRiggedCharacter(
    mesh,
    1.8f,                       // èº«é«˜
    RigStandard::Mixamo         // è¾“å‡ºæ ‡å‡†
);

if (result.success) {
    Skeleton& skeleton = result.skeleton;
    // éª¨éª¼å¯ç›´æ¥å¯¼å…¥ Mixamo åŠ¨ç”»
}
```

#### 32.9 å¯¼å‡ºå…¼å®¹æ€§

```cpp
// æ£€æŸ¥éª¨éª¼å…¼å®¹æ€§
std::string report = RigExporter::getCompatibilityReport(
    skeleton, RigStandard::UnityHumanoid);

// å¯¼å‡ºä¸º JSONï¼ˆUnity/Blender å¯ç”¨ï¼‰
std::string json = RigExporter::exportToJson(skinData, skeleton);
```

---

### 34. å¯¼å‡ºç³»ç»Ÿï¼ˆExport Systemï¼‰

**æ–‡ä»¶**:
- `engine/export/gltf_exporter.h` - glTF/GLB å¯¼å‡ºå™¨
- `engine/export/model_exporter.h` - ç»Ÿä¸€å¯¼å‡ºæ¥å£

#### æ”¯æŒçš„æ ¼å¼

| æ ¼å¼ | éª¨éª¼ | BlendShapes | åŠ¨ç”» | æ¨èç”¨é€” |
|------|------|-------------|------|----------|
| GLB | âœ… | âœ… | âœ… | Unity, Unreal, Blender, Web |
| glTF | âœ… | âœ… | âœ… | éœ€è¦åˆ†ç¦»æ–‡ä»¶æ—¶ |
| FBX | âœ… | âœ… | âœ… | Maya, 3ds Max, Cinema 4D |
| OBJ | âŒ | âŒ | âŒ | ç®€å•ç½‘æ ¼å¯¼å‡º |
| VRM | âœ… | âœ… | âŒ | VTuber, VRChat |

#### ä½¿ç”¨æ–¹å¼

```cpp
#include "engine/export/model_exporter.h"

// å¯¼å‡ºä¸º GLB
ExportOptions options;
options.format = ExportFormat::GLB;
options.exportSkeleton = true;
options.exportBlendShapes = true;
options.embedTextures = true;

auto result = ModelExporter::exportCharacter(characterData, "character.glb", options);
if (result.success) {
    std::cout << "Exported: " << result.outputPath << std::endl;
    std::cout << "Vertices: " << result.vertexCount << std::endl;
}
```

---

### 35. é¡¹ç›®æ–‡ä»¶ç³»ç»Ÿï¼ˆProject File Systemï¼‰

**æ–‡ä»¶**: `engine/project/project_file.h`

#### é¡¹ç›®æ–‡ä»¶æ ¼å¼ (.luma)

JSON æ ¼å¼ï¼ŒåŒ…å«ï¼š
- è§’è‰²å‚æ•°ï¼ˆèº«ä½“ã€é¢éƒ¨ï¼‰
- è´´å›¾è®¾ç½®
- å‘å‹å’Œé¢œè‰²
- æœè£…åˆ—è¡¨
- BlendShape æƒé‡
- è§†å›¾è®¾ç½®

#### ä½¿ç”¨æ–¹å¼

```cpp
#include "engine/project/project_file.h"

auto& pm = luma::getProjectManager();

// ä¿å­˜é¡¹ç›®
pm.currentProject.name = "MyCharacter";
pm.saveProjectAs("/path/to/character.luma");

// åŠ è½½é¡¹ç›®
pm.loadProject("/path/to/character.luma");

// æœ€è¿‘é¡¹ç›®
for (const auto& path : pm.recentProjects) {
    std::cout << path << std::endl;
}

// è‡ªåŠ¨ä¿å­˜
pm.enableAutoSave(true, 60);  // æ¯ 60 ç§’
```

---

### 36. åŠ¨ç”»é¢„è§ˆç³»ç»Ÿï¼ˆAnimation Previewï¼‰

**æ–‡ä»¶**: `engine/animation/animation_preview.h`

#### å†…ç½®åŠ¨ç”»

| ID | åç§° | ç±»åˆ« | è¯´æ˜ |
|----|------|------|------|
| idle | Idle | Basic | å¾…æœºå‘¼å¸åŠ¨ç”» |
| tpose | T-Pose | Reference | T å§¿åŠ¿å‚è€ƒ |
| apose | A-Pose | Reference | A å§¿åŠ¿å‚è€ƒ |
| wave | Wave | Gesture | æŒ¥æ‰‹ |
| walk | Walk | Locomotion | è¡Œèµ°å¾ªç¯ |
| run | Run | Locomotion | è·‘æ­¥å¾ªç¯ |

#### ä½¿ç”¨æ–¹å¼

```cpp
#include "engine/animation/animation_preview.h"

// è·å–åŠ¨ç”»åº“
auto& lib = luma::getAnimationLibrary();

// æ’­æ”¾åŠ¨ç”»
AnimationPlayer player;
player.setSkeleton(&skeleton);
player.play("walk");

// æ›´æ–°ï¼ˆæ¯å¸§ï¼‰
player.update(deltaTime);

// æ§åˆ¶
player.setPlaybackSpeed(1.5f);
player.pause();
player.resume();
player.stop();
```

---

### 37. è§’è‰²é¢„è®¾ç³»ç»Ÿï¼ˆCharacter Presetsï¼‰

**æ–‡ä»¶**: `engine/character/character_presets.h`

#### å†…ç½®é¢„è®¾åˆ—è¡¨ï¼ˆæ¸¸æˆé£æ ¼ä¼˜å…ˆï¼‰

| åˆ†ç±» | é¢„è®¾ ID | åç§° | è¯´æ˜ |
|------|---------|------|------|
| **è¥¿å¹» Fantasy** | fantasy_elf | ç²¾çµ | å°–è€³ä¼˜é›…ç²¾çµ |
| | fantasy_paladin | åœ£éª‘å£« | å…‰æ˜åœ£éª‘å£« |
| | fantasy_dark_mage | æš—é»‘æ³•å¸ˆ | ç¥ç§˜é»‘æš—é­”æ³•å¸ˆ |
| | fantasy_orc | å…½äººæˆ˜å£« | ç»¿çš®è‚Œè‚‰æˆ˜å£« |
| **æ­¦ä¾  Wuxia** | wuxia_swordsman | å‰‘å®¢ | ä»—å‰‘æ±Ÿæ¹–ä¾ å£« |
| | wuxia_female_knight | å¥³ä¾  | é£’çˆ½è‹±å§¿å¥³ä¾  |
| | wuxia_monk | æ­¦åƒ§ | å°‘æ—æ­¦åƒ§ |
| **å¤é£ Gufeng** | gufeng_xianxia_hero | ä»™ä¾ å°‘å¹´ | ä¿®ä»™å°‘å¹´è‹±é›„ |
| | gufeng_fairy | ä»™å­ | é£˜é€¸å‡ºå°˜ä»™å­ |
| | gufeng_emperor | å¸ç‹ | å¨ä¸¥å¤ä»£å¸ç‹ |
| | gufeng_princess | å…¬ä¸» | ç«¯åº„å…¸é›…å…¬ä¸» |
| **åŠ¨æ¼« Anime** | anime_girl | åŠ¨æ¼«å°‘å¥³ | å¤§çœ¼ç›ã€ç²‰è‰²ç³» |
| | anime_boy | åŠ¨æ¼«å°‘å¹´ | ç»å…¸å°‘å¹´æ¼«é£æ ¼ |
| | anime_chibi | Qç‰ˆè§’è‰² | è¶…å˜å½¢å¯çˆ±é£ |
| **å¡é€š Cartoon** | cartoon_western | è¥¿æ–¹å¡é€š | ç¾å¼å¡é€šé£æ ¼ |
| | cartoon_pixar | çš®å…‹æ–¯é£æ ¼ | 3D åŠ¨ç”»ç”µå½±é£æ ¼ |
| **ç§‘å¹» Sci-Fi** | scifi_cyborg | èµ›åšæ ¼ | äººæœºæ··åˆä½“ |
| | scifi_alien | å¤–æ˜Ÿäºº | å¤§çœ¼æ— å‘å¤–æ˜Ÿç”Ÿç‰© |
| **å†™å® Realistic** | realistic_athlete | è¿åŠ¨å‘˜ | å¥ç¾ä½“å‹ |
| | realistic_child | å„¿ç«¥ | å„¿ç«¥æ¯”ä¾‹ |
| | realistic_elderly | è€å¹´äºº | å¸¦å¹´é¾„ç‰¹å¾ |
| | realistic_business_man | å•†åŠ¡ç”·å£« | ä¸“ä¸šç”·æ€§å•†åŠ¡é€ å‹ |
| | realistic_business_woman | å•†åŠ¡å¥³å£« | ä¸“ä¸šå¥³æ€§å•†åŠ¡é€ å‹ |

#### ä½¿ç”¨æ–¹å¼

```cpp
#include "engine/character/character_presets.h"

// è·å–é¢„è®¾åº“
auto& lib = luma::getPresetLibrary();

// åº”ç”¨é¢„è®¾
const auto* preset = lib.getPreset("anime_girl");
if (preset) {
    applyToCharacter(preset->data);
}

// æŒ‰åˆ†ç±»ç­›é€‰
auto animePresets = lib.getPresetsByCategory(PresetCategory::Anime);

// éšæœºç”Ÿæˆ
CharacterRandomizer randomizer;
auto randomData = randomizer.generateRandom();  // å®Œå…¨éšæœº
auto randomAnime = randomizer.generateRandomInStyle(PresetCategory::Anime);  // åŠ¨æ¼«é£æ ¼éšæœº
```

#### UI åŠŸèƒ½

- **åˆ†ç±»ç­›é€‰**: All / Realistic / Anime / Cartoon / Fantasy / Sci-Fi
- **é¢„è®¾ç½‘æ ¼**: 2 åˆ—å¸ƒå±€ï¼Œæ˜¾ç¤ºé¢„è®¾åç§°ã€ä¸­æ–‡åã€çš®è‚¤/å‘è‰²é¢„è§ˆ
- **åˆ†ç±»å¾½ç« **: R(å†™å®) A(åŠ¨æ¼«) C(å¡é€š) F(å¥‡å¹») S(ç§‘å¹»)
- **éšæœºæŒ‰é’®**: ä¸€é”®éšæœºç”Ÿæˆè§’è‰²

---

---

## Phase 29: è§’è‰²å¢å¼ºç³»ç»Ÿ âœ…

### 29.1 é…é¥°ç³»ç»Ÿ (`engine/character/accessory_system.h`)

**é…é¥°ç±»å‹ (30+)**

| éƒ¨ä½ | ç±»å‹ |
|------|------|
| å¤´éƒ¨ | Hat, Glasses, Sunglasses, Mask, Headband, Hairpin, Crown, Helmet |
| è€³éƒ¨ | Earring, Earphone |
| è„¸éƒ¨ | Beard, Makeup, FacePaint |
| é¢ˆéƒ¨ | Necklace, Scarf, Tie, Bowtie, Choker |
| æ‰‹è‡‚ | Watch, Bracelet, Gloves |
| æ‰‹éƒ¨ | Ring |
| èƒŒéƒ¨ | Wings, Cape, Backpack, Weapon |
| è…°éƒ¨ | Belt, Pouch |

**åŠŸèƒ½ç‰¹æ€§:**
- éª¨éª¼æŒ‚è½½ç‚¹è‡ªåŠ¨ç»‘å®š
- æˆå¯¹é…é¥°æ”¯æŒï¼ˆå¦‚è€³ç¯å·¦å³è‡ªåŠ¨é•œåƒï¼‰
- ç¨‹åºåŒ–é…é¥°ç”Ÿæˆï¼ˆçœ¼é•œã€å¸½å­ã€è€³ç¯ã€é¡¹é“¾ï¼‰
- é¢œè‰²å’Œæè´¨è‡ªå®šä¹‰

### 29.2 è´´èŠ±ç³»ç»Ÿ (`engine/character/decal_system.h`)

**è´´èŠ±ç±»å‹:**
- Tattoo (çº¹èº«), Scar (ä¼¤ç–¤), Birthmark (èƒè®°)
- Makeup (å¦†å®¹), BodyPaint (å½©ç»˜), FacePaint (è„¸ç»˜)
- Wound (ä¼¤å£), Dirt (æ±¡æ¸), Blood (è¡€è¿¹)
- Freckles (é›€æ–‘), Wrinkles (çš±çº¹)

**æ··åˆæ¨¡å¼:**
- Normal, Multiply, Overlay, Additive

**ç¨‹åºåŒ–ç”Ÿæˆ:**
- éƒ¨è½å›¾è…¾çº¹èº«
- åˆ€ç–¤/æŠ“ä¼¤
- é›€æ–‘
- è…®çº¢/å£çº¢
- ä¼¤å£

### 29.3 è¡¨æƒ…é¢„è®¾æ‰©å±• (`engine/character/expression_presets.h`)

**6 å¤§ç±»åˆ«, 30+ é¢„è®¾è¡¨æƒ…:**

| ç±»åˆ« | è¡¨æƒ… |
|------|------|
| Basic | happy, sad, angry, surprised, fear, disgust |
| Emotion | smirk, pout, crying, laughing, thinking, sleepy, determined, embarrassed, confused, proud |
| Communication | talking, whispering, shouting, kissing, whistling |
| Action | sneezing, yawning, eating, drinking, biting_lip |
| GameStyle | battle_cry, victory, defeat, concentration, pain, evil |
| AnimeStyle | anime_shock, anime_cute, anime_smug, anime_dead, anime_sparkling |

---

## Phase 30: ç¯å¢ƒç³»ç»Ÿ âœ…

### 30.1 å¤©æ°”ç³»ç»Ÿ (`engine/environment/weather_system.h`)

**å¤©æ°”ç±»å‹ (13ç§):**
- Clear, Cloudy, Overcast
- LightRain, HeavyRain, Thunderstorm
- LightSnow, HeavySnow, Blizzard
- Fog, DenseFog
- Hail, Sandstorm

**åŠŸèƒ½ç‰¹æ€§:**
- é™æ°´ç²’å­ç³»ç»Ÿï¼ˆé›¨æ»´/é›ªèŠ±ï¼‰
- é£åŠ›å’Œé£å‘
- é›¾æ•ˆï¼ˆè·ç¦»é›¾ã€é«˜åº¦é›¾ï¼‰
- äº‘å±‚è¦†ç›–
- é—ªç”µæ•ˆæœ
- å…‰ç…§è°ƒæ•´ï¼ˆå¤ªé˜³å¼ºåº¦ã€ç¯å¢ƒè‰²ã€é˜´å½±ï¼‰
- å¹³æ»‘å¤©æ°”è¿‡æ¸¡

### 30.2 æ—¥å¤œå¾ªç¯ (`engine/environment/day_night_cycle.h`)

**æ—¶é—´ç³»ç»Ÿ:**
- 24 å°æ—¶å¾ªç¯
- 7 ç§æ—¶æ®µï¼šDawn, Morning, Noon, Afternoon, Dusk, Evening, Night
- è‡ªåŠ¨æ¨è¿›æˆ–æ‰‹åŠ¨æ§åˆ¶

**å¤ªé˜³/æœˆäº®:**
- åŸºäºç»çº¬åº¦çš„å¤ªé˜³ä½ç½®è®¡ç®—
- æœˆç›¸ç³»ç»Ÿ
- æ—¥å‡º/æ—¥è½é¢œè‰²å˜åŒ–

**å¤©ç©º:**
- 7 ç§æ—¶æ®µå¤©ç©ºæ¸å˜ï¼ˆå¤©é¡¶è‰²ã€åœ°å¹³çº¿è‰²ï¼‰
- æ˜Ÿæ˜Ÿå¯è§åº¦ï¼ˆå¤œé—´ï¼‰

### 30.3 æ°´ä½“ç³»ç»Ÿå¢å¼º

**åŸºç¡€æ°´ä½“ (`engine/environment/water_system.h`):**
- WaterType: Lake, River, Ocean, Pond, Stream
- Gerstner æ³¢æµªæ¨¡æ‹Ÿ
- å¤šå…«åº¦æ³¢å åŠ 
- æ°´é¢ç½‘æ ¼ç”Ÿæˆ

**æ¶Ÿæ¼ªäº¤äº’ (`engine/environment/water_interaction.h`):**
- RippleSimulation: 256x256 ç½‘æ ¼æ³¢åŠ¨æ–¹ç¨‹æ¨¡æ‹Ÿ
- AnalyticalRippleSystem: ç‚¹æºæ‰©æ•£æ¶Ÿæ¼ª
- WaterInteractionManager: å…¥æ°´/å‡ºæ°´æ£€æµ‹
- è§’è‰²/ç‰©ä½“ç§»åŠ¨äº§ç”Ÿæ¶Ÿæ¼ª

**æ°´ä¸‹æ•ˆæœ (`engine/environment/underwater_effects.h`):**
- é¢œè‰²å¸æ”¶ï¼ˆæ·±åº¦è¶Šæ·±çº¢å…‰è¡°å‡è¶Šå¤šï¼‰
- æ•£å°„é›¾
- åŠ¨æ€ç„¦æ•£
- å±å¹•æ‰­æ›²
- æ°”æ³¡ç³»ç»Ÿï¼ˆè‡ªåŠ¨ä¸Šæµ®ã€æ‘‡æ‘†ï¼‰
- æµ®æ¸¸ç²’å­
- æš—è§’æ•ˆæœ
- æ·±åº¦æ¨¡ç³Š

**æµ®åŠ›ç‰©ç† (`engine/environment/water_physics.h`):**
- BuoyancySystem: å¤šé‡‡æ ·ç‚¹æµ®åŠ›è®¡ç®—
- çº¿æ€§/è§’é€Ÿåº¦é˜»åŠ›
- SwimmingController: è§’è‰²æ¸¸æ³³æ§åˆ¶

**è§†è§‰ç‰¹æ•ˆ (`engine/environment/water_effects.h`):**
- SplashEffectSystem: æ°´èŠ±/æ°´æ»´/å–·é›¾ç²’å­
- FoamSystem: æ°´é¢æ³¡æ²«æ¼‚æµ®
- ShoreEffectSystem: å²¸è¾¹æ³¢æµª
- CausticsGenerator: ç¨‹åºåŒ–ç„¦æ•£çº¹ç†
- WetSurfaceSystem: æ¹¿æ¶¦åœ°é¢æ•ˆæœ

---

## Phase 31: ç¼–è¾‘å™¨å¢å¼ºç³»ç»Ÿ âœ…

### 31.1 æ’¤é”€/é‡åšç³»ç»Ÿ (`engine/editor/undo_system.h`)

**å‘½ä»¤æ¨¡å¼å®ç°:**
- ICommand æŠ½è±¡æ¥å£
- æ”¯æŒ execute/undo æ“ä½œ
- å‘½ä»¤åˆå¹¶ï¼ˆè¿ç»­æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªï¼‰
- å¤åˆå‘½ä»¤ï¼ˆå¤šä¸ªå‘½ä»¤æ‰“åŒ…ï¼‰

**å†…ç½®å‘½ä»¤ç±»å‹:**
```cpp
// å€¼å˜åŒ–å‘½ä»¤
ValueChangeCommand<T>      // ä»»æ„ç±»å‹å€¼å˜åŒ–
FloatSliderCommand         // æ»‘å—è°ƒæ•´ï¼ˆè‡ªåŠ¨åˆå¹¶ï¼‰
ColorChangeCommand         // é¢œè‰²å˜åŒ–

// å˜æ¢å‘½ä»¤
TransformCommand           // ä½ç½®/æ—‹è½¬/ç¼©æ”¾
BoneRotationCommand        // éª¨éª¼æ—‹è½¬
BlendShapeCommand          // è¡¨æƒ…è°ƒæ•´

// å¤åˆå‘½ä»¤
CompositeCommand           // å‘½ä»¤ç»„
PresetApplyCommand         // é¢„è®¾åº”ç”¨
LambdaCommand              // ç®€å• Lambda
```

**CommandHistory ç®¡ç†å™¨:**
- æ— é™æ’¤é”€/é‡åšï¼ˆå¯é…ç½®ä¸Šé™ï¼‰
- å†…å­˜é™åˆ¶ç®¡ç†
- å‘½ä»¤åˆå¹¶æ—¶é—´çª—å£
- ä¿å­˜ç‚¹è¿½è¸ªï¼ˆè„æ ‡è®°ï¼‰
- å˜æ›´é€šçŸ¥å›è°ƒ

### 31.2 å¿«æ·é”®ç³»ç»Ÿ (`engine/editor/hotkey_system.h`)

**æŒ‰é”®å®šä¹‰:**
```cpp
enum class KeyCode {
    // å­—æ¯ A-Z
    // æ•°å­— 0-9
    // åŠŸèƒ½é”® F1-F12
    // ç‰¹æ®Šé”® Space, Enter, Escape ç­‰
    // å°é”®ç›˜
};

enum class KeyModifier {
    Ctrl, Shift, Alt, Super  // macOS Cmd / Windows Win
};
```

**é¢„è®¾å¿«æ·é”®:**
| å¿«æ·é”® | æ“ä½œ | è¯´æ˜ |
|--------|------|------|
| Ctrl+Z | Undo | æ’¤é”€ |
| Ctrl+Shift+Z | Redo | é‡åš |
| Ctrl+S | Save | ä¿å­˜ |
| Ctrl+E | Export | å¯¼å‡º |
| Q/W/E/R | å·¥å…·åˆ‡æ¢ | é€‰æ‹©/ç§»åŠ¨/æ—‹è½¬/ç¼©æ”¾ |
| Space | Play/Pause | æ’­æ”¾/æš‚åœåŠ¨ç”» |
| K | Add Keyframe | æ·»åŠ å…³é”®å¸§ |
| Numpad 1/3/7 | è§†å›¾åˆ‡æ¢ | å‰/å³/é¡¶è§†å›¾ |
| F11 | Fullscreen | å…¨å± |

**ç‰¹æ€§:**
- ç”¨æˆ·è‡ªå®šä¹‰ç»‘å®š
- å†²çªæ£€æµ‹
- é…ç½®æ–‡ä»¶ä¿å­˜/åŠ è½½
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆä¸åŒé¢æ¿ä¸åŒå¿«æ·é”®ï¼‰

### 31.3 æ¸²æŸ“é¢„è®¾ç³»ç»Ÿ (`engine/rendering/render_presets.h`)

**è´¨é‡æ¡£ä½:**
```cpp
enum class RenderQuality {
    Preview,   // é¢„è§ˆï¼ˆ0.5x åˆ†è¾¨ç‡ï¼Œæ—  AO/SSRï¼‰
    Draft,     // è‰ç¨¿ï¼ˆ0.75xï¼ŒåŸºç¡€æ•ˆæœï¼‰
    Standard,  // æ ‡å‡†ï¼ˆ1xï¼ŒTAA + SSAO + SSRï¼‰
    High,      // é«˜è´¨é‡ï¼ˆGI + ä½“ç§¯é›¾ï¼‰
    Ultra      // è¶…é«˜ï¼ˆ1.5x è¶…é‡‡æ ·ï¼Œå…¨éƒ¨ç‰¹æ•ˆï¼‰
};
```

**RenderSettings å®Œæ•´å‚æ•°:**
- åˆ†è¾¨ç‡å’Œæ¸²æŸ“ç¼©æ”¾
- æŠ—é”¯é½¿ï¼ˆFXAA/SMAA/TAA/MSAAï¼‰
- é˜´å½±ï¼ˆåˆ†è¾¨ç‡/çº§è”æ•°/è½¯é˜´å½±/PCFï¼‰
- ç¯å¢ƒå…‰é®è”½ï¼ˆSSAO/HBAO/GTAOï¼‰
- å±å¹•ç©ºé—´åå°„
- å…¨å±€å…‰ç…§ï¼ˆå…‰çº¿è¿½è¸ª/é‡‡æ ·/åå¼¹ï¼‰
- ä½“ç§¯æ•ˆæœ
- åå¤„ç†ï¼ˆBloom/DOF/åŠ¨æ€æ¨¡ç³Š/è‰²å·®/æš—è§’/èƒ¶ç‰‡é¢—ç²’ï¼‰
- è‰²è°ƒæ˜ å°„ï¼ˆReinhard/ACES/Filmic/AgXï¼‰
- æè´¨è´¨é‡ï¼ˆå„å‘å¼‚æ€§/æ³•çº¿/è§†å·®/SSSï¼‰

**é«˜è´¨é‡è¾“å‡ºè®¾ç½®:**
```cpp
struct OutputSettings {
    // åˆ†è¾¨ç‡é¢„è®¾
    enum class Resolution {
        HD_720p, FullHD_1080p, QHD_1440p,
        UHD_4K, UHD_8K,
        Square_1K, Square_2K, Square_4K
    };
    
    ImageFormat format;     // PNG/JPG/EXR/TGA
    bool transparentBackground;
    int samples;            // ç´¯ç§¯é‡‡æ ·
    bool isSequence;        // åºåˆ—æ¸²æŸ“
};
```

---

## Phase 32: åŠ¨ç”»å¢å¼ºç³»ç»Ÿ âœ…

### 32.1 Lip Sync å£å‹åŒæ­¥ (`engine/animation/lip_sync.h`)

**Viseme å®šä¹‰ï¼ˆå£å‹ï¼‰:**
```cpp
enum class Viseme {
    Silence,        // é™éŸ³
    AA, AE, AH,     // å…ƒéŸ³ a
    AO, AW, AY,     // å…ƒéŸ³ o
    B_M_P,          // åŒå”‡éŸ³
    CH_J_SH,        // é½¿éŸ³
    D_T_N,          // èˆŒå°–éŸ³
    EH, ER, EY,     // å…ƒéŸ³ e
    F_V,            // å”‡é½¿éŸ³
    G_K_NG,         // èˆŒæ ¹éŸ³
    IH, IY,         // å…ƒéŸ³ i
    L, R,           // æµéŸ³
    OW, OY,         // å…ƒéŸ³ o
    S_Z, TH,        // é½¿æ“¦éŸ³
    UH, UW,         // å…ƒéŸ³ u
    W, Y            // åŠå…ƒéŸ³
};
```

**Viseme â†’ BlendShape æ˜ å°„:**
- åŸºäº ARKit 52 BlendShapes
- æ¯ä¸ª Viseme æ˜ å°„åˆ°å¤šä¸ª BlendShape æƒé‡
- ä¾‹å¦‚ B_M_P â†’ mouthClose(0.8) + mouthPressLeft(0.3)

**éŸ³é¢‘åˆ†æ:**
```cpp
struct AudioFrame {
    float amplitude;           // RMS æŒ¯å¹…
    float pitch;               // éŸ³é«˜ä¼°è®¡
    std::array<float, 8> spectrum;  // 8 æ®µé¢‘è°±
    float zeroCrossingRate;    // è¿‡é›¶ç‡
    float spectralCentroid;    // é¢‘è°±è´¨å¿ƒ
};
```

**LipSyncEngine:**
- åŸºäºé¢‘è°±ç‰¹å¾åˆ†ç±» Viseme
- å¹³æ»‘è¿‡æ¸¡
- æŒ¯å¹…è‡ªé€‚åº”
- å¯è°ƒèŠ‚ jaw/lip å¼ºè°ƒ

**LipSyncTrack:**
- é¢„çƒ˜ç„™çš„å£å‹æ—¶é—´è½´
- ä»éŸ³é¢‘ç”Ÿæˆ
- ä»éŸ³ç´ æ—¶åºç”Ÿæˆï¼ˆTTSï¼‰

### 32.2 åœºæ™¯å¸ƒç½®ç³»ç»Ÿ (`engine/scene/scene_layout.h`)

**SceneObject:**
```cpp
struct SceneObject {
    string id, name;
    SceneObjectType type;  // Character/Prop/Light/Camera/Environment
    
    Vec3 position;
    Quat rotation;
    Vec3 scale;
    
    string parentId;       // å±‚çº§
    vector<string> childIds;
    
    bool visible, locked, selected;
    string layerName;
    
    // æ¸²æŸ“
    bool castShadow, receiveShadow;
    float opacity;
};
```

**åœºæ™¯å›¾å±‚:**
- Default / Characters / Props / Environment / Lights / Effects
- å›¾å±‚å¯è§æ€§/é”å®š
- å›¾å±‚é¢œè‰²æ ‡è®°

**åœºæ™¯é¢„è®¾:**
| é¢„è®¾ | è¯´æ˜ |
|------|------|
| Simple Studio | ä¸‰ç‚¹å…‰æºæ‘„å½±æ£š |
| Photo Studio | ä¸“ä¸šæ‘„å½±ç¯å¢ƒ |
| Park | æˆ·å¤–å…¬å›­ |
| City Street | åŸå¸‚è¡—é“ |
| Castle Hall | åŸå ¡å¤§å…ï¼ˆå¥‡å¹»ï¼‰ |
| Spaceship Interior | é£èˆ¹å†…éƒ¨ï¼ˆç§‘å¹»ï¼‰ |

**åœºæ™¯æ“ä½œ:**
- æ·»åŠ /åˆ é™¤/å¤åˆ¶ç‰©ä½“
- å±‚çº§ç®¡ç†ï¼ˆçˆ¶å­å…³ç³»ï¼‰
- åˆ†ç»„/å–æ¶ˆåˆ†ç»„
- å¯¹é½ï¼ˆX/Y/Z è½´ï¼‰
- åˆ†å¸ƒï¼ˆå‡åŒ€æ’åˆ—ï¼‰
- å¤šé€‰æ“ä½œ

### 32.3 ç›¸æœºåŠ¨ç”»ç³»ç»Ÿ (`engine/animation/camera_animation.h`)

**CameraKeyframe:**
```cpp
struct CameraKeyframe {
    float time;
    Vec3 position, target, up;
    
    float fov;
    float nearPlane, farPlane;
    
    // æ™¯æ·±
    float focusDistance, aperture;
    bool dofEnabled;
    
    // æ’å€¼
    EaseType easeIn, easeOut;
    Vec3 inTangent, outTangent;  // Bezier
};
```

**CameraPath:**
- å…³é”®å¸§åºåˆ—
- å¾ªç¯æ”¯æŒ
- æ—¶é—´è½´ç¼–è¾‘

**é¢„è®¾ç›¸æœºè¿åŠ¨:**
| è¿åŠ¨ | è¯´æ˜ |
|------|------|
| Orbit | ç¯ç»•ç›®æ ‡æ—‹è½¬ |
| Dolly | æ¨æ‹‰ï¼ˆå‰åç§»åŠ¨ï¼‰ |
| Truck | æ¨ªç§»ï¼ˆå·¦å³ç§»åŠ¨ï¼‰ |
| Crane | å‡é™ |
| Zoom | å˜ç„¦ï¼ˆæ”¹å˜ FOVï¼‰ |
| Dolly Zoom | å¸ŒåŒºæŸ¯å…‹çœ©æ™•æ•ˆæœ |
| Arc | å¼§å½¢ç§»åŠ¨ |
| Focus Pull | ç„¦ç‚¹è½¬ç§» |
| Shake | éœ‡åŠ¨æ•ˆæœ |

**CameraInterpolator:**
- çº¿æ€§/ç¼“å…¥/ç¼“å‡º/ç¼“å…¥ç¼“å‡º/Bezier æ’å€¼
- ä½ç½®ï¼šBezier æ›²çº¿
- æ–¹å‘ï¼šçƒé¢æ’å€¼
- å±æ€§ï¼šçº¿æ€§æ’å€¼

**CameraAnimationPlayer:**
- æ’­æ”¾/æš‚åœ/åœæ­¢
- æ—¶é—´æ§åˆ¶
- é€Ÿåº¦è°ƒèŠ‚
- å¾ªç¯æ’­æ”¾
- å®Œæˆå›è°ƒ

---

## Phase 33: æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿ âœ…

### 33.1 LOD ç³»ç»Ÿ (`engine/renderer/lod_system.h`)

**LOD å±‚çº§å®šä¹‰:**
```cpp
struct LODLevel {
    int level;              // 0 = æœ€é«˜è´¨é‡
    float screenSize;       // å±å¹•å æ¯”é˜ˆå€¼
    float distance;         // è·ç¦»é˜ˆå€¼
    
    shared_ptr<Mesh> mesh;
    shared_ptr<Mesh> shadowMesh;  // é˜´å½±ä¸“ç”¨ä½æ¨¡
    
    int vertexCount, triangleCount;
    float reductionPercent;
};
```

**LOD ç”Ÿæˆå™¨:**
- åŸºäºè¾¹æŠ˜å çš„ç½‘æ ¼ç®€åŒ–
- å¯é…ç½®ç®€åŒ–ç›®æ ‡ï¼ˆ50%/25%/10%ï¼‰
- å¯é…ç½®è·ç¦»/å±å¹•å°ºå¯¸é˜ˆå€¼
- UV/æ³•çº¿/è¾¹ç•Œä¿æŒé€‰é¡¹
- é˜´å½± LOD é¢å¤–ç®€åŒ–

**LOD å®ä¾‹ç®¡ç†:**
- è‡ªåŠ¨è·ç¦»é€‰æ‹©
- å¹³æ»‘è¿‡æ¸¡ï¼ˆCross-fadeï¼‰
- LOD åç§»ï¼ˆå…¨å±€è´¨é‡è°ƒèŠ‚ï¼‰
- å¼ºåˆ¶ LOD çº§åˆ«

### 33.2 GPU Instancing (`engine/renderer/gpu_instancing.h`)

**å®ä¾‹æ•°æ®:**
```cpp
struct InstanceData {
    Mat4 transform;
    Vec4 color;
    Vec4 customData;      // è‡ªå®šä¹‰ç€è‰²å™¨æ•°æ®
    Vec3 boundingCenter;
    float boundingRadius;
};
```

**å®ä¾‹æ‰¹æ¬¡ç®¡ç†:**
- æŒ‰ Mesh + Material åˆ†ç»„
- è‡ªåŠ¨è§†é”¥å‰”é™¤
- å®ä¾‹ç¼“å†²åŒºç®¡ç†
- æ‰¹é‡æ·»åŠ /æ›´æ–°/ç§»é™¤

**æ¤è¢«å®ä¾‹åŒ–:**
```cpp
class VegetationInstancer {
    void addType(typeId, meshId, density, scaleRange);
    void generateForArea(typeId, min, max, heightmap, densityMap);
    vector<InstanceData> getInstanceData(typeId, time);  // å«é£åŠ¨ç”»
};
```

**ä¾¿æ·åŠŸèƒ½:**
- `scatter()`: éšæœºæ•£å¸ƒ
- `grid()`: ç½‘æ ¼æ’åˆ—

---

## Phase 34: ç¼–è¾‘å™¨é¢æ¿ç³»ç»Ÿ âœ…

### 34.1 èµ„æºæµè§ˆå™¨ (`engine/editor/asset_browser.h`)

**èµ„æºç±»å‹:**
- 3D: Model, Mesh, Skeleton, Animation
- çº¹ç†: Texture, Cubemap
- æè´¨: Material, Shader
- éŸ³é¢‘: Audio
- æ•°æ®: Prefab, Scene, Project, Config
- è§’è‰²: Character, Clothing, HairStyle
- è„šæœ¬: Script

**èµ„æºä¿¡æ¯:**
```cpp
struct AssetInfo {
    string id, name, path;
    AssetType type;
    size_t fileSize;
    vector<string> tags;
    vector<string> dependencies;
    bool isLoaded, isModified;
};
```

**æµè§ˆå™¨åŠŸèƒ½:**
- æ–‡ä»¶å¤¹å¯¼èˆªï¼ˆå†å²/å‰è¿›/åé€€/ä¸Šçº§ï¼‰
- è§†å›¾æ¨¡å¼ï¼ˆåˆ—è¡¨/ç½‘æ ¼/ç¼©ç•¥å›¾ï¼‰
- æœç´¢å’Œç±»å‹è¿‡æ»¤
- æ’åºï¼ˆåç§°/ç±»å‹/å¤§å°/æ—¥æœŸï¼‰
- æ‹–æ”¾å¯¼å…¥
- å¤šé€‰æ“ä½œ

**å¯¼å…¥è®¾ç½®:**
- ModelImportSettings: ç¼©æ”¾ã€åŠ¨ç”»ã€æè´¨ã€LOD
- TextureImportSettings: Mipmapã€sRGBã€å‹ç¼©
- AudioImportSettings: é‡‡æ ·ç‡ã€å‹ç¼©ã€æµå¼

### 34.2 å†å²è®°å½•é¢æ¿ (`engine/editor/history_panel.h`)

**å†å²æ¡ç›®:**
```cpp
struct HistoryEntry {
    int index;
    string description;
    string type;
    bool isCurrent, isUndone;
    string icon;
    Vec3 color;
};
```

**é¢æ¿åŠŸèƒ½:**
- æ˜¾ç¤ºæ’¤é”€/é‡åšå †æ ˆ
- å½“å‰çŠ¶æ€æ ‡è®°
- è·³è½¬åˆ°ä»»æ„å†å²ç‚¹
- è¿‡æ»¤å’Œæœç´¢
- ä¿å­˜ç‚¹æ ‡è®°ï¼ˆè„æ ‡å¿—ï¼‰

### 34.3 å±æ€§æ£€æŸ¥å™¨ (`engine/editor/property_inspector.h`)

**å±æ€§ç±»å‹:**
- åŸºç¡€: Bool, Int, Float, String
- å‘é‡: Vec2, Vec3, Vec4, Quat
- é¢œè‰²: Color3, Color4
- å¤æ‚: Enum, Flags, Asset, Object, Array

**å±æ€§å…ƒæ•°æ®:**
```cpp
struct PropertyMeta {
    string name, displayName, tooltip, category;
    PropertyType type;
    
    bool readOnly, hidden;
    float minValue, maxValue, step;
    bool slider, logarithmic;
    
    vector<string> enumValues;
    string assetType;
};
```

**æ£€æŸ¥å™¨åŠŸèƒ½:**
- åˆ†ç±»åˆ†ç»„æ˜¾ç¤º
- æœç´¢è¿‡æ»¤
- ä¿®æ”¹è¿½è¸ªï¼ˆé«˜äº®æ˜¾ç¤ºï¼‰
- åªè¯»å±æ€§æ”¯æŒ
- åµŒå¥—å¯¹è±¡å±•å¼€
- æ•°ç»„ç¼–è¾‘

**IInspectable æ¥å£:**
```cpp
class IInspectable {
    virtual vector<PropertyDef> getProperties() = 0;
    virtual string getDisplayName() const = 0;
    virtual string getTypeName() const = 0;
};
```

### 34.4 è§†å£å·¥å…· (`engine/editor/viewport_tools.h`)

**æµ‹é‡å·¥å…·:**
```cpp
struct Measurement {
    enum Type { Distance, Angle, Area, Volume };
    vector<Vec3> points;
    float value;
    string displayValue;  // å¸¦å•ä½æ ¼å¼åŒ–
};
```

- ä¸¤ç‚¹è·ç¦»æµ‹é‡ï¼ˆè‡ªåŠ¨ mm/cm/m å•ä½ï¼‰
- ä¸‰ç‚¹è§’åº¦æµ‹é‡
- å¤šè¾¹å½¢é¢ç§¯è®¡ç®—
- åŒ…å›´ç›’ä½“ç§¯è®¡ç®—

**æ ‡æ³¨ç³»ç»Ÿ:**
```cpp
struct Annotation {
    enum Type { Note, Warning, Todo, Question };
    string text;
    Vec3 worldPosition;
    string attachedObjectId;
    bool pinned, resolved;
};
```

- 4 ç§æ ‡æ³¨ç±»å‹ï¼ˆä¸åŒé¢œè‰²å›¾æ ‡ï¼‰
- é™„ç€åˆ°ç‰©ä½“
- å¯æŠ˜å /è§£å†³çŠ¶æ€

**å‚è€ƒå›¾:**
```cpp
struct ReferenceImage {
    string path;
    Vec3 position;
    Quat rotation;
    Vec2 size;
    float opacity;
    
    enum View { Front, Back, Left, Right, Top, Bottom };
    void setView(View v);  // å¿«é€Ÿè®¾ç½®æ ‡å‡†è§†å›¾
};
```

**ç½‘æ ¼è®¾ç½®:**
- å¯è§æ€§/å°ºå¯¸/ç»†åˆ†
- ä¸»æ¬¡ç½‘æ ¼é¢œè‰²
- è½´çº¿é¢œè‰²
- å¸é™„åˆ°ç½‘æ ¼

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [README.md](README.md) - é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹
- [GOLDEN_PATH.md](GOLDEN_PATH.md) - 30 åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- [docs/PLUGIN_DEVELOPMENT.md](docs/PLUGIN_DEVELOPMENT.md) - æ’ä»¶å¼€å‘æŒ‡å—
